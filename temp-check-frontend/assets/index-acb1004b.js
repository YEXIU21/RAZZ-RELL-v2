import{r as g,c as ee,u as _e,a as oe,S as Z,w as Pe,o as me,b as je,d as ke,e as n,f as d,g as e,h as pe,i as ve,n as L,j as E,k as M,t as r,l as O,v as xt,F as te,m as N,p as qe,q as ae,s as Y,x as it,y as ce,z as jt,A as Re,B as rt,C as de,T as Et,D as zt,E as It,G as ue,H as he,I as Fe,J as $e,K as Se,L as Te,M as Dt,_ as We,N as Qe,O as Be,P as Je,Q as Gt,R as Jt,U as ze,V as kt,W as Wt,X as Qt,Y as Ht,Z as Yt,$ as Zt,a0 as Kt,a1 as Xt}from"./vendor-771ffc5f.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const v of i)if(v.type==="childList")for(const w of v.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&t(w)}).observe(document,{childList:!0,subtree:!0});function c(i){const v={};return i.integrity&&(v.integrity=i.integrity),i.referrerPolicy&&(v.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?v.credentials="include":i.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function t(i){if(i.ep)return;i.ep=!0;const v=c(i);fetch(i.href,v)}})();const Oe=g(null),Ne=g(localStorage.getItem("auth_token")),es=ee(()=>!!Ne.value),tt=ee(()=>localStorage.getItem("user_role")==="admin"||localStorage.getItem("user_role")==="staff");function ye(){const S=_e(),s=async b=>{var C,A;try{const l=await oe.post("http://127.0.0.1:8000/api/login",b);if(l.data.status===200){Ne.value=l.data.token,localStorage.setItem("auth_token",l.data.token),localStorage.setItem("user_role",l.data.user.role),localStorage.setItem("user_info",JSON.stringify(l.data.user)),Oe.value=l.data.user;const f=S.currentRoute.value.query.redirect||(tt.value?"/admin":"/");await S.push(f),await Z.fire({icon:"success",title:"Success!",text:"You are now logged in."})}else await Z.fire({icon:"error",title:"Error!",text:"Invalid email or password.",confirmButtonColor:"#3085d6",confirmButtonText:"Okay"})}catch(l){return console.error("Login error:",l),await Z.fire({icon:"error",title:"Error!",text:((A=(C=l.response)==null?void 0:C.data)==null?void 0:A.message)||"An error occurred during login."}),!1}},c=async()=>{Oe.value=null,Ne.value=null,localStorage.removeItem("auth_token"),localStorage.removeItem("user_info"),localStorage.removeItem("user_role"),localStorage.removeItem("user"),await Z.fire({icon:"success",title:"Logged Out!",text:"You have been successfully logged out.",timer:1500,showConfirmButton:!1})};return{user:Oe,token:Ne,isAuthenticated:es,isAdmin:tt,login:s,logout:c,register:async b=>{var C,A;try{const l=await oe.post("http://127.0.0.1:8000/api/register",b);if(l.data.status===200){Ne.value=l.data.token,localStorage.setItem("auth_token",l.data.token),localStorage.setItem("user_role",l.data.user.role),localStorage.setItem("user_info",JSON.stringify(l.data.user)),Oe.value=l.data.user;const f=S.currentRoute.value.query.redirect||(tt.value?"/admin":"/");return await S.push(f),l}}catch(l){return console.error("Registration error:",l),await Z.fire({icon:"error",title:"Registration Failed",text:((A=(C=l.response)==null?void 0:C.data)==null?void 0:A.message)||"An error occurred during registration. Please try again.",confirmButtonColor:"#d33",confirmButtonText:"Okay"}),!1}},updateProfile:async b=>{try{const C=await fetch("http://localhost:3000/api/auth/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ne.value}`},body:JSON.stringify(b)});if(!C.ok)throw new Error("Failed to update profile");const A=await C.json();return Oe.value=A,!0}catch(C){return console.error("Profile update error:",C),!1}},changePassword:async b=>{var C,A;try{return(await oe.post("http://127.0.0.1:8000/api/reset-password",b)).data.status===200?(await Z.fire({icon:"success",title:"Success!",text:"Your password has been reset successfully.",confirmButtonColor:"#3085d6",confirmButtonText:"Okay"}),!0):!1}catch(l){return console.error("Password change error:",l),await Z.fire({icon:"error",title:"Error!",text:((A=(C=l.response)==null?void 0:C.data)==null?void 0:A.message)||"Failed to reset password. Please try again.",confirmButtonColor:"#d33",confirmButtonText:"Okay"}),!1}},forgotPassword:async b=>{var C,A;try{if((await oe.post("http://127.0.0.1:8000/api/forgot-password",{email:b})).data.status===200)return await Z.fire({icon:"success",title:"Success!",text:"Password reset instructions have been sent to your email."}),!0}catch(l){return console.error("Forgot password error:",l),await Z.fire({icon:"error",title:"Error!",text:((A=(C=l.response)==null?void 0:C.data)==null?void 0:A.message)||"An error occurred while processing your request."}),!1}},contactUs:async b=>{try{(await oe.post("http://127.0.0.1:8000/api/contact-us",b)).data.status===200?await Z.fire({icon:"success",title:"Success!",text:"Your message has been sent successfully.",confirmButtonColor:"#3085d6",confirmButtonText:"Okay"}):await Z.fire({icon:"error",title:"Success!",text:"Your account has been created successfully.",confirmButtonColor:"#3085d6",confirmButtonText:"Okay"})}catch(C){return console.error("Registration error:",C),!1}},fetchUser:async()=>{if(Ne.value)try{if(!(await fetch("http://127.0.0.1:8000/api/my-info")).ok)throw new Error("Failed to fetch user");Oe.value=localStorage.getItem("user_info")}catch(b){console.error("Error fetching user:",b),c()}}}}const Ze=g(!1),Me=g(null),_t=g({title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",type:"warning",confirmButtonClass:"",cancelButtonClass:""});function dt(){const S=(w={})=>new Promise(k=>{Ze.value=!0,Me.value=k,Object.assign(_t.value,{title:"Confirm Action",message:"Are you sure you want to proceed?",confirmText:"Confirm",cancelText:"Cancel",type:"warning",confirmButtonClass:"",cancelButtonClass:"",...w})});return{isOpen:Ze,confirmationConfig:_t,confirm:S,handleConfirm:()=>{Ze.value=!1,Me.value&&(Me.value(!0),Me.value=null)},handleCancel:()=>{Ze.value=!1,Me.value&&(Me.value(!1),Me.value=null)},confirmDelete:(w="item")=>S({title:"Delete Confirmation",message:`Are you sure you want to delete this ${w}? This action cannot be undone.`,confirmText:"Delete",type:"danger",confirmButtonClass:"bg-red-600 hover:bg-red-700"}),confirmDiscard:(w="changes")=>S({title:"Discard Changes",message:`Are you sure you want to discard your ${w}? Any unsaved changes will be lost.`,confirmText:"Discard",type:"warning",confirmButtonClass:"bg-yellow-600 hover:bg-yellow-700"}),confirmLogout:()=>S({title:"Logout Confirmation",message:"Are you sure you want to log out? Any unsaved changes will be lost.",confirmText:"Logout",type:"warning",confirmButtonClass:"bg-blue-600 hover:bg-blue-700"})}}const Mt="razz_rell_theme",Ve=g(localStorage.getItem(Mt)||"light"),Nt={light:{"--background-color":"#f8f9fa","--card-background":"#ffffff","--modal-background":"#ffffff","--text-color":"#2c3e50","--text-muted":"#6c757d","--text-secondary":"#6B7280","--border-color":"#dee2e6","--input-background":"#ffffff","--hover-background":"#f3f4f6","--hover-color":"#e5e7eb","--primary-color":"#3b82f6","--primary-hover":"#2563eb","--primary-light":"rgba(59, 130, 246, 0.1)","--secondary-color":"#64748B","--secondary-dark":"#475569","--success-color":"#22c55e","--success-light":"rgba(34, 197, 94, 0.1)","--warning-color":"#f59e0b","--warning-light":"rgba(245, 158, 11, 0.1)","--error-color":"#ef4444","--error-light":"rgba(239, 68, 68, 0.1)","--info-color":"#3b82f6","--info-light":"rgba(59, 130, 246, 0.1)","--danger-color":"#DC2626","--danger-light":"rgba(220, 38, 38, 0.1)","--shadow-sm":"0 1px 2px rgba(0, 0, 0, 0.05)","--shadow-md":"0 4px 6px -1px rgba(0, 0, 0, 0.1)","--shadow-lg":"0 10px 15px -3px rgba(0, 0, 0, 0.1)","--overlay-background":"rgba(0, 0, 0, 0.5)","--overlay-dark":"rgba(0, 0, 0, 0.75)","--table-header-background":"rgba(0, 0, 0, 0.02)","--event-wedding-bg":"#ffebee","--event-wedding-text":"#c62828","--event-debut-bg":"#fff3e0","--event-debut-text":"#ef6c00","--event-christening-bg":"#e3f2fd","--event-christening-text":"#1565c0","--event-party-bg":"#e8f5e9","--event-party-text":"#2e7d32","--event-platinum-bg":"#ede7f6","--event-platinum-text":"#4527a0","--color-scheme":"light"},dark:{"--background-color":"#121212","--card-background":"#1E1E1E","--modal-background":"#1E1E1E","--text-color":"#E5E7EB","--text-muted":"#9CA3AF","--text-secondary":"#9CA3AF","--border-color":"#2E2E2E","--input-background":"#2E2E2E","--hover-background":"#2E2E2E","--hover-color":"#363636","--primary-color":"#3B82F6","--primary-hover":"#2563EB","--primary-light":"rgba(59, 130, 246, 0.1)","--secondary-color":"#64748B","--secondary-dark":"#475569","--success-color":"#22C55E","--success-light":"rgba(34, 197, 94, 0.1)","--warning-color":"#F59E0B","--warning-light":"rgba(245, 158, 11, 0.1)","--error-color":"#EF4444","--error-light":"rgba(239, 68, 68, 0.1)","--info-color":"#3B82F6","--info-light":"rgba(59, 130, 246, 0.1)","--danger-color":"#DC2626","--danger-light":"rgba(220, 38, 38, 0.1)","--shadow-sm":"0 1px 2px rgba(0, 0, 0, 0.3)","--shadow-md":"0 4px 6px -1px rgba(0, 0, 0, 0.4)","--shadow-lg":"0 10px 15px -3px rgba(0, 0, 0, 0.5)","--overlay-background":"rgba(0, 0, 0, 0.75)","--overlay-dark":"rgba(0, 0, 0, 0.9)","--table-header-background":"rgba(255, 255, 255, 0.02)","--event-wedding-bg":"#2c1215","--event-wedding-text":"#ff8a80","--event-debut-bg":"#2c1810","--event-debut-text":"#ffb74d","--event-christening-bg":"#0d2137","--event-christening-text":"#64b5f6","--event-party-bg":"#0f2213","--event-party-text":"#81c784","--event-platinum-bg":"#1a1426","--event-platinum-text":"#b39ddb","--color-scheme":"dark"}},ts=S=>{const s=document.documentElement,c=Nt[S];Object.entries(c).forEach(([t,i])=>{s.style.setProperty(t,i)})};Pe(Ve,S=>{localStorage.setItem(Mt,S),ts(S)},{immediate:!0});function He(){return{currentTheme:Ve,toggleTheme:()=>{Ve.value=Ve.value==="light"?"dark":"light"},setTheme:t=>{Nt[t]&&(Ve.value=t)},isDarkMode:()=>Ve.value==="dark"}}const ut="/assets/default-profile-b1e53739.png";const ne=(S,s)=>{const c=S.__vccOpts||S;for(const[t,i]of s)c[t]=i;return c},ss={class:"nav-container"},as={class:"nav-brand"},os=["src"],ns={class:"nav-links"},ls={class:"nav-auth"},is=["title"],rs=["src","alt"],ds={class:"user-name"},us={class:"user-info"},cs=["src","alt"],ps={class:"user-details"},vs={class:"name"},ms={class:"email"},fs={__name:"Navbar",setup(S){const s=_e(),{user:c,isAuthenticated:t,logout:i}=ye(),{toggleTheme:v,isDarkMode:w}=He(),k=ee(()=>w()?new URL("/assets/logo2-da863cb0.png",self.location).href:new URL("/assets/logo1-89c8d4b1.png",self.location).href),_=g(!1),b=g(!1),C=g(!1),A=g(null),l=g(null),f=ee(()=>localStorage.getItem("user_role")==="admin"||localStorage.getItem("user_role")==="staff"),a=ee(()=>JSON.parse(localStorage.getItem("user_info"))),m=ee(()=>{const y=a.value;return y!=null&&y.avatar?y.avatar.startsWith("images/")?`/src/assets/${y.avatar}`:y.avatar.startsWith("http")?y.avatar:`http://127.0.0.1:8000/storage/${y.avatar}`:"portfolios/defaultAvatar.png"}),$=ee(()=>{const y=a.value;return y!=null&&y.first_name&&(y!=null&&y.last_name)?`${y.first_name} ${y.last_name}`:"User"}),T=()=>{_.value=!_.value,_.value?document.body.style.overflow="hidden":document.body.style.overflow="auto"},h=()=>{_.value=!1,document.body.style.overflow="auto"},K=()=>{C.value=!C.value},U=()=>{C.value=!1},D=async()=>{(await Z.fire({title:"Logout Confirmation",text:"Are you sure you want to logout?",icon:"warning",showCancelButton:!0,confirmButtonText:"Logout",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"})).isConfirmed&&(await i(),U(),s.push("/login"))},R=()=>{b.value=window.scrollY>50},x=y=>{A.value&&l.value&&!A.value.contains(y.target)&&!l.value.contains(y.target)&&U()};return me(()=>{window.addEventListener("scroll",R),document.addEventListener("click",x)}),je(()=>{window.removeEventListener("scroll",R),document.removeEventListener("click",x)}),(y,u)=>{var F;const I=ke("router-link");return f.value?N("",!0):(n(),d("nav",{key:0,class:L(["navbar",{scrolled:b.value}])},[e("div",ss,[e("div",as,[pe(I,{to:"/",class:"logo"},{default:ve(()=>[e("img",{src:k.value,alt:"Razz Rell Events"},null,8,os)]),_:1})]),e("div",{class:"nav-toggle",onClick:T},[e("i",{class:L(_.value?"fas fa-times":"fas fa-bars")},null,2)]),e("div",{class:L(["nav-menu",{active:_.value}])},[e("div",ns,[pe(I,{to:"/",class:"nav-link",onClick:h},{default:ve(()=>u[1]||(u[1]=[E("Home")])),_:1}),pe(I,{to:"/packages",class:"nav-link",onClick:h},{default:ve(()=>u[2]||(u[2]=[E("Packages")])),_:1}),pe(I,{to:"/gallery",class:"nav-link",onClick:h},{default:ve(()=>u[3]||(u[3]=[E("Gallery")])),_:1}),pe(I,{to:"/about-us",class:"nav-link",onClick:h},{default:ve(()=>u[4]||(u[4]=[E("About Us")])),_:1}),pe(I,{to:"/contact",class:"nav-link",onClick:h},{default:ve(()=>u[5]||(u[5]=[E("Contact")])),_:1})]),e("div",ls,[e("button",{class:"theme-toggle",onClick:u[0]||(u[0]=(...z)=>M(v)&&M(v)(...z)),title:M(w)()?"Switch to Light Mode":"Switch to Dark Mode"},[e("i",{class:L(M(w)()?"fas fa-moon":"fas fa-sun")},null,2)],8,is),a.value?(n(),d("div",{key:0,class:"user-menu",onClick:K,ref_key:"userMenuTrigger",ref:A},[e("img",{src:m.value,alt:$.value,class:"user-avatar"},null,8,rs),e("span",ds,r($.value),1),u[13]||(u[13]=e("i",{class:"fas fa-chevron-down"},null,-1)),O(e("div",{class:"user-dropdown",ref_key:"userMenu",ref:l},[e("div",us,[e("img",{src:m.value,alt:$.value,class:"dropdown-avatar"},null,8,cs),e("div",ps,[e("span",vs,r($.value),1),e("span",ms,r((F=a.value)==null?void 0:F.email),1)])]),u[11]||(u[11]=e("div",{class:"dropdown-divider"},null,-1)),pe(I,{to:"/profile",class:"dropdown-item",onClick:U},{default:ve(()=>u[6]||(u[6]=[e("i",{class:"fas fa-user"},null,-1),E(" Profile ")])),_:1}),pe(I,{to:"/bookings",class:"dropdown-item",onClick:U},{default:ve(()=>u[7]||(u[7]=[e("i",{class:"fas fa-calendar-alt"},null,-1),E(" My Bookings ")])),_:1}),f.value?(n(),d(te,{key:0},[u[9]||(u[9]=e("div",{class:"dropdown-divider"},null,-1)),pe(I,{to:"/admin/dashboard",class:"dropdown-item",onClick:U},{default:ve(()=>u[8]||(u[8]=[e("i",{class:"fas fa-tachometer-alt"},null,-1),E(" Dashboard ")])),_:1})],64)):N("",!0),u[12]||(u[12]=e("div",{class:"dropdown-divider"},null,-1)),e("button",{class:"dropdown-item logout",onClick:D},u[10]||(u[10]=[e("i",{class:"fas fa-sign-out-alt"},null,-1),E(" Logout ")]))],512),[[xt,C.value]])],512)):(n(),d(te,{key:1},[pe(I,{to:"/login",class:"auth-btn login",onClick:h},{default:ve(()=>u[14]||(u[14]=[E("Login")])),_:1}),pe(I,{to:"/register",class:"auth-btn register",onClick:h},{default:ve(()=>u[15]||(u[15]=[E("Register")])),_:1})],64))])],2)])],2))}}},gs=ne(fs,[["__scopeId","data-v-66eb4667"]]);const ys={class:"floating-chat-container"},bs={key:0,class:"unread-badge"},hs={__name:"FloatingChatButton",props:{unreadCount:{type:Number,default:0},isOpen:{type:Boolean,default:!1}},emits:["toggle-chat"],setup(S){return(s,c)=>(n(),d("div",ys,[e("button",{class:L(["floating-chat-button",{"has-unread":S.unreadCount>0}]),onClick:c[0]||(c[0]=t=>s.$emit("toggle-chat"))},[S.unreadCount>0?(n(),d("div",bs,r(S.unreadCount),1)):N("",!0),e("i",{class:L(S.isOpen?"fas fa-times":"fas fa-comments"),style:{"font-size":"24px"}},null,2)],2)]))}},ct=ne(hs,[["__scopeId","data-v-fbc452ff"]]);const ks={class:"chat-header"},_s={class:"header-info"},$s={class:"admin-avatar"},ws=["src"],Cs={class:"admin-info"},Ps={key:0,class:"empty-state"},As={class:"message-content"},Ts={class:"message-time"},Ss={class:"chat-input"},xs=["onKeydown"],Es=["disabled"],Is={__name:"ChatInterface",props:{isOpen:{type:Boolean,default:!1},currentUserId:{type:[Number,String],required:!0},adminAvatar:{type:String,default:"/src/assets/default-avatar.png"},isAdminOnline:{type:Boolean,default:!1}},emits:["close","send-message"],setup(S,{emit:s}){const c=S,t=s,i=g([]),v=g(""),w=g(null),k=g(null),_=l=>jt(new Date(l),"h:mm a"),b=async()=>{await qe(),w.value&&(w.value.scrollTop=w.value.scrollHeight)},C=()=>{v.value.trim()&&(t("send-message",{content:v.value,sender_id:c.currentUserId,created_at:new Date().toISOString()}),v.value="",b())};return Pe(()=>v.value,()=>{const l=k.value;l&&(l.style.height="auto",l.style.height=l.scrollHeight+"px")}),Pe(()=>c.isOpen,l=>{l&&qe(()=>{var f;(f=k.value)==null||f.focus(),b()})}),me(()=>{b()}),(l,f)=>(n(),d("div",{class:L(["chat-interface",{"is-open":S.isOpen}])},[e("div",ks,[e("div",_s,[e("div",$s,[e("img",{src:S.adminAvatar,alt:"Admin"},null,8,ws),e("span",{class:L(["status-dot",{online:S.isAdminOnline}])},null,2)]),e("div",Cs,[f[2]||(f[2]=e("h3",null,"Customer Support",-1)),e("p",null,r(S.isAdminOnline?"Online":"Offline"),1)])]),e("button",{class:"close-btn",onClick:f[0]||(f[0]=a=>l.$emit("close"))},f[3]||(f[3]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",{class:"chat-messages",ref_key:"messagesContainer",ref:w},[i.value.length===0?(n(),d("div",Ps,f[4]||(f[4]=[e("i",{class:"fas fa-comments"},null,-1),e("p",null,"Start a conversation with our support team",-1)]))):(n(!0),d(te,{key:1},ae(i.value,a=>(n(),d("div",{key:a.id,class:L(["message",{outgoing:a.sender_id===S.currentUserId,incoming:a.sender_id!==S.currentUserId}])},[e("div",As,[e("p",null,r(a.content),1),e("span",Ts,r(_(a.created_at)),1)])],2))),128))],512),e("div",Ss,[O(e("textarea",{"onUpdate:modelValue":f[1]||(f[1]=a=>v.value=a),placeholder:"Type your message...",onKeydown:it(ce(C,["prevent"]),["enter"]),rows:"1",ref_key:"messageInput",ref:k},null,40,xs),[[Y,v.value]]),e("button",{class:"send-btn",disabled:!v.value.trim(),onClick:C},f[5]||(f[5]=[e("i",{class:"fas fa-paper-plane"},null,-1)]),8,Es)])],2))}},Ds=ne(Is,[["__scopeId","data-v-96cbdff7"]]);const Ms={class:"app"},Ns={class:"main-content"},Fs={key:1,class:"chat-container"},Bs={__name:"App",setup(S){const s=Re(),c=ee(()=>!["login","register"].includes(s.name)),t=ee(()=>s.path.startsWith("/admin"));ee(()=>["login","register"].includes(s.name));const i=ee(()=>{try{const $=localStorage.getItem("auth_token"),T=JSON.parse(localStorage.getItem("user_info")||"{}");return!!($&&T&&T.id)}catch($){return console.error("Auth check error:",$),!1}}),v=ee(()=>{var $,T,h;try{const K=($=localStorage.getItem("user_role"))==null?void 0:$.toLowerCase(),U=JSON.parse(localStorage.getItem("user_info")||"{}");return console.log("User Role Check:",{userRole:K,userInfoRole:(T=U.role)==null?void 0:T.toLowerCase()}),K==="user"||((h=U.role)==null?void 0:h.toLowerCase())==="user"}catch(K){return console.error("Role check error:",K),!1}}),w=ee(()=>{const $=i.value,T=v.value,h=!t.value;return console.log("Chat Visibility Debug:",{isAuthenticated:$,isCustomer:T,notAdminRoute:h,token:!!localStorage.getItem("auth_token"),userInfo:localStorage.getItem("user_info"),currentRoute:s.path}),$&&T&&h}),k=g(!1),_=g(0),b=g([]),C=ut,A=g(!0),l=ee(()=>JSON.parse(localStorage.getItem("user_info")||"{}").id),f=()=>{k.value=!k.value,k.value&&(_.value=0)},a=g(null),m=async $=>{try{const T=localStorage.getItem("auth_token");if(!T)return;const h={id:Date.now(),content:$,sender_id:l.value,created_at:new Date().toISOString(),pending:!0};b.value.push(h);const K=await fetch("/api/chat/send",{method:"POST",headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:$,receiver_id:1})});if(K.ok){const U=await K.json(),D=b.value.findIndex(R=>R.id===h.id);D!==-1&&(b.value[D]={...U.message,pending:!1})}else b.value=b.value.filter(U=>U.id!==h.id),console.error("Failed to send message:",await K.text())}catch(T){console.error("Error sending message:",T)}};return me(async()=>{if(w.value)try{a.value=rt("http://localhost:3001",{auth:{token:localStorage.getItem("auth_token")}}),a.value.on("receive_message",h=>{b.value.push(h),k.value||_.value++}),a.value.on("admin_status",h=>{A.value=h.online}),a.value.on("connect_error",h=>{console.error("Socket connection error:",h)});const $=await fetch("/api/chat/messages",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Accept:"application/json"}});if($.ok){const h=await $.json();b.value=h.messages||[]}const T=await fetch("/api/chat/unread-count",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Accept:"application/json"}});if(T.ok){const h=await T.json();_.value=h.count||0}}catch($){console.error("Error initializing chat:",$)}}),je(()=>{a.value&&a.value.disconnect()}),($,T)=>{const h=ke("router-view");return n(),d("div",Ms,[T[0]||(T[0]=e("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"},null,-1)),c.value?(n(),de(gs,{key:0})):N("",!0),e("main",Ns,[pe(h,null,{default:ve(({Component:K})=>[pe(Et,{name:"page",mode:"out-in"},{default:ve(()=>[(n(),d("div",{key:$.$route.path},[(n(),de(zt(K)))]))]),_:2},1024)]),_:1})]),w.value?(n(),d("div",Fs,[pe(ct,{unreadCount:_.value,isOpen:k.value,onToggleChat:f},null,8,["unreadCount","isOpen"]),k.value?(n(),de(Ds,{key:0,isOpen:!0,currentUserId:l.value,messages:b.value,adminAvatar:M(C),isAdminOnline:A.value,onClose:f,onSendMessage:m},null,8,["currentUserId","messages","adminAvatar","isAdminOnline"])):N("",!0)])):N("",!0)])}}},Us="modulepreload",Rs=function(S){return"/"+S},$t={},Ls=function(s,c,t){if(!c||c.length===0)return s();const i=document.getElementsByTagName("link");return Promise.all(c.map(v=>{if(v=Rs(v),v in $t)return;$t[v]=!0;const w=v.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(!!t)for(let C=i.length-1;C>=0;C--){const A=i[C];if(A.href===v&&(!w||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${k}`))return;const b=document.createElement("link");if(b.rel=w?"stylesheet":Us,w||(b.as="script",b.crossOrigin=""),b.href=v,document.head.appendChild(b),w)return new Promise((C,A)=>{b.addEventListener("load",C),b.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${v}`)))})})).then(()=>s()).catch(v=>{const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=v,window.dispatchEvent(w),!w.defaultPrevented)throw v})},pt="/assets/logo2-da863cb0.png";const Os={class:"admin-sidebar"},Vs={class:"sidebar-header"},qs={class:"sidebar-nav"},js={key:0,class:"badge"},zs={class:"sidebar-footer"},Gs={class:"user-info"},Js=["src"],Ws={class:"user-name",style:{"text-transform":"capitalize"}},Qs={class:"user-role",style:{"text-transform":"capitalize"}},Hs={__name:"AdminSidebar",setup(S){const s=Re(),c=_e(),{logout:t}=ye(),i=JSON.parse(localStorage.getItem("user_info")),v=g(localStorage.getItem("token")),w=g({totalBookings:0}),k=async()=>{await t(),c.push("/login")},_=ee(()=>{const A=localStorage.getItem("user_role");return A==="admin"?[{name:"Dashboard",path:"/admin",icon:"fas fa-home"},{name:"Bookings",path:"/admin/bookings",icon:"fas fa-calendar-alt",badge:w.value.totalBookings},{name:"Archived",path:"/admin/archived-bookings",icon:"fas fa-calendar-alt",badge:w.value.totalArchivedBookings},{name:"Packages",path:"/admin/packages",icon:"fas fa-box"},{name:"User Management",path:"/admin/users",icon:"fas fa-users"},{name:"Portfolios",path:"/admin/portfolios",icon:"fas fa-images"},{name:"Reports",path:"/admin/reports",icon:"fas fa-chart-bar"},{name:"Chat",path:"/admin/chat",icon:"fas fa-comment"},{name:"Contact Us",path:"/admin/contact-us",icon:"fas fa-envelope"},{name:"Settings",path:"/admin/settings",icon:"fas fa-cog"}]:A==="staff"?[{name:"Dashboard",path:"/admin",icon:"fas fa-home"},{name:"Bookings",path:"/admin/bookings",icon:"fas fa-calendar-alt",badge:w.value.totalBookings},{name:"Reports",path:"/admin/reports",icon:"fas fa-chart-bar"}]:[]}),b=A=>s.path===A||A!=="/admin"&&s.path.startsWith(A+"/"),C=async()=>{try{const A=await oe.get("/api/get-all-bookings",{headers:{Authorization:`Bearer ${v.value}`}}),l=A.data.filter(f=>f.status.toLowerCase()!=="completed"&&f.status.toLowerCase()!=="cancelled");console.log("Total bookings:",A.data.length),console.log("Active bookings:",l.length),console.log("Filtered bookings:",l),w.value.totalBookings=l.length}catch(A){console.error("Error fetching bookings:",A),w.value.totalBookings=0}};return me(async()=>{await C(),setInterval(C,6e4)}),(A,l)=>{var a,m,$,T,h,K;const f=ke("router-link");return n(),d("aside",Os,[e("div",Vs,[e("h2",null,r(((a=M(i))==null?void 0:a.role)==="staff"?"Staff Panel":"Admin Panel"),1)]),e("nav",qs,[(n(!0),d(te,null,ae(_.value,U=>(n(),de(f,{key:U.path,to:U.path,class:L(["nav-item",{active:b(U.path)}])},{default:ve(()=>[e("i",{class:L(U.icon)},null,2),e("span",null,r(U.name),1),U.badge?(n(),d("span",js,r(U.badge),1)):N("",!0)]),_:2},1032,["to","class"]))),128)),pe(f,{to:"/admin/archived-bookings",class:"sidebar-item","active-class":"active"})]),e("div",zs,[e("div",Gs,[e("img",{src:($=(m=M(i))==null?void 0:m.avatar)!=null&&$.startsWith("images/")?`/src/assets/${M(i).avatar}`:`http://127.0.0.1:8000/storage/${M(i).avatar}`,alt:"User"},null,8,Js),e("div",null,[e("p",Ws,r((T=M(i))==null?void 0:T.last_name)+", "+r((h=M(i))==null?void 0:h.first_name),1),e("p",Qs,r(((K=M(i))==null?void 0:K.role)||"Administrator"),1)])]),e("button",{onClick:k,class:"logout-btn"},l[0]||(l[0]=[e("i",{class:"fas fa-sign-out-alt"},null,-1),E(" Logout ")]))])])}}},vt=ne(Hs,[["__scopeId","data-v-47665fea"]]);const Ys={class:"admin-layout"},Zs={class:"admin-container"},Ks={class:"admin-content"},Xs={__name:"AdminLayout",setup(S){return ee(()=>{const s=JSON.parse(localStorage.getItem("user_info"));return(s==null?void 0:s.avatar)||"/default-avatar.png"}),(s,c)=>{const t=ke("router-view");return n(),d("div",Ys,[c[0]||(c[0]=e("nav",{class:"admin-navbar"},[e("div",{class:"navbar-brand"},[e("img",{src:pt,alt:"Razz Rell Events"})])],-1)),e("div",Zs,[pe(vt),e("main",Ks,[pe(t)])])])}}},ea=ne(Xs,[["__scopeId","data-v-76e0cf61"]]),ta="/assets/Cristening-7a5a4de5.jpg",sa=Object.freeze(Object.defineProperty({__proto__:null,default:ta},Symbol.toStringTag,{value:"Module"})),aa="/assets/herobck-9ef08214.png",oa=Object.freeze(Object.defineProperty({__proto__:null,default:aa},Symbol.toStringTag,{value:"Module"})),na="/assets/vanda dbut1-e24723ea.jpg",la=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"})),ia="/assets/vanda margraf-047595a0.jpg",ra=Object.freeze(Object.defineProperty({__proto__:null,default:ia},Symbol.toStringTag,{value:"Module"}));const da={class:"slideshow-container"},ua=["src","alt"],ca={class:"slideshow-dots"},pa=["onClick"],va={__name:"HeroSlideshow",props:{slides:{type:Array,required:!0}},setup(S){const s=S,c=g(0);let t=null;const i=()=>{v(),t=setInterval(()=>{c.value=(c.value+1)%s.slides.length},5e3)},v=()=>{t&&(clearInterval(t),t=null)},w=()=>{c.value=(c.value+1)%s.slides.length,i()},k=()=>{c.value=c.value===0?s.slides.length-1:c.value-1,i()},_=b=>{c.value=b,i()};return me(()=>{i()}),It(()=>{v()}),(b,C)=>(n(),d("div",da,[(n(!0),d(te,null,ae(S.slides,(A,l)=>(n(),d("div",{key:l,class:L(["slide",{active:c.value===l}])},[e("img",{src:A.image,alt:A.title},null,8,ua)],2))),128)),e("div",{class:"slideshow-navigation"},[e("button",{class:"nav-btn prev",onClick:k},C[0]||(C[0]=[e("i",{class:"fas fa-chevron-left"},null,-1)])),e("button",{class:"nav-btn next",onClick:w},C[1]||(C[1]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))]),e("div",ca,[(n(!0),d(te,null,ae(S.slides,(A,l)=>(n(),d("button",{key:l,class:L(["dot",{active:c.value===l}]),onClick:f=>_(l)},null,10,pa))),128))])]))}},ma=ne(va,[["__scopeId","data-v-282fd0c9"]]);const fa={class:"landing-page"},ga={class:"hero"},ya={class:"hero-content"},ba={class:"hero-actions"},ha={class:"hero-image"},ka={class:"services"},_a={class:"services-grid"},$a=["onMouseenter"],wa={class:"service-icon"},Ca={class:"features"},Pa={class:"features-content"},Aa={class:"features-grid"},Ta={class:"feature-icon"},Sa={class:"gallery"},xa={class:"gallery-grid"},Ea=["onClick"],Ia=["src","alt"],Da={class:"gallery-overlay"},Ma={class:"stats"},Na={class:"stats-grid"},Fa={class:"stat-value"},Ba={class:"counter"},Ua={class:"suffix"},Ra={class:"stat-label"},La={class:"cta"},Oa={class:"cta-content"},Va={class:"cta-actions"},qa=["src","alt"],ja={class:"gallery-modal-info"},wt="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNFNUU3RUIiLz48cGF0aCBkPSJNODAgOTBIMTIwVjExMEg4MFY5MFoiIGZpbGw9IiM5Q0EzQUYiLz48cGF0aCBkPSJNNjUgNjBIMTM1VjgwSDY1VjYwWiIgZmlsbD0iIzlDQTNBRiIvPjwvc3ZnPg==",za={__name:"LandingPage",setup(S){const s=g(!1),c=g(null),t=g(0),i=g([]),v=g(0),w=g(0),k=g(null);let _;const b=g(0);let C;ye();const A=[{id:1,title:"Weddings",description:"Create your perfect wedding day with our comprehensive planning services.",icon:"fas fa-heart"},{id:2,title:"Debuts",description:"Make your debut celebration an unforgettable milestone with our expert planning.",icon:"fas fa-star"},{id:3,title:"Christenings",description:"Plan a beautiful and meaningful christening ceremony for your little one.",icon:"fas fa-baby"},{id:4,title:"Party",description:"Create magical and fun-filled celebrations for any occasion.",icon:"fas fa-birthday-cake"}],l=[{id:1,title:"Expert Planning",description:"Our experienced team ensures every detail is perfect.",icon:"fas fa-clipboard-check"},{id:2,title:"Custom Packages",description:"Tailored solutions to match your vision and budget.",icon:"fas fa-box-open"},{id:3,title:"24/7 Support",description:"Always available to assist you throughout the process.",icon:"fas fa-headset"},{id:4,title:"Quality Service",description:"Premium vendors and top-notch execution.",icon:"fas fa-award"}],f=[{id:1,text:"Working with Razz Rell Events was the best decision we made for our wedding. Their attention to detail and professionalism made our day perfect!",name:"Sarah Johnson",role:"Bride",avatar:"@/assets/testimonials/sarah.jpg"},{id:2,text:"The team went above and beyond for our corporate event. The planning was seamless, and our clients were thoroughly impressed.",name:"Jerad",role:"Marketing Director",avatar:"@/assets/testimonials/jerad.jpg"},{id:3,text:"From concept to execution, they nailed every aspect of our themed party. Highly recommended for any special occasion!",name:"Emily Rodriguez",role:"Client",avatar:"@/assets/testimonials/emily.jpg"}],a=[{id:1,value:w,suffix:"+",label:"Events Completed"},{id:2,value:"98",suffix:"%",label:"Client Satisfaction"},{id:3,value:"15",suffix:"+",label:"Years Experience"},{id:4,value:v,suffix:"+",label:"Team Members"}],m=g([]),$=async()=>{const y=Object.assign({"/src/assets/Heroimage/Cristening.jpg":sa,"/src/assets/Heroimage/herobck.png":oa,"/src/assets/Heroimage/vanda dbut1.jpg":la,"/src/assets/Heroimage/vanda margraf.jpg":ra});m.value=Object.entries(y).map(([u,I])=>{const z=u.split("/").pop().split(".")[0].replace(/([A-Z])/g," $1").replace(/-/g," ").trim();return{image:I.default,title:z}})},T=y=>{k.value=i.value.find(u=>u.id===y)},h=()=>{k.value=null},K=y=>{if(console.log("Raw image path:",y),!y)return console.log("No image path, using default"),wt;if(y.startsWith("http"))return console.log("Direct URL detected:",y),y;const u=`/storage/${y}`;return console.log("Constructed URL:",u),u},U=async()=>{try{const y=await oe.get("/api/get-all-portfolios");i.value=y.data,console.log("Fetched portfolios:",i.value),i.value.length>0&&(console.log("First portfolio:",i.value[0]),console.log("First portfolio main image:",i.value[0].main_image_url))}catch(y){console.error("Error fetching portfolios:",y)}},D=async()=>{const u=(await oe.get("/api/get-all-users")).data.filter(I=>I.role==="admin"||I.role==="staff").map(I=>I.id);v.value=u.length},R=async()=>{const u=(await oe.get("/api/get-all-bookings")).data.filter(I=>I.status==="completed").map(I=>I.id);w.value=u.length};me(async()=>{await $(),await U(),await D(),await R(),C&&clearInterval(C),_&&clearInterval(_),C=setInterval(()=>{b.value=(b.value+1)%m.value.length},3e3),_=setInterval(()=>{t.value<f.length-1?t.value++:t.value=0},5e3)}),It(()=>{clearInterval(_),C&&clearInterval(C)});const x=y=>{console.error("Image failed to load:",y.target.src),y.target.src=wt};return(y,u)=>{const I=ke("router-link");return n(),d("div",fa,[e("section",ga,[e("div",ya,[u[8]||(u[8]=e("h1",{class:"hero-title"},[E(" Create Unforgettables "),e("span",{class:"highlight"},"Events")],-1)),u[9]||(u[9]=e("p",{class:"hero-subtitle"}," Transform your special moments into extraordinary memories with our professional event planning services ",-1)),e("div",ba,[pe(I,{to:"/packages",class:"cta-button"},{default:ve(()=>u[6]||(u[6]=[E(" Book Now "),e("i",{class:"fas fa-arrow-right"},null,-1)])),_:1}),e("button",{class:"video-button",onClick:u[0]||(u[0]=F=>s.value=!0)},u[7]||(u[7]=[e("i",{class:"fas fa-play"},null,-1),E(" Watch Video ")]))])]),e("div",ha,[pe(ma,{slides:m.value},null,8,["slides"])])]),e("section",ka,[u[10]||(u[10]=e("h2",{class:"section-title"},"Our Services",-1)),e("div",_a,[(n(),d(te,null,ae(A,F=>e("div",{key:F.id,class:L(["service-card",{active:c.value===F.id}]),onMouseenter:z=>c.value=F.id,onMouseleave:u[1]||(u[1]=z=>c.value=null)},[e("div",wa,[e("i",{class:L(F.icon)},null,2)]),e("h3",null,r(F.title),1),e("p",null,r(F.description),1)],42,$a)),64))])]),e("section",Ca,[e("div",Pa,[u[11]||(u[11]=e("h2",{class:"section-title"},"Why Choose Us",-1)),e("div",Aa,[(n(),d(te,null,ae(l,F=>e("div",{key:F.id,class:"feature-item"},[e("div",Ta,[e("i",{class:L(F.icon)},null,2)]),e("h3",null,r(F.title),1),e("p",null,r(F.description),1)])),64))])])]),e("section",Sa,[u[13]||(u[13]=e("h2",{class:"section-title"},"Our Portfolios",-1)),e("div",xa,[(n(!0),d(te,null,ae(i.value.slice(0,3),F=>(n(),d("div",{key:F.id,class:"gallery-item",onClick:z=>T(F.id)},[e("img",{src:K(F.main_image_url),alt:F.title,onError:x},null,40,Ia),e("div",Da,[e("h4",null,r(F.title),1),e("p",null,r(F.description),1)])],8,Ea))),128)),pe(I,{to:"/gallery",class:"view-all-projects"},{default:ve(()=>u[12]||(u[12]=[E(" View All Projects "),e("i",{class:"fas fa-arrow-right"},null,-1)])),_:1})])]),e("section",Ma,[e("div",Na,[(n(),d(te,null,ae(a,F=>e("div",{key:F.id,class:"stat-item"},[e("div",Fa,[e("span",Ba,r(F.value),1),e("span",Ua,r(F.suffix),1)]),e("p",Ra,r(F.label),1)])),64))])]),e("section",La,[e("div",Oa,[u[15]||(u[15]=e("h2",null,"Ready to Create Your Dream Event?",-1)),u[16]||(u[16]=e("p",null,"Let's work together to make your vision a reality",-1)),e("div",Va,[pe(I,{to:"/contact",class:"contact-button"},{default:ve(()=>u[14]||(u[14]=[E(" Contact Us "),e("i",{class:"fas fa-envelope"},null,-1)])),_:1})])])]),s.value?(n(),d("div",{key:0,class:"video-modal",onClick:u[4]||(u[4]=F=>s.value=!1)},[e("div",{class:"video-container",onClick:u[3]||(u[3]=ce(()=>{},["stop"]))},[e("button",{class:"close-video",onClick:u[2]||(u[2]=F=>s.value=!1)},u[17]||(u[17]=[e("i",{class:"fas fa-times"},null,-1)])),u[18]||(u[18]=e("iframe",{src:"https://www.youtube.com/embed/VIDEO_ID",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,-1))])])):N("",!0),k.value?(n(),d("div",{key:1,class:"gallery-modal",onClick:h},[e("div",{class:"gallery-modal-content",onClick:u[5]||(u[5]=ce(()=>{},["stop"]))},[e("button",{class:"close-gallery",onClick:h},u[19]||(u[19]=[e("i",{class:"fas fa-times"},null,-1)])),e("img",{src:K(k.value.main_image_url),alt:k.value.title},null,8,qa),e("div",ja,[e("h3",null,r(k.value.title),1),e("p",null,r(k.value.description),1)])])])):N("",!0)])}}},Ga=ne(za,[["__scopeId","data-v-9a0677f2"]]);const Ja={class:"services-page"},Wa={class:"services-overview"},Qa={class:"service-categories"},Ha=["onClick"],Ya={class:"services-grid"},Za={class:"service-image"},Ka=["src","alt"],Xa={key:0,class:"featured-badge"},eo={class:"service-content"},to={class:"service-description"},so={class:"service-features"},ao={class:"service-price"},oo={class:"price-info"},no={class:"price"},lo={class:"unit"},io={class:"additional-services"},ro={class:"addons-grid"},uo={class:"addon-icon"},co={class:"addon-price"},po={class:"process-section"},vo={class:"process-steps"},mo={class:"step-number"},fo={class:"step-content"},go={class:"faq-section"},yo={class:"faq-grid"},bo=["onClick"],ho={class:"faq-header"},ko={class:"services-cta"},_o={class:"cta-content"},$o={class:"cta-buttons"},wo={__name:"ServicesPage",setup(S){const s=g("all"),c=g(null),t=[{id:"all",name:"All Services",icon:"fas fa-th-large"},{id:"wedding",name:"Weddings",icon:"fas fa-rings"},{id:"corporate",name:"Corporate",icon:"fas fa-briefcase"},{id:"social",name:"Social Events",icon:"fas fa-glass-cheers"},{id:"themed",name:"Themed Parties",icon:"fas fa-hat-wizard"}],i=[{id:1,category:"wedding",name:"Classic Wedding Package",description:"A comprehensive wedding planning service for your special day.",image:"/src/assets/wedding.png",price:15e4,unit:"per event",featured:!0,features:["Full wedding planning and coordination","Venue selection and booking","Vendor management","Timeline planning","Day-of coordination","Setup and breakdown"]},{id:2,category:"corporate",name:"Corporate Event Package",description:"Professional event planning for your business needs.",image:"/src/assets/contentimage.png",price:1e5,unit:"per event",featured:!1,features:["Venue selection and setup","Audio/visual equipment","Catering coordination","Registration management","On-site coordination","Post-event reporting"]},{id:3,category:"social",name:"Birthday Celebration Package",description:"Make your birthday celebration unforgettable.",image:"/src/assets/kiddie.png",price:75e3,unit:"per event",featured:!1,features:["Theme development","Venue decoration","Entertainment booking","Catering services","Photography/videography","Guest management"]},{id:4,category:"themed",name:"Themed Party Package",description:"Create a unique themed event experience.",image:"/src/assets/debut.png",price:85e3,unit:"per event",featured:!1,features:["Custom theme design","Themed decorations","Costume coordination","Themed entertainment","Specialty catering","Photo opportunities"]}],v=[{id:1,name:"Photography",description:"Professional photography services to capture your special moments.",icon:"fas fa-camera",price:25e3},{id:2,name:"Videography",description:"Cinematic video coverage of your event.",icon:"fas fa-video",price:35e3},{id:3,name:"Live Band",description:"Live music entertainment for your event.",icon:"fas fa-music",price:3e4},{id:4,name:"Photo Booth",description:"Fun photo booth with props and instant prints.",icon:"fas fa-camera-retro",price:15e3}],w=[{id:1,title:"Initial Consultation",description:"We meet to discuss your vision, preferences, and requirements."},{id:2,title:"Proposal & Planning",description:"We create a detailed proposal and timeline based on your needs."},{id:3,title:"Vendor Selection",description:"We help you choose and coordinate with the best vendors."},{id:4,title:"Event Execution",description:"We ensure everything runs smoothly on your special day."}],k=[{id:1,question:"How far in advance should I book your services?",answer:"We recommend booking at least 6-8 months in advance for weddings and 3-4 months for other events to ensure availability and adequate planning time."},{id:2,question:"What is your payment policy?",answer:"We require a 50% deposit to secure your date, with the remaining balance due 2 weeks before the event."},{id:3,question:"Can you work with my budget?",answer:"Yes, we offer customizable packages and can work with you to create a plan that fits your budget while maintaining quality."},{id:4,question:"Do you handle destination events?",answer:"Yes, we can plan and coordinate events throughout the Philippines and internationally."}],_=ee(()=>s.value==="all"?i:i.filter(A=>A.category===s.value)),b=A=>A.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),C=A=>{c.value=c.value===A?null:A};return(A,l)=>{const f=ke("router-link");return n(),d("div",Ja,[l[13]||(l[13]=e("section",{class:"services-hero"},[e("div",{class:"hero-content"},[e("h1",null,"Our Services"),e("p",null,"Discover our comprehensive event planning services tailored to your needs")])],-1)),e("section",Wa,[e("div",Qa,[(n(),d(te,null,ae(t,a=>e("button",{key:a.id,class:L(["category-btn",{active:s.value===a.id}]),onClick:m=>s.value=a.id},[e("i",{class:L(a.icon)},null,2),E(" "+r(a.name),1)],10,Ha)),64))]),e("div",Ya,[(n(!0),d(te,null,ae(_.value,a=>(n(),d("div",{key:a.id,class:L(["service-card",{featured:a.featured}])},[e("div",Za,[e("img",{src:a.image,alt:a.name},null,8,Ka),a.featured?(n(),d("div",Xa,l[0]||(l[0]=[e("i",{class:"fas fa-star"},null,-1),E(" Popular Choice ")]))):N("",!0)]),e("div",eo,[e("h3",null,r(a.name),1),e("p",to,r(a.description),1),e("div",so,[l[2]||(l[2]=e("h4",null,"What's Included:",-1)),e("ul",null,[(n(!0),d(te,null,ae(a.features,m=>(n(),d("li",{key:m},[l[1]||(l[1]=e("i",{class:"fas fa-check"},null,-1)),E(" "+r(m),1)]))),128))])]),e("div",ao,[e("div",oo,[e("span",no,"₱"+r(b(a.price)),1),e("span",lo,r(a.unit),1)]),pe(f,{to:"/book?service="+a.id,class:"book-btn"},{default:ve(()=>l[3]||(l[3]=[E(" Book Now "),e("i",{class:"fas fa-arrow-right"},null,-1)])),_:2},1032,["to"])])])],2))),128))])]),e("section",io,[l[4]||(l[4]=e("h2",null,"Additional Services",-1)),l[5]||(l[5]=e("p",null,"Enhance your event with our premium add-ons",-1)),e("div",ro,[(n(),d(te,null,ae(v,a=>e("div",{key:a.id,class:"addon-card"},[e("div",uo,[e("i",{class:L(a.icon)},null,2)]),e("h3",null,r(a.name),1),e("p",null,r(a.description),1),e("div",co," From ₱"+r(b(a.price)),1)])),64))])]),e("section",po,[l[6]||(l[6]=e("h2",null,"How It Works",-1)),l[7]||(l[7]=e("p",null,"Our simple process to create your perfect event",-1)),e("div",vo,[(n(),d(te,null,ae(w,a=>e("div",{key:a.id,class:"process-step"},[e("div",mo,r(a.id),1),e("div",fo,[e("h3",null,r(a.title),1),e("p",null,r(a.description),1)])])),64))])]),e("section",go,[l[8]||(l[8]=e("h2",null,"Frequently Asked Questions",-1)),e("div",yo,[(n(),d(te,null,ae(k,a=>e("div",{key:a.id,class:L(["faq-item",{active:c.value===a.id}]),onClick:m=>C(a.id)},[e("div",ho,[e("h3",null,r(a.question),1),e("i",{class:L(["fas",c.value===a.id?"fa-minus":"fa-plus"])},null,2)]),O(e("div",{class:"faq-answer"},r(a.answer),513),[[xt,c.value===a.id]])],10,bo)),64))])]),e("section",ko,[e("div",_o,[l[11]||(l[11]=e("h2",null,"Ready to Start Planning?",-1)),l[12]||(l[12]=e("p",null,"Let's create an unforgettable event together",-1)),e("div",$o,[pe(f,{to:"/book",class:"cta-primary"},{default:ve(()=>l[9]||(l[9]=[E(" Book Now "),e("i",{class:"fas fa-arrow-right"},null,-1)])),_:1}),pe(f,{to:"/contact",class:"cta-secondary"},{default:ve(()=>l[10]||(l[10]=[E(" Contact Us "),e("i",{class:"fas fa-envelope"},null,-1)])),_:1})])])])])}}},Co=ne(wo,[["__scopeId","data-v-0da67ffd"]]);const Po={class:"gallery-page"},Ao={class:"filter-section"},To={class:"filter-controls"},So={class:"category-filters"},xo=["onClick"],Eo={key:0,class:"custom-events-dropdown"},Io={key:0,class:"custom-events-menu"},Do=["onClick"],Mo={class:"view-controls"},No={key:0,class:"loading-state"},Fo=["onClick"],Bo={class:"item-thumbnail"},Uo=["src","alt"],Ro={class:"item-overlay"},Lo={class:"overlay-content"},Oo={class:"item-meta"},Vo={class:"event-date"},qo={key:0,class:"event-category"},jo={key:0,class:"album-badge"},zo={class:"lightbox-content"},Go={class:"lightbox-header"},Jo={class:"lightbox-gallery"},Wo={class:"main-image"},Qo=["src","alt"],Ho={key:0,class:"thumbnails"},Yo=["onClick"],Zo=["src","alt"],Ko={class:"lightbox-info"},Xo={class:"description"},en={class:"meta-info"},tn={class:"date"},sn={key:0,class:"event-type"},an={__name:"GalleryPage",setup(S){const s=g("grid"),c=g("all"),t=g(null),i=g(0),v=g([]),w=g(!1),k=g(!1),_=g([]),b=g([{label:"All Events",value:"all",icon:"fas fa-globe"},{label:"Wedding",value:"Wedding",icon:"fas fa-heart"},{label:"Debut",value:"Debut",icon:"fas fa-star"},{label:"Christening",value:"Christening",icon:"fas fa-baby"},{label:"Party",value:"Party",icon:"fas fa-birthday-cake"}]),C=F=>F?F.startsWith("http")?F:`/storage/${F}`:"",A=ee(()=>c.value==="all"?v.value:v.value.filter(F=>F.event_type===c.value)),l=ee(()=>{var F;return((F=t.value)==null?void 0:F.images_url)&&Array.isArray(t.value.images_url)&&t.value.images_url.length>0}),f=ee(()=>{if(!t.value)return[];const F=t.value.main_image_url,z=t.value.images_url||[];return[F,...z]}),a=ee(()=>f.value.length?f.value[i.value]:""),m=ee(()=>i.value>0),$=ee(()=>i.value<f.value.length-1),T=()=>{k.value=!k.value},h=async()=>{w.value=!0;try{const F=await oe.get("/api/get-all-portfolios");v.value=F.data.map(B=>({...B,images_url:Array.isArray(B.images_url)?B.images_url:[]}));const z=b.value.map(B=>B.value),V=new Set;v.value.forEach(B=>{!z.includes(B.event_type)&&B.event_type!=="all"&&V.add(B.event_type)}),_.value=Array.from(V)}catch(F){console.error("Error fetching portfolios:",F)}finally{w.value=!1}},K=F=>{c.value=F},U=F=>{t.value=F,i.value=0,document.body.style.overflow="hidden"},D=()=>{t.value=null,i.value=0,document.body.style.overflow=""},R=F=>{i.value=F},x=()=>{m.value&&i.value--},y=()=>{$.value&&i.value++},u=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),I=F=>F.charAt(0).toUpperCase()+F.slice(1);return me(()=>{document.addEventListener("click",F=>{const z=document.querySelector(".custom-events-dropdown");z&&!z.contains(F.target)&&(k.value=!1)}),h()}),(F,z)=>(n(),d("div",Po,[z[15]||(z[15]=e("header",{class:"gallery-header"},[e("div",{class:"header-content"},[e("h1",null,"Our Portfolio"),e("p",null,"Browse through our collection of memorable events"),e("div",{class:"header-decoration"})])],-1)),e("div",Ao,[e("div",To,[e("div",So,[(n(!0),d(te,null,ae(b.value,V=>(n(),d("button",{key:V.value,class:L(["filter-btn",{active:c.value===V.value}]),onClick:B=>K(V.value)},[e("i",{class:L(V.icon)},null,2),E(" "+r(V.label),1)],10,xo))),128)),_.value.length>0?(n(),d("div",Eo,[e("button",{class:"filter-btn custom-events-btn",onClick:T},z[2]||(z[2]=[e("i",{class:"fas fa-ellipsis-h"},null,-1),E(" Custom Events ")])),k.value?(n(),d("div",Io,[(n(!0),d(te,null,ae(_.value,V=>(n(),d("button",{key:V,class:L(["custom-event-btn",{active:c.value===V}]),onClick:B=>K(V)},[z[3]||(z[3]=e("i",{class:"fas fa-calendar-alt"},null,-1)),E(" "+r(V),1)],10,Do))),128))])):N("",!0)])):N("",!0)])]),e("div",Mo,[e("button",{class:L(["view-btn",{active:s.value==="grid"}]),onClick:z[0]||(z[0]=V=>s.value="grid")},z[4]||(z[4]=[e("i",{class:"fas fa-th"},null,-1),E(" Grid ")]),2),e("button",{class:L(["view-btn",{active:s.value==="masonry"}]),onClick:z[1]||(z[1]=V=>s.value="masonry")},z[5]||(z[5]=[e("i",{class:"fas fa-columns"},null,-1),E(" Masonry ")]),2)])]),w.value?(n(),d("div",No,z[6]||(z[6]=[e("div",{class:"loader"},null,-1),e("p",null,"Loading amazing moments...",-1)]))):(n(),d("div",{key:1,class:L(["gallery-container",{"masonry-layout":s.value==="masonry"}])},[(n(!0),d(te,null,ae(A.value,V=>(n(),d("div",{key:V.id,class:L(["gallery-item",{"has-album":V.images_url&&Array.isArray(V.images_url)&&V.images_url.length>0}]),onClick:B=>U(V)},[e("div",Bo,[e("img",{src:C(V.main_image_url),alt:V.title,loading:"lazy"},null,8,Uo),e("div",Ro,[e("div",Lo,[e("h3",null,r(V.title),1),e("p",null,r(V.description),1),e("div",Oo,[e("span",Vo,[z[7]||(z[7]=e("i",{class:"fas fa-calendar"},null,-1)),E(" "+r(u(V.created_at)),1)]),V.event_type?(n(),d("span",qo,[z[8]||(z[8]=e("i",{class:"fas fa-tag"},null,-1)),E(" "+r(I(V.event_type)),1)])):N("",!0)])]),V.images_url&&Array.isArray(V.images_url)&&V.images_url.length>0?(n(),d("span",jo,[z[9]||(z[9]=e("i",{class:"fas fa-images"},null,-1)),E(" "+r(V.images_url.length)+" Photos ",1)])):N("",!0)])])],10,Fo))),128))],2)),t.value?(n(),d("div",{key:2,class:"lightbox",onClick:ce(D,["self"])},[e("div",zo,[e("div",Go,[e("h2",null,r(t.value.title),1),e("button",{class:"close-btn",onClick:D},z[10]||(z[10]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Jo,[e("div",Wo,[a.value?(n(),d("img",{key:0,src:C(a.value),alt:t.value.title},null,8,Qo)):N("",!0)]),l.value?(n(),d("div",Ho,[(n(!0),d(te,null,ae(f.value,(V,B)=>(n(),d("div",{key:B,class:L(["thumbnail",{active:i.value===B}]),onClick:J=>R(B)},[e("img",{src:C(V),alt:t.value.title},null,8,Zo)],10,Yo))),128))])):N("",!0)]),e("div",Ko,[e("p",Xo,r(t.value.description),1),e("div",en,[e("span",tn,[z[11]||(z[11]=e("i",{class:"fas fa-calendar"},null,-1)),E(" "+r(u(t.value.created_at)),1)]),t.value.event_type?(n(),d("span",sn,[z[12]||(z[12]=e("i",{class:"fas fa-tag"},null,-1)),E(" "+r(I(t.value.event_type)),1)])):N("",!0)])]),m.value?(n(),d("button",{key:0,class:"nav-btn prev",onClick:x},z[13]||(z[13]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))):N("",!0),$.value?(n(),d("button",{key:1,class:"nav-btn next",onClick:y},z[14]||(z[14]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))):N("",!0)])])):N("",!0)]))}},on=ne(an,[["__scopeId","data-v-37144fcb"]]);function Ye(S={}){const s=g({...S}),c=g({}),t=g({}),i={required:a=>Array.isArray(a)?a.length>0||"This field is required":!!a||"This field is required",email:a=>a?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(a)||"Invalid email address":!0,minLength:a=>m=>m?m.length>=a||`Must be at least ${a} characters`:!0,maxLength:a=>m=>m?m.length<=a||`Must be at most ${a} characters`:!0,matches:(a,m)=>$=>$?a.test($)||m:!0,min:a=>m=>m?Number(m)>=a||`Must be at least ${a}`:!0,max:a=>m=>m?Number(m)<=a||`Must be at most ${a}`:!0,phone:a=>a?/^[0-9]{11}$/.test(a)||"Phone number must be exactly 11 digits":!0,password:a=>{if(!a)return!0;const m=/[A-Z]/.test(a),$=/[a-z]/.test(a),T=/\d/.test(a),h=/[!@#$%^&*(),.?":{}|<>]/.test(a);return m?$?T?h?!0:"Password must contain at least one special character":"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter"},confirmPassword:a=>m=>m?m===a||a:!0,url:a=>{if(!a)return!0;try{return new URL(a),!0}catch{return"Invalid URL"}},date:a=>{if(!a)return!0;const m=new Date(a);return!isNaN(m.getTime())||"Invalid date"},futureDate:a=>a?new Date(a)>new Date||"Date must be in the future":!0,pastDate:a=>a?new Date(a)<new Date||"Date must be in the past":!0},v=(a,m)=>{if(!m)return!0;for(const $ of m){const T=s.value[a];let h;if(typeof $=="string")h=i[$];else if(typeof $=="function")h=$;else if(Array.isArray($)){const[U,...D]=$;h=i[U](...D)}if(!h)continue;const K=h(T);if(K!==!0)return c.value[a]=K,!1}return delete c.value[a],!0},w=a=>{let m=!0;for(const[$,T]of Object.entries(a))v($,T)||(m=!1);return m},k=a=>{t.value[a]=!0},_=()=>{s.value={...S},c.value={},t.value={}},b=(a,m)=>{s.value[a]=m},C=(a,m)=>{c.value[a]=m},A=a=>{delete c.value[a]},l=ee(()=>Object.keys(c.value).length===0);return{values:s,errors:c,touched:t,rules:i,validate:v,validateAll:w,handleBlur:k,resetForm:_,setFieldValue:b,setFieldError:C,clearFieldError:A,isValid:l,getFieldError:a=>t.value[a]?c.value[a]:""}}const Ge=g([]);function we(){const S=k=>{const _=Date.now();return Ge.value.push({id:_,...k,timestamp:new Date}),setTimeout(()=>{s(_)},k.duration||5e3),_},s=k=>{const _=Ge.value.findIndex(b=>b.id===k);_!==-1&&Ge.value.splice(_,1)};return{notifications:Ge,addNotification:S,removeNotification:s,success:(k,_={})=>S({type:"success",message:k,..._}),error:(k,_={})=>S({type:"error",message:k,duration:7e3,..._}),warning:(k,_={})=>S({type:"warning",message:k,..._}),info:(k,_={})=>S({type:"info",message:k,..._}),clearAll:()=>{Ge.value=[]}}}const Ke=g(new Map),Xe=g(!1);function Le(){const S=(i="global")=>{i==="global"?Xe.value=!0:Ke.value.set(i,!0)},s=(i="global")=>{i==="global"?Xe.value=!1:Ke.value.delete(i)};return{startLoading:S,stopLoading:s,isLoading:(i="global")=>i==="global"?Xe.value:Ke.value.has(i),withLoading:async(i,v)=>{try{return S(i),await v()}finally{s(i)}},globalLoading:Xe,loadingStates:Ke}}const nn="http://localhost:3000/api";function xe(){const{token:S}=ye(),{error:s}=we(),{withLoading:c}=Le(),t=async a=>{const m=await a.json();if(!a.ok){const $=m.message||"An error occurred";throw s($),new Error($)}return m},i=async(a,m={})=>{const $=`${nn}${a}`,T={"Content-Type":"application/json",...S.value?{Authorization:`Bearer ${S.value}`}:{},...m.headers};try{const h=await fetch($,{...m,headers:T});return await t(h)}catch(h){throw s(h.message),h}},v=(a,m={})=>i(a,{method:"GET",...m}),w=(a,m,$={})=>i(a,{method:"POST",body:JSON.stringify(m),...$}),k=(a,m,$={})=>i(a,{method:"PUT",body:JSON.stringify(m),...$}),_=(a,m={})=>i(a,{method:"DELETE",...m});return{request:i,get:v,post:w,put:k,del:_,bookings:{getAll:(a={})=>c("bookings",()=>v("/bookings",{params:a})),getById:a=>c(`booking-${a}`,()=>v(`/bookings/${a}`)),create:a=>c("create-booking",()=>w("/bookings",a)),update:(a,m)=>c(`update-booking-${a}`,()=>k(`/bookings/${a}`,m)),delete:a=>c(`delete-booking-${a}`,()=>_(`/bookings/${a}`)),updateStatus:(a,m)=>c(`update-booking-status-${a}`,()=>k(`/bookings/${a}/status`,{status:m}))},packages:{getAll:()=>c("packages",()=>v("/packages")),getById:a=>c(`package-${a}`,()=>v(`/packages/${a}`)),create:a=>c("create-package",()=>w("/packages",a)),update:(a,m)=>c(`update-package-${a}`,()=>k(`/packages/${a}`,m)),delete:a=>c(`delete-package-${a}`,()=>_(`/packages/${a}`))},users:{getAll:()=>c("users",()=>v("/users")),getById:a=>c(`user-${a}`,()=>v(`/users/${a}`)),create:a=>c("create-user",()=>w("/users",a)),update:(a,m)=>c(`update-user-${a}`,()=>k(`/users/${a}`,m)),delete:a=>c(`delete-user-${a}`,()=>_(`/users/${a}`)),updateRole:(a,m)=>c(`update-user-role-${a}`,()=>k(`/users/${a}/role`,{role:m}))},settings:{get:()=>c("settings",()=>v("/settings")),update:a=>c("update-settings",()=>k("/settings",a)),testEmail:a=>c("test-email",()=>w("/settings/test-email",a))},reports:{getBookings:a=>c("bookings-report",()=>v("/reports/bookings",{params:a})),getRevenue:a=>c("revenue-report",()=>v("/reports/revenue",{params:a})),getPopularPackages:a=>c("popular-packages-report",()=>v("/reports/popular-packages",{params:a})),getUserActivity:a=>c("user-activity-report",()=>v("/reports/user-activity",{params:a})),export:(a,m)=>c("export-report",()=>v(`/reports/export/${a}`,{...m,responseType:"blob"}))}}}const ln={class:"contact-page"},rn={class:"contact-grid"},dn={class:"contact-form-container"},un={class:"form-row"},cn={class:"form-group"},pn={class:"input-group"},vn={key:0,class:"error-message"},mn={class:"form-group"},fn={class:"input-group"},gn={key:0,class:"error-message"},yn={class:"form-row"},bn={class:"form-group"},hn={class:"input-group"},kn={key:0,class:"error-message"},_n={class:"form-group"},$n={class:"input-group"},wn={key:0,class:"error-message"},Cn={class:"form-group"},Pn={class:"input-group"},An={key:0,class:"error-message"},Tn={key:0,class:"form-group"},Sn={class:"input-group"},xn={key:0,class:"error-message"},En={class:"form-group"},In={class:"input-group"},Dn={key:0,class:"error-message"},Mn=["disabled"],Nn={__name:"ContactPage",setup(S){const s=g({firstName:"",lastName:"",email:"",phone:"",eventType:"",otherEventType:"",message:""}),c=g({}),t=g(!1),i=g(!1),v=()=>{const b={};return s.value.firstName||(b.firstName="First name is required"),s.value.lastName||(b.lastName="Last name is required"),s.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value.email)||(b.email="Invalid email format"):b.email="Email is required",s.value.phone?/^[0-9]{11}$/.test(s.value.phone)||(b.phone="Phone number must be exactly 11 digits"):b.phone="Phone number is required",s.value.eventType||(b.eventType="Event type is required"),s.value.eventType==="Other"&&!s.value.otherEventType&&(b.otherEventType="Please specify the event type"),s.value.message||(b.message="Message is required"),c.value=b,Object.keys(b).length===0},w=b=>{const C={...c.value};switch(b){case"firstName":s.value.firstName?delete C.firstName:C.firstName="First name is required";break;case"lastName":s.value.lastName?delete C.lastName:C.lastName="Last name is required";break;case"email":s.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value.email)?delete C.email:C.email="Invalid email format":C.email="Email is required";break;case"phone":s.value.phone?/^[0-9]{11}$/.test(s.value.phone)?delete C.phone:C.phone="Phone number must be exactly 11 digits":C.phone="Phone number is required";break}c.value=C},k=b=>i.value?c.value[b]:"",_=async()=>{var b,C;try{if(i.value=!0,!v()){await Z.fire({title:"Validation Error",text:"Please fill in all required fields correctly.",icon:"error",confirmButtonColor:"#4070f4"});return}t.value=!0;const A=s.value.phone.trim();if(!A||A.length!==11)throw new Error("Phone number must be exactly 11 digits");const l={first_name:s.value.firstName.trim(),last_name:s.value.lastName.trim(),email:s.value.email.trim(),phone:A,event_type:s.value.eventType==="Other"?s.value.otherEventType.trim():s.value.eventType,message:s.value.message.trim()},f=await oe.post("/api/contact-us",l,{headers:{"Content-Type":"application/json",Accept:"application/json"}});(f.status===200||f.status===201)&&(await Z.fire({title:"Success!",text:"Your message has been sent successfully.",icon:"success",confirmButtonColor:"#4070f4"}),s.value={firstName:"",lastName:"",email:"",phone:"",eventType:"",otherEventType:"",message:""},c.value={},i.value=!1)}catch(A){console.error("Error sending message:",A);let l="Failed to send message. Please try again.";(C=(b=A.response)==null?void 0:b.data)!=null&&C.message?l=A.response.data.message:A.message&&(l=A.message),await Z.fire({title:"Error",text:l,icon:"error",confirmButtonColor:"#4070f4"})}finally{t.value=!1}};return(b,C)=>(n(),d("div",ln,[C[31]||(C[31]=e("header",{class:"contact-header"},[e("h1",null,"Get in Touch"),e("p",null,"We'd love to hear from you. Let us help make your event extraordinary.")],-1)),e("div",rn,[e("div",dn,[e("form",{onSubmit:ce(_,["prevent"]),class:"contact-form"},[e("div",un,[e("div",cn,[C[16]||(C[16]=e("label",{for:"firstName"},"First Names",-1)),e("div",pn,[C[15]||(C[15]=e("i",{class:"fas fa-user"},null,-1)),O(e("input",{type:"text",id:"firstName","onUpdate:modelValue":C[0]||(C[0]=A=>s.value.firstName=A),onBlur:C[1]||(C[1]=A=>w("firstName")),class:L({error:k("firstName")}),placeholder:"Enter first name"},null,34),[[Y,s.value.firstName]])]),k("firstName")?(n(),d("span",vn,r(k("firstName")),1)):N("",!0)]),e("div",mn,[C[18]||(C[18]=e("label",{for:"lastName"},"Last Name",-1)),e("div",fn,[C[17]||(C[17]=e("i",{class:"fas fa-user"},null,-1)),O(e("input",{type:"text",id:"lastName","onUpdate:modelValue":C[2]||(C[2]=A=>s.value.lastName=A),onBlur:C[3]||(C[3]=A=>w("lastName")),class:L({error:k("lastName")}),placeholder:"Enter last name"},null,34),[[Y,s.value.lastName]])]),k("lastName")?(n(),d("span",gn,r(k("lastName")),1)):N("",!0)])]),e("div",yn,[e("div",bn,[C[20]||(C[20]=e("label",{for:"email"},"Email",-1)),e("div",hn,[C[19]||(C[19]=e("i",{class:"fas fa-envelope"},null,-1)),O(e("input",{type:"email",id:"email","onUpdate:modelValue":C[4]||(C[4]=A=>s.value.email=A),onBlur:C[5]||(C[5]=A=>w("email")),class:L({error:k("email")}),placeholder:"Enter email"},null,34),[[Y,s.value.email]])]),k("email")?(n(),d("span",kn,r(k("email")),1)):N("",!0)]),e("div",_n,[C[22]||(C[22]=e("label",{for:"phone"},"Phone Number",-1)),e("div",$n,[C[21]||(C[21]=e("i",{class:"fas fa-phone"},null,-1)),O(e("input",{type:"tel",id:"phone","onUpdate:modelValue":C[6]||(C[6]=A=>s.value.phone=A),onBlur:C[7]||(C[7]=A=>w("phone")),class:L({error:k("phone")}),placeholder:"Enter phone number",maxlength:"11",pattern:"[0-9]{11}",onInput:C[8]||(C[8]=A=>s.value.phone=s.value.phone.replace(/\D/g,""))},null,34),[[Y,s.value.phone]])]),k("phone")?(n(),d("span",wn,r(k("phone")),1)):N("",!0)])]),e("div",Cn,[C[25]||(C[25]=e("label",{for:"eventType"},"Event Type",-1)),e("div",Pn,[C[24]||(C[24]=e("i",{class:"fas fa-calendar-alt"},null,-1)),O(e("select",{id:"eventType","onUpdate:modelValue":C[9]||(C[9]=A=>s.value.eventType=A),onBlur:C[10]||(C[10]=A=>w("eventType")),class:L({error:k("eventType")})},C[23]||(C[23]=[he('<option value="" data-v-ba687338>Select event type</option><option value="Wedding" data-v-ba687338>Wedding</option><option value="Debut" data-v-ba687338>Debut</option><option value="Christening" data-v-ba687338>Christening</option><option value="Party" data-v-ba687338>Party</option><option value="Other" data-v-ba687338>Other</option>',6)]),34),[[ue,s.value.eventType]])]),k("eventType")?(n(),d("span",An,r(k("eventType")),1)):N("",!0)]),s.value.eventType==="Other"?(n(),d("div",Tn,[C[27]||(C[27]=e("label",{for:"otherEventType"},"Specify Event Type",-1)),e("div",Sn,[C[26]||(C[26]=e("i",{class:"fas fa-pencil-alt"},null,-1)),O(e("input",{type:"text",id:"otherEventType","onUpdate:modelValue":C[11]||(C[11]=A=>s.value.otherEventType=A),onBlur:C[12]||(C[12]=A=>w("otherEventType")),class:L({error:k("otherEventType")}),placeholder:"Please specify your event type"},null,34),[[Y,s.value.otherEventType]])]),k("otherEventType")?(n(),d("span",xn,r(k("otherEventType")),1)):N("",!0)])):N("",!0),e("div",En,[C[29]||(C[29]=e("label",{for:"message"},"Message",-1)),e("div",In,[C[28]||(C[28]=e("i",{class:"fas fa-comment-alt"},null,-1)),O(e("textarea",{id:"message","onUpdate:modelValue":C[13]||(C[13]=A=>s.value.message=A),onBlur:C[14]||(C[14]=A=>w("message")),class:L({error:k("message")}),placeholder:"Tell us about your event",rows:"5"},null,34),[[Y,s.value.message]])]),k("message")?(n(),d("span",Dn,r(k("message")),1)):N("",!0)]),e("button",{type:"submit",class:"submit-btn",disabled:t.value},[e("span",null,r(t.value?"Sending...":"Send Message"),1)],8,Mn)],32)]),C[30]||(C[30]=e("div",{class:"contact-info"},[e("div",{class:"info-card"},[e("div",{class:"info-header"},[e("h2",null,"Contact Information"),e("p",null,"Get in touch with us through any of these channels")]),e("div",{class:"info-items"},[e("div",{class:"info-item"},[e("div",{class:"info-icon"},[e("i",{class:"fas fa-map-marker-alt"})]),e("div",{class:"info-content"},[e("h3",null,"Location"),e("p",null,"Camolinas Poblacion Cordova Cebu")])]),e("div",{class:"info-item"},[e("div",{class:"info-icon"},[e("i",{class:"fas fa-phone"})]),e("div",{class:"info-content"},[e("h3",null,"Phone"),e("p",null,"+63 912 345 6789"),e("p",null,"+63 998 765 4321")])]),e("div",{class:"info-item"},[e("div",{class:"info-icon"},[e("i",{class:"fas fa-envelope"})]),e("div",{class:"info-content"},[e("h3",null,"Email"),e("p",null,"info@razzrellevents.com"),e("p",null,"support@razzrellevents.com")])]),e("div",{class:"info-item"},[e("div",{class:"info-icon"},[e("i",{class:"fas fa-clock"})]),e("div",{class:"info-content"},[e("h3",null,"Business Hours"),e("p",null,"Monday - Friday: 9:00 AM - 6:00 PM"),e("p",null,"Saturday: 10:00 AM - 4:00 PM")])])]),e("div",{class:"social-links"},[e("a",{href:"#",class:"social-link"},[e("i",{class:"fab fa-facebook"})]),e("a",{href:"#",class:"social-link"},[e("i",{class:"fab fa-instagram"})]),e("a",{href:"#",class:"social-link"},[e("i",{class:"fab fa-twitter"})]),e("a",{href:"#",class:"social-link"},[e("i",{class:"fab fa-linkedin"})])])]),e("div",{class:"map-container"},[e("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3925.5676766857187!2d123.95103595!3d10.25283333!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTDCsDE1JzEwLjIiTiAxMjPCsDU3JzAzLjciRQ!5e0!3m2!1sen!2sph!4v1234567890",width:"100%",height:"300",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"})])],-1))])]))}},Fn=ne(Nn,[["__scopeId","data-v-ba687338"]]),Bn="/assets/story-image-13aa596e.jpg",Un="/assets/jerad-5003a4ed.jpg",Rn="/assets/jerwin-89e39d90.jpg",Ln="/assets/raphunzell-29a8ba05.jpg";const On={class:"about-page"},Vn={class:"bg-gray-50 dark:bg-gray-900 py-24"},qn={class:"container mx-auto px-6"},jn={class:"values-grid"},zn={class:"value-icon"},Gn={class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},Jn={class:"text-gray-600 dark:text-gray-300"},Wn={class:"py-24"},Qn={class:"container mx-auto px-6"},Hn={class:"team-grid"},Yn={class:"team-image"},Zn=["src","alt"],Kn={class:"team-info"},Xn={class:"text-xl font-semibold mb-1"},el={class:"text-sm opacity-90"},tl={class:"team-social"},sl=["href"],al={class:"stats-container"},ol={class:"container mx-auto px-6"},nl={class:"stats-grid"},ll={class:"stat-number"},il={class:"text-lg mt-2 opacity-90"},rl={__name:"AboutUs",setup(S){const s=g([{icon:"fas fa-star",title:"Excellence",description:"We strive for perfection in every detail, ensuring each event exceeds expectations."},{icon:"fas fa-heart",title:"Passion",description:"Our love for what we do drives us to create unique and memorable experiences."},{icon:"fas fa-handshake",title:"Integrity",description:"We build trust through transparency, honesty, and reliability in all our dealings."}]),c=g([{name:"Jerad",position:"Creative Director",image:Un,socials:[{platform:"linkedin",icon:"fab fa-linkedin",link:"#"},{platform:"twitter",icon:"fab fa-twitter",link:"#"}]},{name:"Raphunzell",position:"Event Manager",image:Ln,socials:[{platform:"linkedin",icon:"fab fa-linkedin",link:"#"},{platform:"instagram",icon:"fab fa-instagram",link:"#"}]},{name:"Jerwin",position:"Design Specialist",image:Rn,socials:[{platform:"linkedin",icon:"fab fa-linkedin",link:"#"},{platform:"behance",icon:"fab fa-behance",link:"#"}]}]),t=g([{value:"500",label:"Events Completed"},{value:"50",label:"Team Members"},{value:"100",label:"Partner Venues"},{value:"1000",label:"Happy Clients"}]);return(i,v)=>(n(),d("div",On,[v[2]||(v[2]=he('<section class="about-hero" data-v-27c34b7e><div class="about-hero-pattern" data-v-27c34b7e></div><div class="about-hero-content" data-v-27c34b7e><h1 class="text-4xl md:text-6xl font-bold mb-6" data-v-27c34b7e>Creating Unforgettable Moments</h1><p class="text-xl md:text-2xl opacity-90" data-v-27c34b7e>Your premier partner in event planning and management</p></div></section><section class="about-story" data-v-27c34b7e><div class="story-container" data-v-27c34b7e><div class="story-image" data-v-27c34b7e><img src="'+Bn+'" alt="Razzrel Events Story" data-v-27c34b7e></div><div class="story-content" data-v-27c34b7e><h2 data-v-27c34b7e>Our Story</h2><p data-v-27c34b7e>Founded with a passion for creating extraordinary experiences, Razzrel Events has been transforming dreams into reality since 2020. We believe that every event tells a unique story, and we&#39;re here to help you tell yours.</p><p data-v-27c34b7e>Our team of dedicated professionals brings creativity, attention to detail, and years of expertise to every project, ensuring your event is nothing short of spectacular.</p></div></div></section>',2)),e("section",Vn,[e("div",qn,[v[0]||(v[0]=e("div",{class:"section-title-wrapper"},[e("h2",{class:"section-title"},"Our Core Values")],-1)),e("div",jn,[(n(!0),d(te,null,ae(s.value,(w,k)=>(n(),d("div",{key:k,class:"value-card"},[e("div",zn,[e("i",{class:L(w.icon)},null,2)]),e("h3",Gn,r(w.title),1),e("p",Jn,r(w.description),1)]))),128))])])]),e("section",Wn,[e("div",Qn,[v[1]||(v[1]=e("div",{class:"section-title-wrapper"},[e("h2",{class:"section-title"},"Meet Our Team")],-1)),e("div",Hn,[(n(!0),d(te,null,ae(c.value,(w,k)=>(n(),d("div",{key:k,class:"team-card"},[e("div",Yn,[e("img",{src:w.image,alt:w.name,class:"w-full h-full object-cover"},null,8,Zn),e("div",Kn,[e("h3",Xn,r(w.name),1),e("p",el,r(w.position),1)]),e("div",tl,[(n(!0),d(te,null,ae(w.socials,_=>(n(),d("a",{key:_.platform,href:_.link,class:"team-social-icon"},[e("i",{class:L(_.icon)},null,2)],8,sl))),128))])])]))),128))])])]),e("section",al,[e("div",ol,[e("div",nl,[(n(!0),d(te,null,ae(t.value,(w,k)=>(n(),d("div",{key:k,class:"stat-item"},[e("div",ll,r(w.value)+"+",1),e("p",il,r(w.label),1)]))),128))])])]),v[3]||(v[3]=he('<section class="mission-container" data-v-27c34b7e><div class="mission-bg" data-v-27c34b7e></div><div class="mission-content" data-v-27c34b7e><h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-8" data-v-27c34b7e>Our Mission</h2><p class="mission-quote" data-v-27c34b7e> &quot;To create extraordinary experiences that exceed expectations and leave lasting impressions, one event at a time.&quot; </p></div></section>',1))]))}},dl=ne(rl,[["__scopeId","data-v-27c34b7e"]]);const ul={class:"booking-page"},cl={class:"booking-container"},pl={class:"step-progress"},vl={class:"step-icon"},ml={key:0,class:"fas fa-check"},fl={key:1},gl={class:"step-label"},yl={key:0,class:"step-line"},bl={class:"step-content"},hl={key:0,class:"fade-in"},kl={key:0,class:"package-card"},_l={class:"package-image"},$l=["src","alt"],wl={class:"package-details"},Cl={class:"package-price"},Pl={class:"package-description"},Al={class:"package-features"},Tl={class:"feature"},Sl={key:1,class:"fade-in"},xl={class:"form-grid"},El={class:"form-group"},Il={class:"input-group"},Dl={class:"form-group"},Ml={class:"input-group"},Nl={class:"form-group"},Fl={class:"input-group"},Bl={key:2,class:"fade-in"},Ul={class:"form-grid"},Rl={class:"form-group"},Ll={class:"input-group"},Ol=["min"],Vl={class:"form-group"},ql={class:"input-group"},jl={class:"form-group"},zl={class:"input-group"},Gl=["value"],Jl={class:"form-group"},Wl={class:"packs-input-wrapper"},Ql=["placeholder"],Hl={key:0,class:"text-muted"},Yl={class:"form-group span-2"},Zl={class:"input-group"},Kl={class:"form-group span-2"},Xl={class:"input-group"},ei={key:3,class:"fade-in"},ti={class:"payment-summary-card"},si={class:"summary-details"},ai={class:"summary-row"},oi={key:0,class:"summary-row pack-adjustment"},ni={class:"adjustment-details"},li={key:0,class:"calculation-details"},ii={class:"formula"},ri={class:"summary-row subtotal"},di={key:1,class:"summary-row duration-charge"},ui={class:"increase"},ci={class:"summary-row total"},pi={class:"payment-methods"},vi={class:"terms-section"},mi={class:"terms-checkbox"},fi={class:"form-navigation"},gi=["disabled"],yi=["disabled"],bi={key:0},hi={key:1},ki={__name:"BookingPageView",setup(S){const s=Re(),c=_e(),t=g({fullName:"",email:"",phone:"",event_date:"",event_time:"",venue_name:"",packs:null,special_requests:"",payment_method:"",receiptImage:null,termsAccepted:!1,user_id:"",package_id:"",event_duration:1}),i=g(null),v=g(!1);g(""),g(""),g(null);const w=["Package","Personal Info","Event Details","Payment"],k=g(1),_=ee(()=>{const y=new Date;return y.setDate(y.getDate()+7),y.toISOString().split("T")[0]}),b=ee(()=>{if(!i.value||!t.value.packs)return 0;const y=Number(i.value.price),u=Number(i.value.packs),I=Number(t.value.packs),F=Number(i.value.additional_price_percentage);if(I<=u)return 0;const z=I-u;return y*(F/100)*z}),C=ee(()=>{if(!i.value||!t.value.packs)return"";const y=Number(i.value.packs),u=Number(t.value.packs),I=Number(i.value.additional_price_percentage);if(u>y){const F=u-y,z=i.value.price*(I/100);return`${F} additional pax (+₱${a(z)} per additional guest)`}return""}),A=ee(()=>{if(!i.value)return 0;const y=Number(i.value.price)||0,u=Number(b.value)||0;return y+u}),l=ee(()=>{if(!i.value||!t.value.event_duration)return 0;const y=Number(t.value.event_duration)||1;return y<=1?0:(Number(A.value)||0)*(y-1)}),f=ee(()=>{const y=Number(A.value)||0,u=Number(l.value)||0;return y+u}),a=y=>{const u=Number(y);return isNaN(u)?"0.00":u.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},m=ee(()=>{switch(k.value){case 1:return i.value!==null;case 2:return t.value.fullName&&t.value.fullName.trim()!==""&&t.value.email&&t.value.phone;case 3:return t.value.event_date&&t.value.event_time&&t.value.venue_name&&t.value.packs&&t.value.event_duration;default:return!0}}),$=async()=>{try{const y=await oe.get(`http://127.0.0.1:8000/api/get-package-by-id/${s.params.id}`);t.value.packs=y.data.packs,t.value.package_id=y.data.id,i.value={id:y.data.id,name:y.data.package_name,price:y.data.package_price,description:y.data.package_description,packs:y.data.packs,additional_price_percentage:y.data.additional_price_percentage,image:y.data.package_image?`/storage/${y.data.package_image}`:null};const u=JSON.parse(localStorage.getItem("user_info"));if(console.log("User Info from localStorage:",u),u&&u.first_name&&u.last_name){const I=String(u.first_name||"").trim(),F=String(u.last_name||"").trim();t.value.fullName=`${I} ${F}`,t.value.email=String(u.email||"").trim(),t.value.phone=String(u.phone_number||""),t.value.user_id=u.id,console.log("Set form data:",{fullName:t.value.fullName,email:t.value.email,phone:t.value.phone,user_id:t.value.user_id})}else console.warn("User info incomplete or not found in localStorage")}catch(y){console.error("Error fetching package:",y),Z.fire({icon:"error",title:"Error",text:"Failed to load package details. Please try again.",confirmButtonColor:"#d33"})}},T=()=>{},h=async y=>{var u,I;try{if(!t.value.fullName||String(t.value.fullName).trim()==="")throw new Error("Full name is required");const F={"Full Name":t.value.fullName,Email:t.value.email,"Phone Number":t.value.phone,"Event Date":t.value.event_date,"Event Time":t.value.event_time,Venue:t.value.venue_name,Package:t.value.package_id,"Payment Method":t.value.payment_method,"Number of Packs":t.value.packs,"Event Duration":t.value.event_duration},z=Object.entries(F).filter(([P,p])=>P==="Full Name"?!p||String(p).trim()==="":!p||typeof p=="string"&&!p.trim()).map(([P])=>P);if(z.length>0)throw new Error(`Please fill in all required fields: ${z.join(", ")}`);v.value=!0;const V=new FormData,B=String(t.value.fullName).trim();if(console.log("Submitting full name:",B),!B)throw new Error("Full name cannot be empty");V.append("full_name",B),V.append("email",String(t.value.email||"").trim()),V.append("phone_number",String(t.value.phone||"")),V.append("event_date",t.value.event_date),V.append("event_time",t.value.event_time),V.append("venue_name",String(t.value.venue_name||"").trim()),V.append("package_id",t.value.package_id),V.append("payment_method",t.value.payment_method),V.append("special_requests",String(t.value.special_requests||"").trim()),V.append("packs",t.value.packs),V.append("total_price",f.value),V.append("status","pending"),V.append("event_duration",t.value.event_duration);const J=new Date(t.value.event_date);if(isNaN(J.getTime()))throw new Error("Invalid event date");const G=new Date(J);G.setDate(J.getDate()+(parseInt(t.value.event_duration)-1)),V.append("event_end_date",G.toISOString().split("T")[0]),t.value.receiptImage&&V.append("receipt",t.value.receiptImage);const Q=JSON.parse(localStorage.getItem("user_info"));if(!Q||!Q.id)throw new Error("User information not found. Please log in again.");V.append("user_id",Q.id),console.log("Submitting booking with data:");for(let P of V.entries())console.log(`${P[0]}: ${P[1]}`);const H=await oe.post("http://127.0.0.1:8000/api/add-booking",V,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"}});if(console.log("Server response:",H.data),H.data.status==="success"||H.status===200)await Z.fire({icon:"success",title:"Success!",text:"Your booking has been submitted successfully.",confirmButtonColor:"#3085d6",confirmButtonText:"View My Bookings"}),c.push("/bookings");else throw new Error(H.data.message||"Failed to create booking")}catch(F){console.error("Booking error:",F);let z=F.message||"Failed to create booking. Please try again.";(I=(u=F.response)==null?void 0:u.data)!=null&&I.message&&(z=F.response.data.message,console.error("Server error response:",F.response.data)),await Z.fire({icon:"error",title:"Error",text:z,confirmButtonColor:"#d33",confirmButtonText:"OK"})}finally{v.value=!1}},K=()=>{if(!m.value){let y=[];switch(k.value){case 1:i.value||y.push("Package selection");break;case 2:t.value.fullName||y.push("Full Name"),t.value.email||y.push("Email"),t.value.phone||y.push("Phone Number");break;case 3:t.value.event_date||y.push("Event Date"),t.value.event_time||y.push("Event Time"),t.value.venue_name||y.push("Venue Address"),t.value.packs||y.push("Number of Guests"),t.value.event_duration||y.push("Event Duration");break}Z.fire({icon:"warning",title:"Required Fields",text:`Please fill in the following required fields: ${y.join(", ")}`,confirmButtonColor:"#3085d6"});return}k.value++},U=y=>{/^\d*$/.test(y.key)||y.preventDefault()},D=g(!1),R=y=>{const u=y.target.value;if(u===""){t.value.packs="",D.value=!1;return}const I=parseInt(u);if(!isNaN(I)){const F=i.value?parseInt(i.value.packs):50;if(I<F){D.value=!0;return}I>500?(t.value.packs="500",D.value=!1):(t.value.packs=u,D.value=!1)}},x=()=>{if(t.value.packs===""){const I=i.value?parseInt(i.value.packs):50;t.value.packs=I.toString(),D.value=!1;return}let y=parseInt(t.value.packs);const u=i.value?parseInt(i.value.packs):50;y<u?t.value.packs=u.toString():y>500&&(t.value.packs="500"),D.value=!1};return me(async()=>{await $()}),(y,u)=>{var I,F,z;return n(),d("div",ul,[e("div",cl,[e("div",pl,[(n(),d(te,null,ae(w,(V,B)=>e("div",{key:B,class:L(["step",{active:k.value>=B+1,complete:k.value>B+1}])},[e("div",vl,[k.value>B+1?(n(),d("i",ml)):(n(),d("span",fl,r(B+1),1))]),e("div",gl,r(V),1),B<w.length-1?(n(),d("div",yl)):N("",!0)],2)),64))]),e("div",bl,[k.value===1?(n(),d("div",hl,[u[17]||(u[17]=e("div",{class:"step-header"},[e("h2",null,"Select Your Package"),e("p",null,"Choose the perfect package for your event")],-1)),i.value?(n(),d("div",kl,[e("div",_l,[e("img",{src:i.value.image||"/images/default-package.jpg",alt:i.value.name},null,8,$l),u[13]||(u[13]=e("div",{class:"package-badge"},"Selected Package",-1))]),e("div",wl,[e("h3",null,r(i.value.name),1),e("div",Cl," ₱"+r(a(i.value.price)),1),e("p",Pl,r(i.value.description),1),e("div",Al,[e("div",Tl,[u[14]||(u[14]=e("i",{class:"fas fa-users"},null,-1)),e("span",null,"Up to "+r(t.value.packs)+" Guests",1)]),u[15]||(u[15]=e("div",{class:"feature"},[e("i",{class:"fas fa-clock"}),e("span",null,"Full Day Event")],-1)),u[16]||(u[16]=e("div",{class:"feature"},[e("i",{class:"fas fa-star"}),e("span",null,"Premium Service")],-1))])])])):N("",!0)])):N("",!0),k.value===2?(n(),d("div",Sl,[u[24]||(u[24]=e("div",{class:"step-header"},[e("h2",null,"Personal Information"),e("p",null,"Tell us about yourself")],-1)),e("div",xl,[e("div",El,[u[19]||(u[19]=e("label",null,"Full Name*",-1)),e("div",Il,[u[18]||(u[18]=e("i",{class:"fas fa-user"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=V=>t.value.fullName=V),required:"",placeholder:"Enter your full name"},null,512),[[Y,t.value.fullName]])])]),e("div",Dl,[u[21]||(u[21]=e("label",null,"Email Address*",-1)),e("div",Ml,[u[20]||(u[20]=e("i",{class:"fas fa-envelope"},null,-1)),O(e("input",{type:"email","onUpdate:modelValue":u[1]||(u[1]=V=>t.value.email=V),required:"",placeholder:"Enter your email"},null,512),[[Y,t.value.email]])])]),e("div",Nl,[u[23]||(u[23]=e("label",null,"Phone Number*",-1)),e("div",Fl,[u[22]||(u[22]=e("i",{class:"fas fa-phone"},null,-1)),O(e("input",{type:"tel","onUpdate:modelValue":u[2]||(u[2]=V=>t.value.phone=V),required:"",placeholder:"Enter your phone number"},null,512),[[Y,t.value.phone]])])])])])):N("",!0),k.value===3?(n(),d("div",Bl,[u[39]||(u[39]=e("div",{class:"step-header"},[e("h2",null,"Event Details"),e("p",null,"Tell us about your event")],-1)),e("div",Ul,[e("div",Rl,[u[26]||(u[26]=e("label",null,"Event Start Date*",-1)),e("div",Ll,[u[25]||(u[25]=e("label",{for:"event_date"},[e("i",{class:"fas fa-calendar"})],-1)),O(e("input",{id:"event_date",type:"date","onUpdate:modelValue":u[3]||(u[3]=V=>t.value.event_date=V),required:"",min:_.value,placeholder:"MM/DD/YYYY"},null,8,Ol),[[Y,t.value.event_date]])])]),e("div",Vl,[u[28]||(u[28]=e("label",null,"Event Time*",-1)),e("div",ql,[u[27]||(u[27]=e("label",{for:"event_time"},[e("i",{class:"fas fa-clock"})],-1)),O(e("input",{id:"event_time",type:"time","onUpdate:modelValue":u[4]||(u[4]=V=>t.value.event_time=V),required:"",placeholder:"HH:MM"},null,512),[[Y,t.value.event_time]])])]),e("div",jl,[u[31]||(u[31]=e("label",null,"Event Duration (Days)*",-1)),e("div",zl,[u[30]||(u[30]=e("i",{class:"fas fa-calendar-day"},null,-1)),O(e("select",{"onUpdate:modelValue":u[5]||(u[5]=V=>t.value.event_duration=V),required:"",class:"form-select",onChange:u[6]||(u[6]=(...V)=>y.updateTotalPrice&&y.updateTotalPrice(...V))},[u[29]||(u[29]=e("option",{value:"",disabled:""},"Select number of days",-1)),(n(),d(te,null,ae(7,V=>e("option",{key:V,value:V},r(V)+" "+r(V===1?"day":"days"),9,Gl)),64))],544),[[ue,t.value.event_duration]])])]),e("div",Jl,[u[34]||(u[34]=e("label",null,"Number of Guests/Packs*",-1)),e("div",{class:L(["input-group",{error:D.value}])},[u[33]||(u[33]=e("i",{class:"fas fa-users"},null,-1)),e("div",Wl,[O(e("input",{type:"text","onUpdate:modelValue":u[7]||(u[7]=V=>t.value.packs=V),required:"",class:"packs-input",onInput:R,onKeypress:U,onBlur:x,placeholder:((I=i.value)==null?void 0:I.packs)+" pax"},null,40,Ql),[[Y,t.value.packs]]),u[32]||(u[32]=e("span",{class:"packs-suffix"},"pax",-1))])],2),i.value?(n(),d("small",Hl," Minimum "+r(i.value.packs)+" pax required for this package ",1)):N("",!0)]),e("div",Yl,[u[36]||(u[36]=e("label",null,"Venue Address*",-1)),e("div",Zl,[u[35]||(u[35]=e("i",{class:"fas fa-map-marker-alt"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":u[8]||(u[8]=V=>t.value.venue_name=V),required:"",placeholder:"Enter complete venue address"},null,512),[[Y,t.value.venue_name]])])]),e("div",Kl,[u[38]||(u[38]=e("label",null,[E("Special Requests "),e("span",{class:"optional"},"(Optional)")],-1)),e("div",Xl,[u[37]||(u[37]=e("i",{class:"fas fa-comment-alt"},null,-1)),O(e("textarea",{"onUpdate:modelValue":u[9]||(u[9]=V=>t.value.special_requests=V),placeholder:"Any special requirements or requests?",rows:"4"},null,512),[[Y,t.value.special_requests]])])])])])):N("",!0),k.value===4?(n(),d("div",ei,[u[50]||(u[50]=e("div",{class:"step-header"},[e("h2",null,"Payment Details"),e("p",null,"Choose your payment method")],-1)),e("div",ti,[u[47]||(u[47]=e("h3",null,"Booking Summary",-1)),e("div",si,[e("div",ai,[e("span",null,"Package Price (Standard "+r((F=i.value)==null?void 0:F.packs)+" pax)",1),e("span",null,"₱"+r(a(i.value?i.value.price:0)),1)]),b.value!==0||t.value.packs!==((z=i.value)==null?void 0:z.packs)?(n(),d("div",oi,[e("div",ni,[e("span",null,"Pack Adjustment ("+r(C.value)+")",1),i.value?(n(),d("div",li,[e("div",ii,[E(" Base package price: ₱"+r(a(i.value.price))+" ",1),u[41]||(u[41]=e("br",null,null,-1)),E(" Additional Guest Price: "+r(i.value.additional_price_percentage||10)+"% per person ",1),u[42]||(u[42]=e("br",null,null,-1)),E(" Additional guests: "+r(t.value.packs-i.value.packs)+" ",1),u[43]||(u[43]=e("br",null,null,-1)),i.value.additional_price_percentage>0&&t.value.packs>i.value.packs?(n(),d(te,{key:0},[E(" Price per additional guest: ₱"+r(a(i.value.price*((i.value.additional_price_percentage||10)/100)))+" ",1),u[40]||(u[40]=e("br",null,null,-1)),E(" Total additional charge: ₱"+r(a(b.value)),1)],64)):N("",!0)])])):N("",!0)]),e("span",{class:L({increase:b.value>0,decrease:b.value<0})},r(b.value>0?"+":"")+"₱"+r(a(b.value)),3)])):N("",!0),e("div",ri,[u[44]||(u[44]=e("span",null,"Package Subtotal",-1)),e("span",null,"₱"+r(a(A.value)),1)]),t.value.event_duration>1?(n(),d("div",di,[e("span",null,"Additional Days ("+r(t.value.event_duration-1)+" extra)",1),e("span",ui,"+₱"+r(a(l.value)),1)])):N("",!0),u[46]||(u[46]=e("div",{class:"divider"},null,-1)),e("div",ci,[u[45]||(u[45]=e("span",null,"Total Payment",-1)),e("span",null,"₱"+r(a(f.value)),1)])])]),e("div",pi,[e("label",{class:L(["payment-method-card",{active:t.value.payment_method==="cash"}])},[O(e("input",{type:"radio","onUpdate:modelValue":u[10]||(u[10]=V=>t.value.payment_method=V),value:"cash",required:""},null,512),[[Fe,t.value.payment_method]]),u[48]||(u[48]=e("div",{class:"method-content"},[e("i",{class:"fas fa-money-bill-wave"}),e("div",{class:"method-details"},[e("h4",null,"Cash Payment"),e("p",null,"Pay in cash on meet-up")])],-1))],2)]),e("div",vi,[e("label",mi,[O(e("input",{type:"checkbox","onUpdate:modelValue":u[11]||(u[11]=V=>t.value.termsAccepted=V),required:""},null,512),[[$e,t.value.termsAccepted]]),e("span",null,[u[49]||(u[49]=E("I agree to the ")),e("a",{href:"#",onClick:ce(T,["prevent"])},"Terms and Conditions")])])])])):N("",!0)]),e("div",fi,[k.value>1?(n(),d("button",{key:0,type:"button",class:"nav-btn back",onClick:u[12]||(u[12]=V=>k.value--)},u[51]||(u[51]=[e("i",{class:"fas fa-arrow-left"},null,-1),E(" Back ")]))):N("",!0),k.value<4?(n(),d("button",{key:1,type:"button",class:"nav-btn next",onClick:K,disabled:!m.value},u[52]||(u[52]=[E(" Next "),e("i",{class:"fas fa-arrow-right"},null,-1)]),8,gi)):N("",!0),k.value===4?(n(),d("button",{key:2,type:"button",class:"nav-btn submit",disabled:v.value||!t.value.termsAccepted,onClick:h},[v.value?(n(),d("span",bi,u[53]||(u[53]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),E(" Processing... ")]))):(n(),d("span",hi,u[54]||(u[54]=[e("i",{class:"fas fa-check"},null,-1),E(" Confirm Booking ")])))],8,yi)):N("",!0)])])])}}},Ct=ne(ki,[["__scopeId","data-v-bde0d823"]]);const _i={class:"auth-page"},$i={class:"auth-container"},wi={class:"auth-card"},Ci={class:"auth-header"},Pi=["src"],Ai={class:"form-group"},Ti={class:"input-group"},Si={key:0,class:"error-message"},xi={class:"form-group"},Ei={class:"input-group"},Ii=["type"],Di={key:0,class:"error-message"},Mi={class:"form-options"},Ni={class:"checkbox-label"},Fi={class:"auth-footer"},Bi={__name:"LoginPage",setup(S){_e();const{login:s}=ye(),{isDarkMode:c}=He(),t=ee(()=>c()?new URL("/assets/logo2-da863cb0.png",self.location).href:new URL("/assets/logo1-89c8d4b1.png",self.location).href),i=g(!1),{values:v,errors:w,touched:k,validate:_,validateAll:b,handleBlur:C,isValid:A,getFieldError:l}=Ye({email:"",password:"",rememberMe:!1}),f={email:["required","email"],password:["required",["minLength",6]]},a=async()=>{if(b(f))try{if(await s({email:v.value.email,password:v.value.password,remember:v.value.rememberMe})===!1)return}catch(m){console.error("Unexpected error during login:",m)}};return(m,$)=>{const T=ke("router-link");return n(),d("div",_i,[e("div",$i,[e("div",wi,[e("div",Ci,[pe(T,{to:"/"},{default:ve(()=>[e("img",{src:t.value,alt:"Razz Rell Events",class:"auth-logo"},null,8,Pi)]),_:1}),$[6]||($[6]=e("h1",null,"Welcome Back",-1)),$[7]||($[7]=e("p",null,"Sign in to your account to continue",-1))]),e("form",{onSubmit:ce(a,["prevent"]),class:"auth-form"},[e("div",Ai,[$[9]||($[9]=e("label",{for:"email"},"Email",-1)),e("div",Ti,[$[8]||($[8]=e("i",{class:"fas fa-envelope"},null,-1)),O(e("input",{type:"email",id:"email","onUpdate:modelValue":$[0]||($[0]=h=>M(v).email=h),onBlur:$[1]||($[1]=h=>M(C)("email")),class:L({error:M(l)("email")}),placeholder:"Enter your email",autocomplete:"email"},null,34),[[Y,M(v).email]])]),M(l)("email")?(n(),d("span",Si,r(M(l)("email")),1)):N("",!0)]),e("div",xi,[$[11]||($[11]=e("label",{for:"password"},"Password",-1)),e("div",Ei,[$[10]||($[10]=e("i",{class:"fas fa-lock"},null,-1)),O(e("input",{type:i.value?"text":"password",id:"password","onUpdate:modelValue":$[2]||($[2]=h=>M(v).password=h),onBlur:$[3]||($[3]=h=>M(C)("password")),class:L({error:M(l)("password")}),placeholder:"Enter your password",autocomplete:"current-password"},null,42,Ii),[[Se,M(v).password]]),e("button",{type:"button",class:"toggle-password",onClick:$[4]||($[4]=h=>i.value=!i.value)},[e("i",{class:L(["fas",i.value?"fa-eye-slash":"fa-eye"])},null,2)])]),M(l)("password")?(n(),d("span",Di,r(M(l)("password")),1)):N("",!0)]),e("div",Mi,[e("label",Ni,[O(e("input",{type:"checkbox","onUpdate:modelValue":$[5]||($[5]=h=>M(v).rememberMe=h)},null,512),[[$e,M(v).rememberMe]]),$[12]||($[12]=E(" Remember me "))]),pe(T,{to:"/forgot-password",class:"forgot-password"},{default:ve(()=>$[13]||($[13]=[E(" Forgot password? ")])),_:1})]),$[14]||($[14]=e("button",{type:"submit",class:"submit-btn"},[e("span",null,"Sign In")],-1))],32),e("div",Fi,[$[16]||($[16]=e("p",null,"Don't have an account?",-1)),pe(T,{to:"/register",class:"register-link"},{default:ve(()=>$[15]||($[15]=[E(" Create an account ")])),_:1})])])])])}}},Ui=ne(Bi,[["__scopeId","data-v-abfd1356"]]);const Ri={class:"modal-header"},Li={class:"action-buttons"},Oi={key:0,class:"booking-info"},Vi={class:"info-section"},qi={class:"info-grid"},ji={class:"info-item"},zi={class:"value"},Gi={class:"info-item"},Ji={class:"value"},Wi={class:"info-item"},Qi={class:"value"},Hi={class:"info-item"},Yi={class:"value"},Zi={class:"info-section"},Ki={class:"package-details"},Xi=["src","alt"],er={class:"package-info"},tr={class:"price"},sr={class:"description"},ar={class:"info-section"},or={class:"info-grid"},nr={class:"info-item"},lr={class:"value"},ir={class:"info-item"},rr={class:"value"},dr={class:"info-item"},ur={class:"value"},cr={class:"info-section"},pr={class:"payment-info"},vr={class:"info-item"},mr={class:"value"},fr={class:"info-item"},gr={class:"info-item total"},yr={class:"value"},br={key:0,class:"info-section"},hr={class:"special-requests"},kr={class:"info-section"},_r={class:"status-timeline"},$r={class:"status-text"},wr={key:0,class:"status-line"},Cr={key:0,class:"cancellation-message"},Pr={class:"modal-actions"},Ar={key:1,class:"modal-overlay"},Tr={class:"modal-content"},Sr={class:"modal-header"},xr={class:"feedback-form"},Er={class:"form-group"},Ir={class:"rating-group"},Dr=["onClick"],Mr={class:"form-group"},Nr={key:0,class:"form-group"},Fr={class:"form-group"},Br={class:"modal-actions"},Ur=["disabled"],Rr={__name:"BookingDetailsModal",props:{show:Boolean,booking:Object},emits:["close","cancel","modify"],setup(S,{emit:s}){const c=S,t=s,i=["Pending","Confirmed","In Progress","Completed","Cancelled"],v=U=>new Date(U).toLocaleDateString("en-PH",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),w=U=>new Date(`2000-01-01T${U}`).toLocaleTimeString("en-PH",{hour:"numeric",minute:"numeric",hour12:!0}),k=U=>U.charAt(0).toUpperCase()+U.slice(1),_=U=>{var x;const D=i.indexOf((x=c.booking)==null?void 0:x.status);return i.indexOf(U)<=D},b=ee(()=>{var U,D;return((U=c.booking)==null?void 0:U.status)==="Pending"||((D=c.booking)==null?void 0:D.status)==="Confirmed"}),C=ee(()=>{var U;return((U=c.booking)==null?void 0:U.status)==="Pending"}),A=g(!1),l=g(0),f=g(""),a=g(""),m=g(""),$=ee(()=>l.value>0&&f.value),T=()=>{A.value=!0},h=()=>{t("modify",c.booking)},K=async()=>{if(!$.value){Z.fire({icon:"error",title:"Incomplete Feedback",text:"Please provide a satisfaction rating and reason for cancellation"});return}try{await oe.post("http://127.0.0.1:8000/api/booking-feedback",{booking_id:c.booking.id,satisfaction_rating:l.value,cancellation_reason:f.value==="other"?a.value:f.value,feedback_message:m.value}),(await oe.post("http://127.0.0.1:8000/api/update-booking",{id:c.booking.id,status:"cancelled",cancellation_reason:f.value==="other"?a.value:f.value})).status===200&&(A.value=!1,l.value=0,f.value="",a.value="",m.value="",Z.fire({icon:"success",title:"Thank You for Your Feedback",text:"Your booking has been cancelled and your feedback has been recorded."}),t("close"))}catch(U){console.error("Error processing cancellation:",U),Z.fire({icon:"error",title:"Error",text:"Failed to process your request. Please try again."})}};return(U,D)=>{var R,x,y,u,I;return n(),d(te,null,[S.show?(n(),d("div",{key:0,class:"modal-overlay",onClick:D[3]||(D[3]=F=>U.$emit("close"))},[e("div",{class:"modal-content",onClick:D[2]||(D[2]=ce(()=>{},["stop"]))},[e("div",Ri,[D[11]||(D[11]=e("h2",null,"Booking Details",-1)),e("div",Li,[U.canDownloadInvoice?(n(),d("button",{key:0,onClick:D[0]||(D[0]=(...F)=>U.downloadInvoice&&U.downloadInvoice(...F)),class:"btn btn-secondary"},D[9]||(D[9]=[e("i",{class:"fas fa-file-invoice"},null,-1),E(" Download Invoice ")]))):N("",!0),e("button",{onClick:D[1]||(D[1]=F=>U.$emit("close")),class:"btn btn-close"},D[10]||(D[10]=[e("i",{class:"fas fa-times"},null,-1)]))])]),S.booking?(n(),d("div",Oi,[e("div",Vi,[D[16]||(D[16]=e("h3",null,"Event Information",-1)),e("div",qi,[e("div",ji,[D[12]||(D[12]=e("span",{class:"label"},"Event Date:",-1)),e("span",zi,r(v(S.booking.eventDate)),1)]),e("div",Gi,[D[13]||(D[13]=e("span",{class:"label"},"Event Time:",-1)),e("span",Ji,r(w(S.booking.eventTime)),1)]),e("div",Wi,[D[14]||(D[14]=e("span",{class:"label"},"Venue:",-1)),e("span",Qi,r(S.booking.venueName),1)]),e("div",Hi,[D[15]||(D[15]=e("span",{class:"label"},"Guest Count:",-1)),e("span",Yi,r(S.booking.guestCount)+" persons",1)])])]),e("div",Zi,[D[17]||(D[17]=e("h3",null,"Package Details",-1)),e("div",Ki,[e("img",{src:(R=S.booking.package)==null?void 0:R.image,alt:(x=S.booking.package)==null?void 0:x.name},null,8,Xi),e("div",er,[e("h4",null,r((y=S.booking.package)==null?void 0:y.name),1),e("p",tr,"₱"+r((u=S.booking.package)==null?void 0:u.price.toLocaleString()),1),e("p",sr,r((I=S.booking.package)==null?void 0:I.description),1)])])]),e("div",ar,[D[21]||(D[21]=e("h3",null,"Contact Information",-1)),e("div",or,[e("div",nr,[D[18]||(D[18]=e("span",{class:"label"},"Full Name:",-1)),e("span",lr,r(S.booking.fullName),1)]),e("div",ir,[D[19]||(D[19]=e("span",{class:"label"},"Email:",-1)),e("span",rr,r(S.booking.email),1)]),e("div",dr,[D[20]||(D[20]=e("span",{class:"label"},"Phone:",-1)),e("span",ur,r(S.booking.phone),1)])])]),e("div",cr,[D[25]||(D[25]=e("h3",null,"Payment Information",-1)),e("div",pr,[e("div",vr,[D[22]||(D[22]=e("span",{class:"label"},"Payment Method:",-1)),e("span",mr,r(k(S.booking.paymentMethod)),1)]),e("div",fr,[D[23]||(D[23]=e("span",{class:"label"},"Payment Status:",-1)),e("span",{class:L(["status",S.booking.paymentStatus.toLowerCase()])},r(S.booking.paymentStatus),3)]),e("div",gr,[D[24]||(D[24]=e("span",{class:"label"},"Total Amount:",-1)),e("span",yr,"₱"+r(S.booking.totalAmount.toLocaleString()),1)])])]),S.booking.specialRequests?(n(),d("div",br,[D[26]||(D[26]=e("h3",null,"Special Requests",-1)),e("p",hr,r(S.booking.specialRequests),1)])):N("",!0),e("div",kr,[D[29]||(D[29]=e("h3",null,"Booking Status",-1)),e("div",_r,[(n(),d(te,null,ae(i,(F,z)=>e("div",{key:F,class:L(["status-item",{active:_(F)}])},[D[27]||(D[27]=e("div",{class:"status-dot"},null,-1)),e("span",$r,r(F),1),z<i.length-1?(n(),d("div",wr)):N("",!0)],2)),64))]),S.booking.status==="Cancelled"&&S.booking.cancellationMessage?(n(),d("div",Cr,[D[28]||(D[28]=e("h4",null,"Reason for Cancellation:",-1)),e("p",null,r(S.booking.cancellationMessage),1)])):N("",!0)]),e("div",Pr,[b.value?(n(),d("button",{key:0,class:"cancel-btn",onClick:T}," Cancel Booking ")):N("",!0),C.value?(n(),d("button",{key:1,class:"modify-btn",onClick:h}," Modify Booking ")):N("",!0)])])):N("",!0)])])):N("",!0),A.value?(n(),d("div",Ar,[e("div",Tr,[e("div",Sr,[D[31]||(D[31]=e("h2",null,"Before You Cancel",-1)),e("button",{class:"close-btn",onClick:D[4]||(D[4]=F=>A.value=!1)},D[30]||(D[30]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",xr,[D[38]||(D[38]=e("p",{class:"feedback-intro"},"Please help us improve our services by sharing your feedback:",-1)),e("div",Er,[D[33]||(D[33]=e("label",null,"How would you rate your overall experience?",-1)),e("div",Ir,[(n(),d(te,null,ae(5,F=>e("div",{key:F,class:L(["star",{active:F<=l.value}]),onClick:z=>l.value=F},D[32]||(D[32]=[e("i",{class:"fas fa-star"},null,-1)]),10,Dr)),64))])]),e("div",Mr,[D[35]||(D[35]=e("label",null,"Reason for cancellation",-1)),O(e("select",{"onUpdate:modelValue":D[5]||(D[5]=F=>f.value=F),required:""},D[34]||(D[34]=[he('<option value="" data-v-733ceb88>Select a reason</option><option value="schedule_conflict" data-v-733ceb88>Schedule Conflict</option><option value="change_of_plans" data-v-733ceb88>Change of Plans</option><option value="budget_constraints" data-v-733ceb88>Budget Constraints</option><option value="service_quality" data-v-733ceb88>Service Quality Concerns</option><option value="found_alternative" data-v-733ceb88>Found Alternative Service</option><option value="other" data-v-733ceb88>Other</option>',7)]),512),[[ue,f.value]])]),f.value==="other"?(n(),d("div",Nr,[D[36]||(D[36]=e("label",null,"Please specify your reason",-1)),O(e("input",{type:"text","onUpdate:modelValue":D[6]||(D[6]=F=>a.value=F),placeholder:"Enter your specific reason",required:""},null,512),[[Y,a.value]])])):N("",!0),e("div",Fr,[D[37]||(D[37]=e("label",null,"Additional Comments (Optional)",-1)),O(e("textarea",{"onUpdate:modelValue":D[7]||(D[7]=F=>m.value=F),placeholder:"Please share any additional feedback or suggestions...",rows:"4"},null,512),[[Y,m.value]])]),e("div",Br,[e("button",{class:"btn-secondary",onClick:D[8]||(D[8]=F=>A.value=!1)}," Back "),e("button",{class:"btn-primary",onClick:K,disabled:!$.value}," Submit & Cancel Booking ",8,Ur)])])])])):N("",!0)],64)}}},Ft=ne(Rr,[["__scopeId","data-v-733ceb88"]]);const Lr={class:"modal-content"},Or={class:"modal-header"},Vr={class:"form-group"},qr={class:"star-rating"},jr={class:"stars"},zr=["onClick","onMouseover"],Gr={class:"rating-text"},Jr={class:"form-group"},Wr={class:"form-actions"},Qr=["disabled"],Hr={key:0,class:"fas fa-spinner fa-spin"},Yr={__name:"RateBookingModal",props:{booking:{type:Object,required:!0}},emits:["close","success"],setup(S,{emit:s}){const c=S,{token:t}=ye(),i=s,v=Te({package_id:c.booking.package_id,rating:1,review:null,user_id:c.booking.user_id,booking_id:c.booking.id}),w=g([]),k=g(!1),_=g(0),b=async()=>{const l=await oe.get("http://127.0.0.1:8000/api/get-all-guest");w.value=l.data},C=async()=>{try{k.value=!0;const l=new FormData;l.append("package_id",v.package_id),l.append("rating",v.rating),l.append("review",v.review),l.append("user_id",v.user_id),l.append("booking_id",v.booking_id);const f=await oe.post("http://127.0.0.1:8000/api/add-rating",l,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${t.value}`}});f.status===200?(i("rating-added",f.data.package),Z.fire({title:"Success",text:f.data.message,icon:"success"}).then(()=>{i("close")})):alert(f.data.message||"Failed to add rating. Please try again.")}catch(l){console.error("Error adding rating:",l),alert(l.message||"Failed to add rating. Please try again.")}finally{k.value=!1}},A=ee(()=>{switch(_.value||v.rating){case 1:return"Poor";case 2:return"Fair";case 3:return"Good";case 4:return"Very Good";case 5:return"Excellent";default:return"Rate your experience"}});return me(()=>{b()}),(l,f)=>(n(),d("div",{class:"modal-overlay",onClick:f[4]||(f[4]=ce(a=>l.$emit("close"),["self"]))},[e("div",Lr,[e("div",Or,[f[6]||(f[6]=e("h2",null,"Rate Booking",-1)),e("button",{class:"close-btn",onClick:f[0]||(f[0]=a=>l.$emit("close"))},f[5]||(f[5]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",{onSubmit:ce(C,["prevent"]),class:"portfolio-form"},[e("div",Vr,[f[8]||(f[8]=e("label",null,"Rate your experience",-1)),e("div",qr,[e("div",jr,[(n(),d(te,null,ae(5,a=>e("span",{key:a,class:L(["star",{active:a<=v.rating}]),onClick:m=>v.rating=a,onMouseover:m=>_.value=a,onMouseleave:f[1]||(f[1]=m=>_.value=0)},f[7]||(f[7]=[e("i",{class:"fas fa-star"},null,-1)]),42,zr)),64))]),e("span",Gr,r(A.value),1)])]),e("div",Jr,[f[9]||(f[9]=e("label",{for:"description"},"Write Review",-1)),O(e("textarea",{id:"description","onUpdate:modelValue":f[2]||(f[2]=a=>v.review=a),required:"",rows:"4",placeholder:"Enter Review"},null,512),[[Y,v.review]])]),e("div",Wr,[e("button",{type:"button",class:"cancel-btn",onClick:f[3]||(f[3]=a=>l.$emit("close"))},"Cancel"),e("button",{type:"submit",class:"submit-btn",disabled:k.value},[k.value?(n(),d("i",Hr)):N("",!0),E(" "+r(k.value?"Adding...":"Submit Rating"),1)],8,Qr)])],32)])]))}},Bt=ne(Yr,[["__scopeId","data-v-e3cc7385"]]);const Zr={class:"modal-content"},Kr={class:"modal-header"},Xr={class:"modal-body"},ed={class:"message"},td={class:"modal-actions"},sd={__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0},type:{type:String,default:"warning",validator:S=>["warning","danger","info","success"].includes(S)},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"}},setup(S){const s=S,c=ee(()=>({warning:"fa-exclamation-triangle",danger:"fa-exclamation-circle",info:"fa-info-circle",success:"fa-check-circle"})[s.type]);return(t,i)=>(n(),d("div",{class:"modal-overlay",onClick:i[3]||(i[3]=ce(v=>t.$emit("close"),["self"]))},[e("div",Zr,[e("div",Kr,[e("h2",null,r(S.title),1),e("button",{class:"close-btn",onClick:i[0]||(i[0]=v=>t.$emit("close"))},i[4]||(i[4]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Xr,[e("div",{class:L(["icon-container",S.type])},[e("i",{class:L(["fas",c.value])},null,2)],2),e("p",ed,r(S.message),1)]),e("div",td,[e("button",{class:"cancel-btn",onClick:i[1]||(i[1]=v=>t.$emit("close"))},r(S.cancelText),1),e("button",{class:L(["confirm-btn",S.type]),onClick:i[2]||(i[2]=v=>t.$emit("confirm"))},r(S.confirmText),3)])])]))}},Ie=ne(sd,[["__scopeId","data-v-a84c974c"]]);const ad={class:"modal-content"},od={class:"modal-header"},nd={class:"edit-form"},ld={class:"form-section"},id=["src","alt"],rd={class:"section"},dd={class:"details"},ud={class:"section"},cd={class:"details"},pd={class:"section"},vd={class:"details"},md={class:"section"},fd={class:"payment-summary"},gd={class:"summary-item"},yd={class:"summary-item"},bd={class:"text-success"},hd={key:0,class:"summary-item"},kd={class:"text-success"},_d={key:1,class:"summary-item"},$d={class:"text-danger"},wd={class:"payment-history"},Cd={key:0},Pd={key:1,class:"no-payments"},Ad={key:0,class:"section"},Td={class:"details"},Sd={class:"cancellation-info"},xd={class:"info-row"},Ed={class:"status-badge cancelled"},Id={class:"info-row"},Dd={class:"info-row"},Md={key:0,class:"cancellation-reason"},Nd={key:1,class:"cancellation-reason no-reason"},Fd={class:"form-actions"},st="/images/gcash-logo.png",Bd={__name:"ViewBookingsModal",props:{booking:{type:Object,required:!0}},emits:["close","update"],setup(S,{emit:s}){const c=S,t=s;ye();const i=g([]),v=g([]);g(!1);const w=g([]),k=g(0),_=ee(()=>k.value>i.value.total_price),b=ee(()=>_.value?k.value-i.value.total_price:0),C=ee(()=>!i.value.total_price||_.value?0:i.value.total_price-k.value);ee(()=>i.value.find(R=>R.id===c.booking.id));const A=R=>R==null||isNaN(R)?"0.00":Number(R).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),l=g(null),f=()=>{l.value&&(l.value.src=st)},a=R=>{if(!R)return st;if(R.startsWith("http"))return R;try{return`/storage/${R.replace(/^\/storage\//,"")}`}catch(x){return console.error("Error getting image URL:",x),st}},m=async()=>{try{const R=await oe.get(`http://127.0.0.1:8000/api/get-booking-by-id/${c.booking.id}`);console.log("Booking data:",R.data),i.value={...R.data,status:R.data.status||"",cancellation_reason:R.data.cancellation_reason||"",cancelled_at:R.data.cancelled_at||null},v.value=R.data.package||{package_name:"",package_image:"",package_price:0,package_type:"",package_inclusion:[]},console.log("Processed booking data:",i.value),console.log("Processed package data:",v.value)}catch(R){console.error("Error fetching booking:",R),i.value={},v.value={package_name:"",package_image:"",package_price:0,package_type:"",package_inclusion:[]}}},$=R=>R?new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",T=R=>{if(!R)return"";const x=R.includes("T")?R.split("T")[1]:R;return new Date(`2000-01-01T${x}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},h=async()=>{try{const R=await oe.get(`http://127.0.0.1:8000/api/bookings/${c.booking.id}/payments`);w.value=R.data.payments||[],k.value=R.data.total_paid||0}catch(R){console.error("Error fetching payments:",R),w.value=[],k.value=0}},K=async()=>{try{const{value:R}=await Z.fire({title:"Cancel Booking",html:`
          <div class="feedback-form">
            <label for="cancellation-reason">Please provide a reason for cancellation:</label>
            <textarea 
              id="cancellation-reason" 
              class="swal2-textarea" 
              placeholder="Enter detailed reason for cancellation..."
              rows="4"
            ></textarea>
          </div>
        `,showCancelButton:!0,confirmButtonText:"Yes, cancel booking",cancelButtonText:"No, keep booking",confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",preConfirm:()=>{const x=document.getElementById("cancellation-reason").value;return x.trim()?{reason:x.trim()}:(Z.showValidationMessage("Please provide a reason for cancellation"),!1)}});R&&(console.log("Sending cancellation request with reason:",R.reason),(await oe.post("http://127.0.0.1:8000/api/update-booking",{id:c.booking.id,status:"cancelled",cancellation_reason:R.reason,cancelled_at:new Date().toISOString()},{headers:{"Content-Type":"application/json"}})).status===200&&(await m(),await Z.fire({icon:"success",title:"Booking Cancelled Successfully",html:`
              <div class="cancellation-summary">
                <p>The booking has been cancelled.</p>
                <p><strong>Cancellation Reason:</strong></p>
                <p class="reason-text">${R.reason}</p>
              </div>
            `,confirmButtonColor:"#3085d6"}),t("update")))}catch(R){console.error("Error cancelling booking:",R),Z.fire({icon:"error",title:"Error",text:"Failed to cancel booking. Please try again.",confirmButtonColor:"#dc3545"})}};me(async()=>{await m(),await h()}),Pe(i,R=>{console.log("Bookings data changed:",R)},{deep:!0});const U=ee(()=>{var x,y;const R=((y=(x=i.value)==null?void 0:x.status)==null?void 0:y.toLowerCase())==="cancelled";return console.log("Is booking cancelled?",R),R}),D=ee(()=>{var R;if(!((R=v.value)!=null&&R.package_inclusion))return[];try{return Array.isArray(v.value.package_inclusion)?v.value.package_inclusion:JSON.parse(v.value.package_inclusion)}catch(x){return console.error("Error parsing package inclusions:",x),[]}});return(R,x)=>{var y,u,I,F,z,V;return n(),d("div",{class:"modal-overlay",onClick:x[2]||(x[2]=ce(B=>R.$emit("close"),["self"]))},[e("div",ad,[e("div",od,[x[4]||(x[4]=e("h2",null,"Booking Details",-1)),e("button",{class:"close-btn",onClick:x[0]||(x[0]=B=>R.$emit("close"))},x[3]||(x[3]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",nd,[e("div",ld,[e("img",{src:a((y=v.value)==null?void 0:y.package_image),class:"details-image",alt:((u=v.value)==null?void 0:u.package_name)||"Package Image",onError:f,ref_key:"packageImage",ref:l},null,40,id),e("div",rd,[x[9]||(x[9]=e("h3",{class:"section-title"},"Event Details",-1)),e("div",dd,[e("h4",null,[x[5]||(x[5]=E("Event Type: ")),e("span",{class:L(["event-type",(F=(I=v.value)==null?void 0:I.package_type)==null?void 0:F.toLowerCase()])},r((z=v.value)==null?void 0:z.package_type),3)]),e("h4",null,[x[6]||(x[6]=E("Event Date: ")),e("span",null,r($(i.value.event_date)),1)]),e("h4",null,[x[7]||(x[7]=E("Event Time: ")),e("span",null,r(T(i.value.event_time)),1)]),e("h4",null,[x[8]||(x[8]=E("Venue: ")),e("span",null,r(i.value.venue_name),1)])])]),e("div",ud,[x[11]||(x[11]=e("h3",{class:"section-title"},"Package Details",-1)),e("div",cd,[e("h4",null,"Package Price: ₱"+r(A(v.value.package_price)),1),e("h4",null,"Total Price: ₱"+r(A(i.value.total_price)),1),x[10]||(x[10]=e("h4",null,"Package Inclusions:",-1)),e("ul",null,[(n(!0),d(te,null,ae(D.value,(B,J)=>(n(),d("li",{key:J}," - "+r(B),1))),128))])])]),e("div",pd,[x[12]||(x[12]=e("h3",{class:"section-title"},"Customer Details",-1)),e("div",vd,[e("h4",null,"Name: "+r(i.value.full_name),1),e("h4",null,"Email: "+r(i.value.email),1),e("h4",null,"Phone: "+r(i.value.phone),1)])]),e("div",md,[x[18]||(x[18]=e("h3",null,"Payment History",-1)),e("div",fd,[e("div",gd,[x[13]||(x[13]=e("span",null,"Total Amount:",-1)),e("span",null,"₱"+r(A(i.value.total_price||0)),1)]),e("div",yd,[x[14]||(x[14]=e("span",null,"Total Paid:",-1)),e("span",bd,"₱"+r(A(k.value||0)),1)]),_.value?(n(),d("div",hd,[x[15]||(x[15]=e("span",null,"Tip Amount:",-1)),e("span",kd,"₱"+r(A(b.value)),1)])):(n(),d("div",_d,[x[16]||(x[16]=e("span",null,"Remaining Balance:",-1)),e("span",$d,"₱"+r(A(C.value)),1)]))]),e("div",wd,[w.value.length>0?(n(),d("table",Cd,[x[17]||(x[17]=e("thead",null,[e("tr",null,[e("th",null,"Date"),e("th",null,"Amount"),e("th",null,"Type"),e("th",null,"Notes")])],-1)),e("tbody",null,[(n(!0),d(te,null,ae(w.value,B=>(n(),d("tr",{key:B.id},[e("td",null,r($(B.created_at)),1),e("td",null,"₱"+r(A(B.amount)),1),e("td",null,r(B.payment_type),1),e("td",null,r(B.notes||"-"),1)]))),128))])])):(n(),d("div",Pd," No payments recorded yet "))])]),U.value?(n(),d("div",Ad,[x[22]||(x[22]=e("h3",{class:"section-title"},"Cancellation Details",-1)),e("div",Td,[e("div",Sd,[e("div",xd,[x[19]||(x[19]=e("h4",null,"Status:",-1)),e("span",Ed,r(i.value.status),1)]),e("div",Id,[x[20]||(x[20]=e("h4",null,"Cancelled On:",-1)),e("span",null,r(i.value.cancelled_at?$(i.value.cancelled_at):"Not specified"),1)]),e("div",Dd,[x[21]||(x[21]=e("h4",null,"Reason for Cancellation:",-1)),i.value.cancellation_reason?(n(),d("div",Md,r(i.value.cancellation_reason),1)):(n(),d("div",Nd," No reason provided "))])])])])):N("",!0)]),e("div",Fd,[((V=i.value.status)==null?void 0:V.toLowerCase())==="pending"?(n(),d("button",{key:0,type:"button",class:"cancel-booking-btn",onClick:K}," Cancel Booking ")):N("",!0),e("button",{type:"button",class:"cancel-btn",onClick:x[1]||(x[1]=B=>R.$emit("close"))},"Okay")])])])])}}},Ut=ne(Bd,[["__scopeId","data-v-1bbaef0b"]]);const Ud={class:"booking-history",style:{"margin-top":"5rem"}},Rd={class:"history-content"},Ld={class:"page-header"},Od={class:"header-actions"},Vd={class:"search-bar"},qd={class:"filters"},jd={class:"table-container"},zd={class:"date-info"},Gd={class:"date"},Jd={key:0,class:"time"},Wd={key:0,class:"invalid-date-warning"},Qd={class:"action-buttons"},Hd=["onClick"],Yd=["onClick"],Zd={class:"pagination"},Kd=["disabled"],Xd={class:"page-info"},eu=["disabled"],at=10,tu={__name:"bookingUserManage",setup(S){const{user:s,token:c}=ye();_e();const t=g([]),i=g([]),v=g(""),w=g(""),k=g(""),_=g(1),b=g("eventDate"),C=g("desc"),A=g(!1),l=g(!1),f=g(!1),a=g(!1),m=g(null),$=ee(()=>t.value.filter(P=>{const p=v.value===""||P.id.toString().includes(v.value.toLowerCase()),o=w.value===""||P.status.toLowerCase()===w.value.toLowerCase(),W=k.value===""||P.package.package_type.toLowerCase()===k.value.toLowerCase();return p&&o&&W})),T=ee(()=>{const P=[...$.value].sort((p,o)=>b.value==="eventDate"?new Date(p[b.value])-new Date(o[b.value]):b.value==="amount"?p[b.value]-o[b.value]:p[b.value].localeCompare(o[b.value]));return C.value==="desc"?P.reverse():P}),h=ee(()=>{const P=(_.value-1)*at,p=P+at;return T.value.slice(P,p)}),K=ee(()=>Math.ceil($.value.length/at)),U=async()=>{try{const P=JSON.parse(localStorage.getItem("user_info")),p=await oe.get(`http://127.0.0.1:8000/api/bookings/user/${P.id}`);t.value=p.data.bookings,console.log(t.value)}catch(P){console.error("Error fetching bookings:",P)}},D=async()=>{try{const P=JSON.parse(localStorage.getItem("user_info")),p=await oe.get(`http://127.0.0.1:8000/api/get-all-ratings/${P.id}`);i.value=p.data.ratings}catch(P){console.error("Error fetching ratings:",P)}},R=()=>{_.value=1},x=P=>{b.value===P?C.value=C.value==="asc"?"desc":"asc":(b.value=P,C.value="asc")},y=P=>b.value!==P?"fa-sort":C.value==="asc"?"fa-sort-up":"fa-sort-down",u=P=>{_.value=P},I=P=>{if(!P)return"No date set";try{const p=new Date(P);return isNaN(p.getTime())?"Invalid date":p.toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"})}catch(p){return console.error("Error formatting date:",p),"Invalid date"}},F=P=>{if(!P)return"";try{if(/^\d{2}:\d{2}:\d{2}$/.test(P)){const[o,W]=P.split(":"),q=new Date;return q.setHours(parseInt(o,10)),q.setMinutes(parseInt(W,10)),q.toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit",hour12:!0})}const p=new Date(`2000-01-01T${P}`);return isNaN(p.getTime())?"":p.toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(p){return console.error("Error formatting time:",p),""}},z=P=>P.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),V=P=>{m.value=P,a.value=!0},B=P=>{const p=P.package.id,o=P.user_id,W=P.id;i.value.some(q=>q.package_id===p&&q.user_id===o&&q.booking_id===W)?Z.fire({title:"Error",text:"You have already rated this booking",icon:"error",confirmButtonText:"OK"}):(m.value=P,f.value=!0)},J=async()=>{try{const{value:P}=await Z.fire({title:"Cancel Booking",html:`
        <div class="feedback-form">
          <label for="cancellation-reason">Please provide a reason for cancellation:</label>
          <textarea 
            id="cancellation-reason" 
            class="swal2-textarea" 
            placeholder="Enter detailed reason for cancellation..."
            rows="4"
          ></textarea>
        </div>
      `,showCancelButton:!0,confirmButtonText:"Yes, cancel booking",cancelButtonText:"No, keep booking",confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",preConfirm:()=>{const p=document.getElementById("cancellation-reason").value;return p.trim()?{reason:p.trim()}:(Z.showValidationMessage("Please provide a reason for cancellation"),!1)}});P&&(await oe.post("http://127.0.0.1:8000/api/update-booking",{id:m.value.id,status:"cancelled",cancellation_reason:P.reason,cancelled_at:new Date().toISOString()},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.value}`}})).status===200&&(Z.fire({icon:"success",title:"Booking Cancelled",html:`
            <div class="cancellation-summary">
              <p>Your booking has been cancelled successfully.</p>
              <p><strong>Cancellation Reason:</strong></p>
              <p class="reason-text">${P.reason}</p>
            </div>
          `}),await U(),l.value=!1)}catch(P){console.error("Error cancelling booking:",P),Z.fire({icon:"error",title:"Error",text:"Failed to cancel booking. Please try again."})}},G=P=>{m.value&&(m.value.package={...m.value.package,rating:P.rating,reviews_count:P.reviews_count}),f.value=!1},Q=ee(()=>!!localStorage.getItem("token")),H=ee(()=>JSON.parse(localStorage.getItem("user_info")||"{}").id);return me(async()=>{await U(),await D()}),(P,p)=>(n(),d("div",Ud,[e("main",Rd,[e("div",Ld,[p[17]||(p[17]=e("h1",null,"My Booking History",-1)),e("div",Od,[e("div",Vd,[p[14]||(p[14]=e("i",{class:"fas fa-search"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=o=>v.value=o),placeholder:"Search bookings...",onInput:R},null,544),[[Y,v.value]])]),e("div",qd,[O(e("select",{"onUpdate:modelValue":p[1]||(p[1]=o=>w.value=o)},p[15]||(p[15]=[he('<option value="" data-v-5513873a>All Status</option><option value="pending" data-v-5513873a>Pending</option><option value="confirmed" data-v-5513873a>Confirmed</option><option value="completed" data-v-5513873a>Completed</option><option value="cancelled" data-v-5513873a>Cancelled</option>',5)]),512),[[ue,w.value]]),O(e("select",{"onUpdate:modelValue":p[2]||(p[2]=o=>k.value=o)},p[16]||(p[16]=[he('<option value="" data-v-5513873a>All Event Types</option><option value="wedding" data-v-5513873a>Wedding</option><option value="debut" data-v-5513873a>Debut</option><option value="christening" data-v-5513873a>Christening</option><option value="party" data-v-5513873a>Party</option><option value="other" data-v-5513873a>Other</option>',6)]),512),[[ue,k.value]])])])]),e("div",jd,[e("table",null,[e("thead",null,[e("tr",null,[e("th",{onClick:p[3]||(p[3]=o=>x("id"))},[p[18]||(p[18]=E(" Booking ID ")),e("i",{class:L(["fas",y("id")])},null,2)]),e("th",{onClick:p[4]||(p[4]=o=>x("eventType"))},[p[19]||(p[19]=E(" Event Type ")),e("i",{class:L(["fas",y("eventType")])},null,2)]),e("th",{onClick:p[5]||(p[5]=o=>x("eventDate"))},[p[20]||(p[20]=E(" Event Date ")),e("i",{class:L(["fas",y("eventDate")])},null,2)]),e("th",{onClick:p[6]||(p[6]=o=>x("status"))},[p[21]||(p[21]=E(" Status ")),e("i",{class:L(["fas",y("status")])},null,2)]),e("th",{onClick:p[7]||(p[7]=o=>x("amount"))},[p[22]||(p[22]=E(" Amount ")),e("i",{class:L(["fas",y("amount")])},null,2)]),p[23]||(p[23]=e("th",null,"Actions",-1))])]),e("tbody",null,[(n(!0),d(te,null,ae(h.value,o=>(n(),d("tr",{key:o.id},[e("td",null,"BOOKING ID: #"+r(o.id),1),e("td",null,[e("span",{class:L(["event-type",o.package.package_type.toLowerCase()])},r(o.package.package_type),3)]),e("td",null,[e("div",zd,[e("span",Gd,r(I(o.event_date)),1),o.event_time?(n(),d("span",Jd,r(F(o.event_time)),1)):N("",!0)]),o.event_date&&isNaN(new Date(o.event_date).getTime())?(n(),d("span",Wd," Please contact admin to update event date ")):N("",!0)]),e("td",null,[e("span",{class:L(["status text-capitalize",o.status.toLowerCase()])},r(o.status),3)]),e("td",null,"₱"+r(z(o.total_price)),1),e("td",null,[e("div",Qd,[e("button",{onClick:W=>V(o),class:"btn-action view"},p[24]||(p[24]=[e("i",{class:"fas fa-eye"},null,-1)]),8,Hd),o.status.toLowerCase()==="completed"?(n(),d("button",{key:0,onClick:W=>B(o),class:"btn-action check"},p[25]||(p[25]=[e("i",{class:"fas fa-star"},null,-1)]),8,Yd)):N("",!0)])])]))),128))])])]),e("div",Zd,[e("button",{disabled:_.value===1,onClick:p[8]||(p[8]=o=>u(_.value-1)),class:"page-btn"},p[26]||(p[26]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Kd),e("span",Xd," Page "+r(_.value)+" of "+r(K.value),1),e("button",{disabled:_.value===K.value,onClick:p[9]||(p[9]=o=>u(_.value+1)),class:"page-btn"},p[27]||(p[27]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,eu)])]),A.value?(n(),de(Ft,{key:0,booking:m.value,onClose:p[10]||(p[10]=o=>A.value=!1)},null,8,["booking"])):N("",!0),l.value?(n(),de(Ie,{key:1,title:"Cancel Booking",message:"Are you sure you want to cancel this booking? This action cannot be undone.",onConfirm:J,onClose:p[11]||(p[11]=o=>l.value=!1)})):N("",!0),f.value?(n(),de(Bt,{key:2,booking:m.value,onClose:p[12]||(p[12]=o=>f.value=!1),onRatingAdded:G},null,8,["booking"])):N("",!0),a.value?(n(),de(Ut,{key:3,booking:m.value,onClose:p[13]||(p[13]=o=>a.value=!1)},null,8,["booking"])):N("",!0),Q.value?(n(),de(ct,{key:4,"current-user-id":H.value},null,8,["current-user-id"])):N("",!0)]))}},su=ne(tu,[["__scopeId","data-v-5513873a"]]);const au={class:"auth-page"},ou={class:"auth-container"},nu={class:"auth-card"},lu={class:"auth-header"},iu=["src"],ru={class:"form-row"},du={class:"form-group"},uu={class:"input-group"},cu={key:0,class:"error-message"},pu={class:"form-group"},vu={class:"input-group"},mu={key:0,class:"error-message"},fu={class:"form-group"},gu={class:"input-group"},yu={key:0,class:"error-message"},bu={class:"form-group"},hu={class:"input-group"},ku={key:0,class:"error-message"},_u={class:"form-group"},$u={class:"input-group"},wu=["type"],Cu={key:0,class:"error-message"},Pu={class:"password-requirements"},Au={class:"form-group"},Tu={class:"input-group"},Su=["type"],xu={key:0,class:"error-message"},Eu={class:"form-group"},Iu={class:"checkbox-label"},Du=["disabled"],Mu={key:0,class:"error-message"},Nu=["disabled"],Fu={class:"auth-footer"},Bu={__name:"RegisterPage",setup(S){_e();const{register:s}=ye(),c=g(!1),t=g(!1),{values:i,errors:v,touched:w,validate:k,validateAll:_,handleBlur:b,isValid:C,getFieldError:A}=Ye({first_name:"",last_name:"",email:"",phone_number:"",password:"",confirmPassword:"",termsAccepted:!1}),l=g([{text:"At least 6 characters",met:!1},{text:"Contains at least one letter",met:!1},{text:"Contains at least one number",met:!1}]),f=T=>{l.value[0].met=T.length>=6,l.value[1].met=/[A-Za-z]/.test(T),l.value[2].met=/\d/.test(T)};Pe(()=>i.value.password,T=>{f(T||"")});const a=async()=>{var T,h,K;try{if(!i.value.first_name||!i.value.last_name||!i.value.email||!i.value.phone_number||!i.value.password||!i.value.confirmPassword){await Z.fire({icon:"error",title:"Validation Error",text:"Please fill in all required fields",confirmButtonColor:"#d33",confirmButtonText:"Try Again"});return}if(i.value.password.length<6){await Z.fire({icon:"error",title:"Password Error",text:"Password must be at least 6 characters long",confirmButtonColor:"#d33",confirmButtonText:"Try Again"});return}if(i.value.password!==i.value.confirmPassword){await Z.fire({icon:"error",title:"Password Error",text:"Passwords do not match",confirmButtonColor:"#d33",confirmButtonText:"Try Again"});return}if(!i.value.termsAccepted){await Z.fire({icon:"error",title:"Terms & Conditions",text:"Please accept the Terms and Conditions to continue",confirmButtonColor:"#d33",confirmButtonText:"Try Again"});return}Z.fire({title:"Creating Account...",text:"Please wait",allowOutsideClick:!1,didOpen:()=>{Z.showLoading()}});const U={first_name:i.value.first_name,last_name:i.value.last_name,email:i.value.email,phone_number:i.value.phone_number,password:i.value.password,confirm_password:i.value.confirmPassword},D=await s(U);if(D.data&&D.data.status===200)await Z.fire({icon:"success",title:"Success!",text:"Your account has been created successfully.",confirmButtonColor:"#3085d6",confirmButtonText:"Okay"});else throw new Error(((T=D.data)==null?void 0:T.message)||"Registration failed")}catch(U){console.error("Registration error:",U);let D="Failed to create account. Please try again.";(K=(h=U.response)==null?void 0:h.data)!=null&&K.message&&(D=Array.isArray(U.response.data.message)?U.response.data.message.join("<br>"):U.response.data.message),await Z.fire({icon:"error",title:"Registration Failed",html:D,confirmButtonColor:"#d33",confirmButtonText:"Try Again"})}},{isDarkMode:m}=He(),$=ee(()=>m()?new URL("/assets/logo2-da863cb0.png",self.location).href:new URL("/assets/logo1-89c8d4b1.png",self.location).href);return(T,h)=>{const K=ke("router-link");return n(),d("div",au,[e("div",ou,[e("div",nu,[e("div",lu,[pe(K,{to:"/"},{default:ve(()=>[e("img",{src:$.value,alt:"Razz Rell Events",class:"auth-logo"},null,8,iu)]),_:1}),h[17]||(h[17]=e("h1",null,"Create Account",-1)),h[18]||(h[18]=e("p",null,"Join us to start planning your events",-1))]),e("form",{onSubmit:ce(a,["prevent"]),class:"auth-form"},[e("div",ru,[e("div",du,[h[20]||(h[20]=e("label",{for:"first_name"},"First Name",-1)),e("div",uu,[h[19]||(h[19]=e("i",{class:"fas fa-user"},null,-1)),O(e("input",{type:"text",id:"first_name","onUpdate:modelValue":h[0]||(h[0]=U=>M(i).first_name=U),onBlur:h[1]||(h[1]=U=>M(b)("first_name")),class:L({error:M(A)("first_name")}),placeholder:"Enter first name",autocomplete:"given-name"},null,34),[[Y,M(i).first_name]])]),M(A)("first_name")?(n(),d("span",cu,r(M(A)("first_name")),1)):N("",!0)]),e("div",pu,[h[22]||(h[22]=e("label",{for:"last_name"},"Last Name",-1)),e("div",vu,[h[21]||(h[21]=e("i",{class:"fas fa-user"},null,-1)),O(e("input",{type:"text",id:"last_name","onUpdate:modelValue":h[2]||(h[2]=U=>M(i).last_name=U),onBlur:h[3]||(h[3]=U=>M(b)("last_name")),class:L({error:M(A)("last_name")}),placeholder:"Enter last name",autocomplete:"family-name"},null,34),[[Y,M(i).last_name]])]),M(A)("last_name")?(n(),d("span",mu,r(M(A)("last_name")),1)):N("",!0)])]),e("div",fu,[h[24]||(h[24]=e("label",{for:"email"},"Email",-1)),e("div",gu,[h[23]||(h[23]=e("i",{class:"fas fa-envelope"},null,-1)),O(e("input",{type:"email",id:"email","onUpdate:modelValue":h[4]||(h[4]=U=>M(i).email=U),onBlur:h[5]||(h[5]=U=>M(b)("email")),class:L({error:M(A)("email")}),placeholder:"Enter your email",autocomplete:"email"},null,34),[[Y,M(i).email]])]),M(A)("email")?(n(),d("span",yu,r(M(A)("email")),1)):N("",!0)]),e("div",bu,[h[26]||(h[26]=e("label",{for:"phone"},"Phone Number",-1)),e("div",hu,[h[25]||(h[25]=e("i",{class:"fas fa-phone"},null,-1)),O(e("input",{type:"tel",id:"phone","onUpdate:modelValue":h[6]||(h[6]=U=>M(i).phone_number=U),onBlur:h[7]||(h[7]=U=>M(b)("phone")),class:L({error:M(A)("phone_number")}),placeholder:"Enter phone number (11 digits)",autocomplete:"tel",pattern:"[0-9]{11}",inputmode:"numeric",maxlength:"11",onInput:h[8]||(h[8]=U=>M(i).phone_number=M(i).phone_number.replace(/\D/g,""))},null,34),[[Y,M(i).phone_number]])]),M(A)("phone")?(n(),d("span",ku,r(M(A)("phone")),1)):N("",!0)]),e("div",_u,[h[29]||(h[29]=e("label",{for:"password"},"Password",-1)),e("div",$u,[h[27]||(h[27]=e("i",{class:"fas fa-lock"},null,-1)),O(e("input",{type:c.value?"text":"password",id:"password","onUpdate:modelValue":h[9]||(h[9]=U=>M(i).password=U),onBlur:h[10]||(h[10]=U=>M(b)("password")),class:L({error:M(A)("password")}),placeholder:"Create a password",autocomplete:"new-password"},null,42,wu),[[Se,M(i).password]]),e("button",{type:"button",class:"toggle-password",onClick:h[11]||(h[11]=U=>c.value=!c.value)},[e("i",{class:L(["fas",c.value?"fa-eye-slash":"fa-eye"])},null,2)])]),M(A)("password")?(n(),d("span",Cu,r(M(A)("password")),1)):N("",!0),e("div",Pu,[h[28]||(h[28]=e("p",{class:"requirements-title"},"Password must have:",-1)),e("ul",null,[(n(!0),d(te,null,ae(l.value,(U,D)=>(n(),d("li",{key:D,class:L({met:U.met})},[e("i",{class:L(["fas",U.met?"fa-check":"fa-times"])},null,2),E(" "+r(U.text),1)],2))),128))])])]),e("div",Au,[h[31]||(h[31]=e("label",{for:"confirmPassword"},"Confirm Password",-1)),e("div",Tu,[h[30]||(h[30]=e("i",{class:"fas fa-lock"},null,-1)),O(e("input",{type:t.value?"text":"password",id:"confirmPassword","onUpdate:modelValue":h[12]||(h[12]=U=>M(i).confirmPassword=U),onBlur:h[13]||(h[13]=U=>M(b)("confirmPassword")),class:L({error:M(A)("confirmPassword")}),placeholder:"Confirm your password",autocomplete:"new-password"},null,42,Su),[[Se,M(i).confirmPassword]]),e("button",{type:"button",class:"toggle-password",onClick:h[14]||(h[14]=U=>t.value=!t.value)},[e("i",{class:L(["fas",t.value?"fa-eye-slash":"fa-eye"])},null,2)])]),M(A)("confirmPassword")?(n(),d("span",xu,r(M(A)("confirmPassword")),1)):N("",!0)]),e("div",Eu,[e("label",Iu,[O(e("input",{type:"checkbox","onUpdate:modelValue":h[15]||(h[15]=U=>M(i).termsAccepted=U),onBlur:h[16]||(h[16]=U=>M(b)("termsAccepted")),disabled:!M(C)},null,40,Du),[[$e,M(i).termsAccepted]]),h[32]||(h[32]=E(" I agree to the ")),h[33]||(h[33]=e("a",{href:"/terms",target:"_blank"},"Terms of Service",-1)),h[34]||(h[34]=E(" and ")),h[35]||(h[35]=e("a",{href:"/privacy",target:"_blank"},"Privacy Policy",-1))]),M(A)("termsAccepted")?(n(),d("span",Mu,r(M(A)("termsAccepted")),1)):N("",!0)]),e("button",{type:"submit",class:"submit-btn",disabled:!M(i).termsAccepted},h[36]||(h[36]=[e("span",null,"Create Account",-1)]),8,Nu)],32),e("div",Fu,[h[38]||(h[38]=e("p",null,"Already have an account?",-1)),pe(K,{to:"/login",class:"login-link"},{default:ve(()=>h[37]||(h[37]=[E(" Sign in ")])),_:1})])])])])}}},Uu=ne(Bu,[["__scopeId","data-v-715384d5"]]);const Ru={class:"auth-page"},Lu={class:"auth-container"},Ou={class:"auth-card"},Vu={class:"auth-header"},qu={class:"form-group"},ju={class:"input-group"},zu={key:0,class:"error-message"},Gu=["disabled"],Ju={class:"auth-footer"},Wu={__name:"ForgotPasswordPage",setup(S){const s=_e(),{forgotPassword:c}=ye(),t=g(""),i=g(""),v=g(!1),w=async()=>{try{if(i.value="",v.value=!0,!t.value){i.value="Email is required";return}await c(t.value)&&s.push("/login")}catch(k){console.error("Error in handleSubmit:",k)}finally{v.value=!1}};return(k,_)=>{const b=ke("router-link");return n(),d("div",Ru,[e("div",Lu,[e("div",Ou,[e("div",Vu,[pe(b,{to:"/"},{default:ve(()=>_[1]||(_[1]=[e("img",{src:pt,alt:"Razz Rell Events",class:"auth-logo"},null,-1)])),_:1}),_[2]||(_[2]=e("h1",null,"Reset Password",-1)),_[3]||(_[3]=e("p",null,"Enter your email to receive password reset instructions",-1))]),e("form",{onSubmit:ce(w,["prevent"]),class:"auth-form"},[e("div",qu,[_[5]||(_[5]=e("label",{for:"email"},"Email",-1)),e("div",ju,[_[4]||(_[4]=e("i",{class:"fas fa-envelope"},null,-1)),O(e("input",{type:"email",id:"email","onUpdate:modelValue":_[0]||(_[0]=C=>t.value=C),class:L({error:i.value}),placeholder:"Enter your email",autocomplete:"email",required:""},null,2),[[Y,t.value]])]),i.value?(n(),d("span",zu,r(i.value),1)):N("",!0)]),e("button",{type:"submit",class:"submit-btn",disabled:!t.value||v.value},r(v.value?"Sending...":"Send Reset Link"),9,Gu)],32),e("div",Ju,[_[7]||(_[7]=e("p",null,"Remember your password?",-1)),pe(b,{to:"/login",class:"login-link"},{default:ve(()=>_[6]||(_[6]=[E("Back to login")])),_:1})])])])])}}},Qu=ne(Wu,[["__scopeId","data-v-5d628c5c"]]);const Hu={class:"auth-page"},Yu={class:"auth-container"},Zu={class:"auth-card"},Ku={class:"auth-header"},Xu={class:"form-group"},ec={class:"input-group"},tc=["type"],sc={key:0,class:"error-message"},ac={class:"form-group"},oc={class:"input-group"},nc=["type"],lc={key:0,class:"error-message"},ic={class:"password-requirements"},rc=["disabled"],dc={key:0,class:"fas fa-spinner fa-spin"},uc={key:1},cc={class:"auth-footer"},pc={__name:"ResetPasswordPage",setup(S){const s=Re(),c=_e(),{changePassword:t}=ye(),{success:i,error:v}=we(),{isLoading:w,withLoading:k}=Le(),_=g(!1),b=g(!1),{values:C,errors:A,touched:l,validate:f,validateAll:a,handleBlur:m,isValid:$,getFieldError:T}=Ye({password:"",confirmPassword:""}),h=ee(()=>/[A-Z]/.test(C.value.password)),K=ee(()=>/[a-z]/.test(C.value.password)),U=ee(()=>/\d/.test(C.value.password)),D=ee(()=>/[!@#$%^&*(),.?":{}|<>]/.test(C.value.password)),R=ee(()=>C.value.password.length>=8),x={password:["required","password"],confirmPassword:["required",["confirmPassword",C.value.password]]},y=async()=>{if(a(x))try{const u=s.query.token;if(!u){v("Invalid or expired reset token");return}const I=await k("reset-password",()=>t({token:u,password:C.value.password}));I&&(I("Your password has been successfully reset."),c.push("/login"))}catch{v("Failed to reset password. Please try again.")}};return(u,I)=>{const F=ke("router-link");return n(),d("div",Hu,[e("div",Yu,[e("div",Zu,[e("div",Ku,[pe(F,{to:"/"},{default:ve(()=>I[6]||(I[6]=[e("img",{src:pt,alt:"Razz Rell Events",class:"auth-logo"},null,-1)])),_:1}),I[7]||(I[7]=e("h1",null,"Set New Password",-1)),I[8]||(I[8]=e("p",null,"Create a new password for your account",-1))]),e("form",{onSubmit:ce(y,["prevent"]),class:"auth-form"},[e("div",Xu,[I[10]||(I[10]=e("label",{for:"password"},"New Password",-1)),e("div",ec,[I[9]||(I[9]=e("i",{class:"fas fa-lock"},null,-1)),O(e("input",{type:_.value?"text":"password",id:"password","onUpdate:modelValue":I[0]||(I[0]=z=>M(C).password=z),onBlur:I[1]||(I[1]=z=>M(m)("password")),class:L({error:M(T)("password")}),placeholder:"Enter new password",autocomplete:"new-password"},null,42,tc),[[Se,M(C).password]]),e("button",{type:"button",class:"toggle-password",onClick:I[2]||(I[2]=z=>_.value=!_.value)},[e("i",{class:L(["fas",_.value?"fa-eye-slash":"fa-eye"])},null,2)])]),M(T)("password")?(n(),d("span",sc,r(M(T)("password")),1)):N("",!0)]),e("div",ac,[I[12]||(I[12]=e("label",{for:"confirmPassword"},"Confirm New Password",-1)),e("div",oc,[I[11]||(I[11]=e("i",{class:"fas fa-lock"},null,-1)),O(e("input",{type:b.value?"text":"password",id:"confirmPassword","onUpdate:modelValue":I[3]||(I[3]=z=>M(C).confirmPassword=z),onBlur:I[4]||(I[4]=z=>M(m)("confirmPassword")),class:L({error:M(T)("confirmPassword")}),placeholder:"Confirm new password",autocomplete:"new-password"},null,42,nc),[[Se,M(C).confirmPassword]]),e("button",{type:"button",class:"toggle-password",onClick:I[5]||(I[5]=z=>b.value=!b.value)},[e("i",{class:L(["fas",b.value?"fa-eye-slash":"fa-eye"])},null,2)])]),M(T)("confirmPassword")?(n(),d("span",lc,r(M(T)("confirmPassword")),1)):N("",!0)]),e("div",ic,[I[18]||(I[18]=e("h3",null,"Password Requirements:",-1)),e("ul",null,[e("li",{class:L({met:h.value})},[e("i",{class:L(["fas",h.value?"fa-check":"fa-times"])},null,2),I[13]||(I[13]=E(" At least one uppercase letter "))],2),e("li",{class:L({met:K.value})},[e("i",{class:L(["fas",K.value?"fa-check":"fa-times"])},null,2),I[14]||(I[14]=E(" At least one lowercase letter "))],2),e("li",{class:L({met:U.value})},[e("i",{class:L(["fas",U.value?"fa-check":"fa-times"])},null,2),I[15]||(I[15]=E(" At least one number "))],2),e("li",{class:L({met:D.value})},[e("i",{class:L(["fas",D.value?"fa-check":"fa-times"])},null,2),I[16]||(I[16]=E(" At least one special character "))],2),e("li",{class:L({met:R.value})},[e("i",{class:L(["fas",R.value?"fa-check":"fa-times"])},null,2),I[17]||(I[17]=E(" Minimum 8 characters "))],2)])]),e("button",{type:"submit",class:"submit-btn",disabled:!M($)||M(w)},[M(w)?(n(),d("i",dc)):(n(),d("span",uc,"Reset Password"))],8,rc)],32),e("div",cc,[I[20]||(I[20]=e("p",null,"Remember your password?",-1)),pe(F,{to:"/login",class:"login-link"},{default:ve(()=>I[19]||(I[19]=[E(" Back to login ")])),_:1})])])])])}}},vc=ne(pc,[["__scopeId","data-v-ce5364c4"]]);const mc={name:"MainLayout"},fc={class:"main-layout"};function gc(S,s,c,t,i,v){return n(),d("div",fc,[s[0]||(s[0]=e("header",null,null,-1)),e("main",null,[Dt(S.$slots,"default",{},void 0,!0)]),s[1]||(s[1]=e("footer",null,null,-1))])}const Rt=ne(mc,[["render",gc],["__scopeId","data-v-f7ec7f5e"]]);const yc={class:"modal-header"},bc={class:"modal-body"},hc={class:"sessions-list"},kc={class:"session-info"},_c={class:"device-icon"},$c={class:"session-details"},wc={class:"session-meta"},Cc={class:"location"},Pc={class:"browser"},Ac={class:"ip"},Tc={class:"session-time"},Sc={class:"last-active"},xc={class:"login-time"},Ec={class:"session-actions"},Ic={key:0,class:"current-badge"},Dc=["onClick","disabled"],Mc={key:0,class:"no-sessions"},Nc={class:"modal-footer"},Fc=["disabled"],Bc={__name:"ActiveSessionsModal",props:{sessions:{type:Array,required:!0}},emits:["close","revoke"],setup(S,{emit:s}){const c=S,t=s,{confirm:i}=dt(),{error:v}=we(),w=g({}),k=g(!1),_=ee(()=>c.sessions.some(f=>!f.current)),b=f=>{const a=new Date(f),$=new Date-a;if($<6e4)return"Just now";if($<36e5){const T=Math.floor($/6e4);return`${T} minute${T>1?"s":""} ago`}else if($<864e5){const T=Math.floor($/36e5);return`${T} hour${T>1?"s":""} ago`}else return a.toLocaleDateString()},C=f=>new Date(f).toLocaleString(),A=async f=>{try{await i({title:"Revoke Session",message:`Are you sure you want to revoke this session from ${f.deviceName}?`,confirmText:"Revoke",type:"warning"})&&(w.value[f.id]=!0,await t("revoke",f.id),w.value[f.id]=!1)}catch{v("Failed to revoke session"),w.value[f.id]=!1}},l=async()=>{try{if(await i({title:"Revoke All Sessions",message:"Are you sure you want to revoke all other active sessions? This will sign out all devices except your current one.",confirmText:"Revoke All",type:"warning"})){k.value=!0;const a=c.sessions.filter(m=>!m.current);for(const m of a)await t("revoke",m.id)}}catch{v("Failed to revoke all sessions")}finally{k.value=!1}};return(f,a)=>(n(),d("div",{class:"modal-overlay",onClick:a[3]||(a[3]=m=>f.$emit("close"))},[e("div",{class:"modal-content",onClick:a[2]||(a[2]=ce(()=>{},["stop"]))},[e("div",yc,[a[5]||(a[5]=e("h2",null,"Active Sessions",-1)),e("button",{class:"close-btn",onClick:a[0]||(a[0]=m=>f.$emit("close"))},a[4]||(a[4]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",bc,[e("div",hc,[(n(!0),d(te,null,ae(S.sessions,m=>(n(),d("div",{key:m.id,class:L(["session-item",{current:m.current}])},[e("div",kc,[e("div",_c,[e("i",{class:L(["fas",{"fa-desktop":m.device==="desktop","fa-mobile-alt":m.device==="mobile","fa-tablet-alt":m.device==="tablet"}])},null,2)]),e("div",$c,[e("h3",null,r(m.deviceName),1),e("div",wc,[e("span",Cc,[a[6]||(a[6]=e("i",{class:"fas fa-map-marker-alt"},null,-1)),E(" "+r(m.location),1)]),e("span",Pc,[a[7]||(a[7]=e("i",{class:"fas fa-globe"},null,-1)),E(" "+r(m.browser),1)]),e("span",Ac,[a[8]||(a[8]=e("i",{class:"fas fa-network-wired"},null,-1)),E(" "+r(m.ip),1)])]),e("div",Tc,[e("span",Sc,[a[9]||(a[9]=e("i",{class:"fas fa-clock"},null,-1)),E(" Last active "+r(b(m.lastActive)),1)]),e("span",xc,[a[10]||(a[10]=e("i",{class:"fas fa-sign-in-alt"},null,-1)),E(" Logged in "+r(C(m.loginTime)),1)])])])]),e("div",Ec,[m.current?(n(),d("span",Ic,a[11]||(a[11]=[e("i",{class:"fas fa-check-circle"},null,-1),E(" Current Session ")]))):(n(),d("button",{key:1,class:"revoke-btn",onClick:$=>A(m),disabled:w.value[m.id]},[e("i",{class:L(["fas",w.value[m.id]?"fa-spinner fa-spin":"fa-sign-out-alt"])},null,2),E(" "+r(w.value[m.id]?"Revoking...":"Revoke"),1)],8,Dc))])],2))),128))]),S.sessions.length===0?(n(),d("div",Mc,a[12]||(a[12]=[e("i",{class:"fas fa-laptop-house"},null,-1),e("p",null,"No other active sessions",-1)]))):N("",!0)]),e("div",Nc,[e("button",{class:"revoke-all-btn",onClick:l,disabled:!_.value||k.value},[e("i",{class:L(["fas",k.value?"fa-spinner fa-spin":"fa-sign-out-alt"])},null,2),E(" "+r(k.value?"Revoking All...":"Revoke All Other Sessions"),1)],8,Fc),e("button",{class:"close-btn-secondary",onClick:a[1]||(a[1]=m=>f.$emit("close"))}," Close ")])])]))}},Lt=ne(Bc,[["__scopeId","data-v-d9a34695"]]);g([]);const Uc={class:"profile-page"},Rc={class:"profile-grid"},Lc={class:"profile-card"},Oc={class:"profile-picture-section"},Vc={class:"profile-picture-container"},qc=["src"],jc={class:"profile-picture-overlay"},zc=["src"],Gc={class:"profile-picture-info"},Jc={class:"form-row"},Wc={class:"form-group"},Qc={class:"input-group"},Hc={key:0,class:"error-message"},Yc={class:"form-group"},Zc={class:"input-group"},Kc={key:0,class:"error-message"},Xc={class:"form-group"},ep={class:"input-group"},tp={key:0,class:"error-message"},sp={class:"form-group"},ap={class:"input-group"},op={key:0,class:"error-message"},np={class:"profile-card"},lp={class:"preferences-form"},ip={class:"form-group"},rp={class:"theme-toggle"},dp={class:"form-group"},up={class:"notification-settings"},cp={class:"checkbox-label"},pp={class:"checkbox-label"},vp={class:"checkbox-label"},mp={class:"profile-card"},fp={class:"security-settings"},gp={class:"security-item"},yp={class:"security-info"},bp={key:0,class:"security-item"},hp={class:"input-group"},kp={key:0,class:"error-message"},_p={key:1,class:"security-item"},$p={class:"input-group"},wp={key:0,class:"error-message"},Cp={key:2,class:"security-item"},Pp={class:"security-info"},Ap={key:3,class:"security-item"},Tp={class:"security-info"},ot="@/assets/default-profile.png",Sp={__name:"ProfilePage",setup(S){const s=_e(),{user:c,updateProfile:t,logout:i}=ye(),{success:v,error:w}=we(),{isLoading:k,withLoading:_}=Le(),{confirm:b}=dt(),{currentTheme:C,setTheme:A,isDarkMode:l}=He();ye();const{users:f}=xe(),a=g(!1),m=g(!1),$=g([]),T=g(null),{values:h,validateAll:K,handleBlur:U,isValid:D,getFieldError:R}=Ye({id:"",firstName:"",lastName:"",email:"",phone:"",email_verified_at:"",role:"",status:"",flag:"",password:"",confirmPassword:"",cpassword:"",notifications:{bookingUpdates:!0,reminders:!0,promotions:!1},twoFactorEnabled:!1});ee(()=>{var p;return(p=c.value)!=null&&p.lastPasswordChange?new Date(c.value.lastPasswordChange).toLocaleDateString():"Never"});const x=g(null);g(null);const y=g(null),u=g(null),I=p=>{const o=p.target.files[0];o&&o.type.startsWith("image/")?(y.value=o,u.value=URL.createObjectURL(o),F()):alert("Please select a valid image file.")},F=async()=>{if(!y.value){alert("No image selected!");return}const p=new FormData;p.append("avatar",y.value),p.append("id",h.value.id);try{const o=await oe.post("http://127.0.0.1:8000/api/change-avatar",p,{headers:{"Content-Type":"multipart/form-data"}});localStorage.setItem("user_info",JSON.stringify(o.data.data)),window.location.reload()}catch(o){console.error("Error uploading the image:",o),alert("There was an error uploading the image.")}},z=async()=>{try{const p=JSON.parse(localStorage.getItem("user_info"));if(!p)throw new Error("User information not found");Z.fire({title:"Removing...",text:"Please wait",allowOutsideClick:!1,didOpen:()=>{Z.showLoading()}});const o=new FormData;if(o.append("id",p.id),o.append("first_name",p.first_name||""),o.append("last_name",p.last_name||""),o.append("email",p.email||""),o.append("phone_number",p.phone_number||""),o.append("role",p.role||"user"),o.append("status",p.status||"active"),o.append("flag",p.flag||"0"),o.append("remove_profile_picture","true"),response.data){p.profile_picture=null,localStorage.setItem("user_info",JSON.stringify(p)),x.value=ot;const W=document.getElementById("profile-image");W&&(W.value=""),Z.fire({icon:"success",title:"Success!",text:"Profile photo removed successfully",timer:1500,showConfirmButton:!1}),window.location.reload()}}catch(p){console.error("Error removing profile picture:",p),Z.fire({icon:"error",title:"Error",text:"Failed to remove profile picture. Please try again."})}},V=async()=>{var p;try{Z.fire({title:"Saving Changes...",text:"Please wait",allowOutsideClick:!1,didOpen:()=>{Z.showLoading()}});const o=localStorage.getItem("auth_token");if(!o)throw new Error("Authentication token not found");const W=JSON.parse(localStorage.getItem("user_info")),q=new FormData;q.append("id",W.id),q.append("firstName",W.first_name||""),q.append("lastName",W.last_name||""),q.append("email",W.email||""),q.append("phone",W.phone_number||""),q.append("role",W.role||"user"),q.append("status",W.status||"active"),q.append("flag",W.flag||"0"),h.value.password&&h.value.password===h.value.cpassword&&q.append("password",h.value.password);const j=await oe.post("http://127.0.0.1:8000/api/update-user-info",q,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data",Accept:"application/json"}});if(j.data){const X={...JSON.parse(localStorage.getItem("user_info")),first_name:h.value.firstName,last_name:h.value.lastName,email:h.value.email,phone_number:h.value.phone};(p=j.data.user)!=null&&p.profile_picture&&(X.profile_picture=j.data.user.profile_picture),localStorage.setItem("user_info",JSON.stringify(X)),await Z.fire({icon:"success",title:"Success!",text:"Your profile has been updated successfully.",confirmButtonText:"OK"}),window.location.reload()}}catch(o){console.error("Error saving changes:",o),await Z.fire({icon:"error",title:"Error",text:"Failed to save changes. Please try again.",confirmButtonText:"OK"})}},B=async()=>{try{await b({title:h.value.twoFactorEnabled?"Disable 2FA":"Enable 2FA",message:h.value.twoFactorEnabled?"Are you sure you want to disable two-factor authentication? This will make your account less secure.":"Enable two-factor authentication to add an extra layer of security to your account.",confirmText:h.value.twoFactorEnabled?"Disable":"Enable",type:h.value.twoFactorEnabled?"danger":"warning"})&&(await _("toggle-2fa",()=>f.toggleTwoFactor(!h.value.twoFactorEnabled)),h.value.twoFactorEnabled=!h.value.twoFactorEnabled,v(`Two-factor authentication has been ${h.value.twoFactorEnabled?"enabled":"disabled"}`))}catch{w("Failed to update two-factor authentication")}},J=async()=>{},G=async p=>{try{await _(`revoke-session-${p}`,()=>f.revokeSession(p)),$.value=$.value.filter(o=>o.id!==p),v("Session revoked successfully")}catch{w("Failed to revoke session")}},Q=async()=>{try{const p=await _("export-data",()=>f.exportData()),o=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),W=window.URL.createObjectURL(o),q=document.createElement("a");q.href=W,q.download="my-data.json",q.click(),window.URL.revokeObjectURL(W),v("Data exported successfully")}catch{w("Failed to export data")}},H=async()=>{try{await b({title:"Delete Account",message:"Are you sure you want to delete your account? This action cannot be undone and all your data will be permanently deleted.",confirmText:"Delete Account",type:"danger"})&&(await _("delete-account",()=>f.deleteAccount()),v("Account deleted successfully"),s.push("/login"))}catch{w("Failed to delete account")}},P=()=>{const p=localStorage.getItem("user_info");if(!p){s.push("/login");return}const o=JSON.parse(p);h.value.id=o.id,h.value.firstName=o.first_name,h.value.lastName=o.last_name,h.value.email=o.email,h.value.phone=o.phone_number,h.value.avatar=o.avatar||"portfolios/defaultAvatar.png",o.profile_picture?x.value=o.profile_picture.startsWith("http")?o.profile_picture:`http://127.0.0.1:8000/storage/${o.profile_picture}`:x.value=ot};return me(async()=>{P()}),(p,o)=>(n(),de(Rt,null,{default:ve(()=>{var W;return[e("div",Uc,[e("div",{class:"page-header"},[o[20]||(o[20]=e("h1",null,"Profile Settings",-1)),e("button",{type:"button",class:"save-btn",onClick:V},o[19]||(o[19]=[e("i",{class:"fas fa-save"},null,-1),E(" Save Changes ")]))]),e("div",Rc,[e("div",Lc,[o[32]||(o[32]=e("div",{class:"card-header"},[e("h2",null,"Personal Information")],-1)),e("div",Oc,[e("div",Vc,[e("img",{src:(W=M(h).avatar)!=null&&W.startsWith("images/")?`/src/assets/${M(h).avatar}`:`http://127.0.0.1:8000/storage/${M(h).avatar}`,alt:"Profile Picture",class:"profile-picture"},null,8,qc),e("div",jc,[o[21]||(o[21]=e("label",{for:"profile-image",class:"upload-button"},[e("i",{class:"fas fa-camera"}),e("span",null,"Change Photo")],-1)),e("input",{type:"file",id:"profile-image",accept:"image/*",onChange:I,class:"hidden-input"},null,32),u.value?(n(),d("img",{key:0,src:u.value,alt:"Profile Image Preview"},null,8,zc)):N("",!0)])]),e("div",Gc,[o[23]||(o[23]=e("p",{class:"upload-hint"},"Allowed formats: JPG, PNG. Max size: 2MB",-1)),x.value&&x.value!==ot?(n(),d("button",{key:0,onClick:z,class:"remove-photo-btn"},o[22]||(o[22]=[e("i",{class:"fas fa-trash"},null,-1),E(" Remove Photo ")]))):N("",!0)])]),e("div",Jc,[e("div",Wc,[o[25]||(o[25]=e("label",{for:"firstName"},"First Name",-1)),e("div",Qc,[o[24]||(o[24]=e("i",{class:"fas fa-user"},null,-1)),O(e("input",{type:"text",id:"firstName","onUpdate:modelValue":o[0]||(o[0]=q=>M(h).firstName=q),onBlur:o[1]||(o[1]=q=>M(U)("firstName")),class:L({error:M(R)("firstName")}),placeholder:"Enter first name"},null,34),[[Y,M(h).firstName]])]),M(R)("firstName")?(n(),d("span",Hc,r(M(R)("firstName")),1)):N("",!0)]),e("div",Yc,[o[27]||(o[27]=e("label",{for:"lastName"},"Last Name",-1)),e("div",Zc,[o[26]||(o[26]=e("i",{class:"fas fa-user"},null,-1)),O(e("input",{type:"text",id:"lastName","onUpdate:modelValue":o[2]||(o[2]=q=>M(h).lastName=q),onBlur:o[3]||(o[3]=q=>M(U)("lastName")),class:L({error:M(R)("lastName")}),placeholder:"Enter last name"},null,34),[[Y,M(h).lastName]])]),M(R)("lastName")?(n(),d("span",Kc,r(M(R)("lastName")),1)):N("",!0)])]),e("div",Xc,[o[29]||(o[29]=e("label",{for:"email"},"Email",-1)),e("div",ep,[o[28]||(o[28]=e("i",{class:"fas fa-envelope"},null,-1)),O(e("input",{type:"email",id:"email","onUpdate:modelValue":o[4]||(o[4]=q=>M(h).email=q),onBlur:o[5]||(o[5]=q=>M(U)("email")),class:L({error:M(R)("email")}),placeholder:"Enter email"},null,34),[[Y,M(h).email]])]),M(R)("email")?(n(),d("span",tp,r(M(R)("email")),1)):N("",!0)]),e("div",sp,[o[31]||(o[31]=e("label",{for:"phone"},"Phone Number",-1)),e("div",ap,[o[30]||(o[30]=e("i",{class:"fas fa-phone"},null,-1)),O(e("input",{type:"tel",id:"phone","onUpdate:modelValue":o[6]||(o[6]=q=>M(h).phone=q),onBlur:o[7]||(o[7]=q=>M(U)("phone")),class:L({error:M(R)("phone")}),placeholder:"Enter phone number"},null,34),[[Y,M(h).phone]])]),M(R)("phone")?(n(),d("span",op,r(M(R)("phone")),1)):N("",!0)])]),e("div",np,[o[40]||(o[40]=e("div",{class:"card-header"},[e("h2",null,"Preferences")],-1)),e("div",lp,[e("div",ip,[o[35]||(o[35]=e("label",null,"Theme",-1)),e("div",rp,[e("button",{class:L(["theme-btn",{active:!M(l)}]),onClick:o[8]||(o[8]=q=>M(A)("light"))},o[33]||(o[33]=[e("i",{class:"fas fa-sun"},null,-1),E(" Light ")]),2),e("button",{class:L(["theme-btn",{active:M(l)}]),onClick:o[9]||(o[9]=q=>M(A)("dark"))},o[34]||(o[34]=[e("i",{class:"fas fa-moon"},null,-1),E(" Dark ")]),2)])]),e("div",dp,[o[39]||(o[39]=e("label",null,"Email Notifications",-1)),e("div",up,[e("label",cp,[O(e("input",{type:"checkbox","onUpdate:modelValue":o[10]||(o[10]=q=>M(h).notifications.bookingUpdates=q)},null,512),[[$e,M(h).notifications.bookingUpdates]]),o[36]||(o[36]=E(" Booking updates "))]),e("label",pp,[O(e("input",{type:"checkbox","onUpdate:modelValue":o[11]||(o[11]=q=>M(h).notifications.reminders=q)},null,512),[[$e,M(h).notifications.reminders]]),o[37]||(o[37]=E(" Event reminders "))]),e("label",vp,[O(e("input",{type:"checkbox","onUpdate:modelValue":o[12]||(o[12]=q=>M(h).notifications.promotions=q)},null,512),[[$e,M(h).notifications.promotions]]),o[38]||(o[38]=E(" Promotions and news "))])])])])]),e("div",mp,[o[49]||(o[49]=e("div",{class:"card-header"},[e("h2",null,"Security")],-1)),e("div",fp,[e("div",gp,[e("div",yp,[e("h3",null,r(a.value?"Security":"Password"),1),e("p",null,r(a.value?"":"Last Changed Password "+T.value),1)]),e("button",{class:"action-btn",onClick:o[13]||(o[13]=q=>a.value?a.value=!1:a.value=!0)},r(a.value?"Go to Change Password":"Go to Security"),1)]),a.value==!1?(n(),d("div",bp,[o[42]||(o[42]=e("div",{class:"security-info"},[e("h3",null,"New Password")],-1)),o[43]||(o[43]=e("br",null,null,-1)),e("div",hp,[o[41]||(o[41]=e("i",{class:"fas fa-lock"},null,-1)),O(e("input",{type:"password",id:"password","onUpdate:modelValue":o[14]||(o[14]=q=>M(h).password=q),onBlur:o[15]||(o[15]=q=>M(U)("password")),class:L({error:M(R)("password")}),placeholder:"Enter new password"},null,34),[[Y,M(h).password]])]),M(R)("password")?(n(),d("span",kp,r(M(R)("password")),1)):N("",!0)])):N("",!0),a.value==!1?(n(),d("div",_p,[o[45]||(o[45]=e("div",{class:"security-info"},[e("h3",null,"Confirm Password")],-1)),o[46]||(o[46]=e("br",null,null,-1)),e("div",$p,[o[44]||(o[44]=e("i",{class:"fas fa-lock"},null,-1)),O(e("input",{type:"password",id:"cpassword","onUpdate:modelValue":o[16]||(o[16]=q=>M(h).cpassword=q),onBlur:o[17]||(o[17]=q=>M(U)("cpassword")),class:L({error:M(R)("cpassword")}),placeholder:"Enter new password"},null,34),[[Y,M(h).cpassword]])]),M(R)("password")?(n(),d("span",wp,r(M(R)("password")),1)):N("",!0)])):N("",!0),a.value==!0?(n(),d("div",Cp,[e("div",Pp,[o[47]||(o[47]=e("h3",null,"Two-Factor Authentication",-1)),e("p",null,r(M(h).twoFactorEnabled?"Enabled":"Disabled"),1)]),e("button",{class:L(["action-btn",{"btn-danger":M(h).twoFactorEnabled}]),onClick:B},r(M(h).twoFactorEnabled?"Disable":"Enable"),3)])):N("",!0),a.value==!0?(n(),d("div",Ap,[e("div",Tp,[o[48]||(o[48]=e("h3",null,"Active Sessions",-1)),e("p",null,r($.value.length)+" devices",1)]),e("button",{class:"action-btn btn-danger",onClick:J}," Manage Sessionss ")])):N("",!0)])]),e("div",{class:"profile-card danger-zone"},[o[52]||(o[52]=e("div",{class:"card-header"},[e("h2",null,"Account")],-1)),e("div",{class:"account-actions"},[e("div",{class:"action-item"},[o[50]||(o[50]=e("div",{class:"action-info"},[e("h3",null,"Export Data"),e("p",null,"Download a copy of your personal data")],-1)),e("button",{class:"action-btn",onClick:Q}," Export Data ")]),e("div",{class:"action-item"},[o[51]||(o[51]=e("div",{class:"action-info"},[e("h3",null,"Delete Account"),e("p",null,"Permanently delete your account and all data")],-1)),e("button",{class:"action-btn btn-danger",onClick:H}," Delete Account ")])])])])]),m.value?(n(),de(Lt,{key:0,sessions:$.value,onClose:o[18]||(o[18]=q=>m.value=!1),onRevoke:G},null,8,["sessions"])):N("",!0)]}),_:1}))}},xp=ne(Sp,[["__scopeId","data-v-12523153"]]),et={Wedding:["Professional Event Coordinator","Full Venue Setup and Styling","Complete Catering Service","Professional Photography","Professional Videography","Sound System with DJ","Wedding Cake","Bridal Car","Emcee Services","Complete Table Settings"],Debut:["Professional Event Coordinator","Full Venue Setup and Styling","Complete Catering Service","Professional Photography","Professional Videography","Sound System with DJ","Debut Cake","Emcee Services","Complete Table Settings","18 Roses/Candles Setup"],Christening:["Professional Event Coordinator","Venue Setup and Styling","Complete Catering Service","Professional Photography","Basic Sound System","Christening Cake","Complete Table Settings","Guest Book","Welcome Signage","Basic Decorations"],Party:["Event Coordinator","Basic Venue Setup","Complete Catering Service","Basic Photography","Sound System","Party Cake","Complete Table Settings","Basic Decorations","Party Favors","Welcome Signage"],Other:["Event Coordinator","Basic Venue Setup","Catering Service","Basic Photography","Sound System","Complete Table Settings","Basic Decorations","Welcome Signage"]};const Ep={class:"modal-content"},Ip={class:"modal-header"},Dp={class:"stepper"},Mp={key:0,class:"form-step"},Np={class:"form-group"},Fp={key:0,class:"form-group"},Bp={key:1,class:"form-step"},Up={class:"form-group"},Rp={class:"form-group"},Lp={class:"form-group"},Op={class:"input-group"},Vp={class:"form-group"},qp={class:"input-group"},jp={class:"form-group"},zp={class:"checkbox-group"},Gp={key:0,class:"form-group"},Jp={class:"input-group"},Wp={key:2,class:"form-step"},Qp={class:"form-group"},Hp={class:"form-group"},Yp={class:"inclusions-list"},Zp=["onUpdate:modelValue"],Kp=["onClick"],Xp={class:"form-group"},ev={key:1,class:"image-preview-container"},tv=["src"],sv={key:3,class:"form-step"},av={class:"form-group"},ov={class:"review-details"},nv={class:"review-item"},lv={class:"value"},iv={class:"review-item"},rv={class:"value"},dv={class:"review-item"},uv={class:"value"},cv={class:"review-item"},pv={class:"value"},vv={class:"review-item"},mv={class:"value"},fv={class:"form-actions"},gv=["disabled"],yv={key:0,class:"fas fa-spinner fa-spin"},bv={key:0,class:"cropper-modal-wrapper"},hv={class:"cropper-modal"},kv={class:"cropper-modal-content"},_v={class:"cropper-modal-body"},$v={__name:"AddPackageModal",emits:["close","success"],setup(S,{emit:s}){const c=p=>{let o=0;for(let X=0;X<p.length;X++)o=p.charCodeAt(X)+((o<<5)-o);const W=Math.abs(o)%360,q=25+Math.abs(o)%30,j=85+Math.abs(o)%10;return{background:`hsl(${W}, ${q}%, ${j}%)`,color:`hsl(${W}, ${q+20}%, 25%)`}};ye();const t=s,i=g(1),v=g({name:"",eventType:"",customEventType:"",price:"",additional_price_percentage:"",price_per_day:!1,price_increase_per_day:"",pack:"",customPack:"",description:"",inclusions:[""],image:null}),w=g(null);g([]);const k=g([]),_=g(!1),b=g(!1),C=g(null),A=g(!1),l=g(null),f=g(null),a=()=>{$()&&i.value++},m=()=>{i.value--},$=()=>{switch(i.value){case 1:return v.value.eventType?v.value.eventType==="Other"&&!v.value.customEventType?(Z.fire({icon:"error",title:"Required Fields",text:"Please enter a custom event type"}),!1):!0:(Z.fire({icon:"error",title:"Required Fields",text:"Please select an event type"}),!1);case 2:return!v.value.name||!v.value.price||!v.value.pack?(Z.fire({icon:"error",title:"Required Fields",text:"Please fill in package name, price, and select number of packs"}),!1):v.value.pack==="other"&&!v.value.customPack?(Z.fire({icon:"error",title:"Required Fields",text:"Please enter a custom pack size"}),!1):!0;case 3:return!v.value.description||v.value.inclusions.length===0?(Z.fire({icon:"error",title:"Required Fields",text:"Please add description and at least one inclusion"}),!1):!0;default:return!0}},T=p=>Number(p).toLocaleString("en-PH"),h=()=>{v.value.inclusions.push("")},K=p=>{v.value.inclusions=v.value.inclusions.filter((o,W)=>W!==p)},U=p=>{var j;const o=(j=p.target.files)==null?void 0:j[0];if(!o)return;if(!["image/jpeg","image/png","image/webp"].includes(o.type)){Z.fire({title:"Invalid File Type",text:"Please upload a JPEG, PNG, or WebP image",icon:"error"});return}if(o.size>5*1024*1024){Z.fire({title:"File Too Large",text:"Please upload an image smaller than 5MB",icon:"error"});return}const q=new FileReader;q.onload=X=>{C.value=X.target.result,b.value=!0},q.readAsDataURL(o),p.target.value=""},D=async()=>{const p=await oe.get("http://127.0.0.1:8000/api/get-all-guest");k.value=p.data},R=()=>{v.value.eventType==="Other"&&!v.value.customEventType?v.value.inclusions=[...et.Other]:v.value.eventType&&v.value.eventType!=="Other"&&(v.value.inclusions=[...et[v.value.eventType]])},x=p=>{let W=p.target.value.replace(/[^\d.]/g,"");(W.match(/\./g)||[]).length>1&&(W=W.replace(/\.(?=.*\.)/g,""));const j=W.split(".");j[0]&&j[0].length>12&&(j[0]=j[0].slice(0,12)),j[1]&&j[1].length>2&&(j[1]=j[1].slice(0,2)),W=j.join(".");const X=Math.min(Number(W),99999999999999e-2);v.value.price_increase_per_day=X.toString()},y=async()=>{try{if(_.value=!0,!v.value.name||!v.value.eventType||!v.value.price||!v.value.description||!v.value.pack||!v.value.inclusions[0])throw new Error("Please fill in all required fields");const p=v.value.eventType==="Other"?v.value.customEventType:v.value.eventType;if(!p||p.trim()==="")throw new Error("Event type is required");let o={};v.value.eventType==="Other"&&(o=c(v.value.customEventType));const W=parseFloat(v.value.price);if(isNaN(W)||W<0||W>99999999999999e-2)throw new Error("Price must be between ₱0 and ₱999,999,999,999.99");const q=parseFloat(v.value.additional_price_percentage||"0");if(isNaN(q)||q<0||q>100)throw new Error("Additional price percentage must be between 0% and 100%");const j=v.value.inclusions.filter(be=>be.trim());if(j.length===0)throw new Error("Please add at least one package inclusion");const X=new FormData;X.append("package_name",v.value.name.trim()),X.append("package_type",p),X.append("package_description",v.value.description.trim()),X.append("package_price",W.toString()),X.append("additional_price_percentage",q.toString()),X.append("price_per_day",v.value.price_per_day?"1":"0"),X.append("price_increase_per_day",v.value.price_increase_per_day||"0"),v.value.eventType==="Other"&&X.append("event_type_colors",JSON.stringify(o));const fe=v.value.pack==="other"?v.value.customPack:v.value.pack;X.append("packs",fe),X.append("package_inclusion",JSON.stringify(j)),v.value.image&&X.append("package_image",v.value.image),console.log("Submitting package data:",Object.fromEntries(X.entries()));const le=await oe.post("http://127.0.0.1:8000/api/add-package",X,{headers:{"Content-Type":"multipart/form-data"}});if(le.data.status==="success")Z.fire({icon:"success",title:"Success",text:"Package added successfully"}),t("success"),t("close");else throw new Error(le.data.message||"Failed to add package")}catch(p){console.error("Error adding package:",p),Z.fire({icon:"error",title:"Error",text:p.message||"Failed to add package"})}finally{_.value=!1}},u=()=>{if(l.value)try{const p=l.value.getCroppedCanvas({width:1600,height:900,imageSmoothingQuality:"high",fillColor:"#fff"});w.value=p.toDataURL("image/jpeg",.9),p.toBlob(o=>{o&&(v.value.image=new File([o],"package-image.jpg",{type:"image/jpeg",lastModified:new Date().getTime()}),A.value=!0)},"image/jpeg",.9),b.value=!1}catch(p){console.error("Error applying crop:",p),Z.fire({title:"Error",text:"Failed to crop image. Please try again.",icon:"error"})}},I=()=>{b.value=!1,C.value=null,w.value||(v.value.image=null)},F=()=>{l.value&&l.value.rotate(-90)},z=()=>{l.value&&l.value.rotate(90)},V=()=>{l.value&&l.value.zoom(.1)},B=()=>{l.value&&l.value.zoom(-.1)},J=()=>{l.value&&l.value.reset()},G=()=>{w.value&&(C.value=w.value,b.value=!0)},Q=()=>{A.value=!1,f.value.click()},H=()=>{b.value||f.value.click()},P=p=>{p.preventDefault();const o=p.dataTransfer.files[0];o&&o.type.startsWith("image/")&&U({target:{files:[o]}})};return me(()=>{D()}),(p,o)=>(n(),d(te,null,[e("div",{class:"modal-overlay",onClick:o[12]||(o[12]=ce(W=>p.$emit("close"),["self"]))},[e("div",Ep,[e("div",Ip,[o[14]||(o[14]=e("h2",null,"Add New Package",-1)),e("button",{class:"close-btn",onClick:o[0]||(o[0]=W=>p.$emit("close"))},o[13]||(o[13]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Dp,[e("div",{class:L(["step",{active:i.value===1,completed:i.value>1}])},o[15]||(o[15]=[e("div",{class:"step-number"},"1",-1),e("div",{class:"step-line"},null,-1)]),2),e("div",{class:L(["step",{active:i.value===2,completed:i.value>2}])},o[16]||(o[16]=[e("div",{class:"step-number"},"2",-1),e("div",{class:"step-line"},null,-1)]),2),e("div",{class:L(["step",{active:i.value===3,completed:i.value>3}])},o[17]||(o[17]=[e("div",{class:"step-number"},"3",-1),e("div",{class:"step-line"},null,-1)]),2),e("div",{class:L(["step",{active:i.value===4}])},o[18]||(o[18]=[e("div",{class:"step-number"},"4",-1)]),2)]),e("form",{onSubmit:ce(y,["prevent"]),class:"package-form"},[i.value===1?(n(),d("div",Mp,[e("div",Np,[o[20]||(o[20]=e("label",{for:"eventType"},"Event Type",-1)),O(e("select",{id:"eventType","onUpdate:modelValue":o[1]||(o[1]=W=>v.value.eventType=W),required:"",onChange:R},o[19]||(o[19]=[he('<option value="" data-v-fd379027>Select event type</option><option value="Wedding" data-v-fd379027>Wedding</option><option value="Debut" data-v-fd379027>Debut</option><option value="Christening" data-v-fd379027>Christening</option><option value="Party" data-v-fd379027>Party</option><option value="Other" data-v-fd379027>Other</option>',6)]),544),[[ue,v.value.eventType]])]),v.value.eventType==="Other"?(n(),d("div",Fp,[o[21]||(o[21]=e("label",{for:"customEventType"},"Custom Event Type",-1)),O(e("input",{type:"text",id:"customEventType","onUpdate:modelValue":o[2]||(o[2]=W=>v.value.customEventType=W),required:"",placeholder:"Enter custom event type"},null,512),[[Y,v.value.customEventType]])])):N("",!0)])):N("",!0),i.value===2?(n(),d("div",Bp,[e("div",Up,[o[22]||(o[22]=e("label",{for:"packageName"},"Package Name",-1)),O(e("input",{type:"text",id:"packageName","onUpdate:modelValue":o[3]||(o[3]=W=>v.value.name=W),required:"",placeholder:"Enter package name"},null,512),[[Y,v.value.name]])]),e("div",Rp,[o[24]||(o[24]=e("label",null,"Packs",-1)),O(e("select",{"onUpdate:modelValue":o[4]||(o[4]=W=>v.value.pack=W),class:"form-select",required:""},o[23]||(o[23]=[he('<option value="" disabled data-v-fd379027>Select number of packs</option><option value="50" data-v-fd379027>50 pax</option><option value="100" data-v-fd379027>100 pax</option><option value="150" data-v-fd379027>150 pax</option><option value="other" data-v-fd379027>Other</option>',5)]),512),[[ue,v.value.pack]]),v.value.pack==="other"?O((n(),d("input",{key:0,type:"number","onUpdate:modelValue":o[5]||(o[5]=W=>v.value.customPack=W),class:"form-control mt-2",placeholder:"Enter custom pack size",min:"200",max:"500",step:"50",required:""},null,512)),[[Y,v.value.customPack]]):N("",!0)]),e("div",Lp,[o[26]||(o[26]=e("label",null,"Package Price*",-1)),e("div",Op,[o[25]||(o[25]=e("span",{class:"currency-symbol"},"₱",-1)),O(e("input",{type:"number","onUpdate:modelValue":o[6]||(o[6]=W=>v.value.price=W),required:"",placeholder:"Enter base package price",min:"0",step:"0.01"},null,512),[[Y,v.value.price]])])]),e("div",Vp,[o[28]||(o[28]=e("label",null,"Additional Guest Price (%)",-1)),e("div",qp,[O(e("input",{type:"number","onUpdate:modelValue":o[7]||(o[7]=W=>v.value.additional_price_percentage=W),placeholder:"Enter percentage for additional guests",min:"0",max:"100",step:"1"},null,512),[[Y,v.value.additional_price_percentage]]),o[27]||(o[27]=e("span",{class:"percentage-symbol"},"%",-1))]),o[29]||(o[29]=e("small",{class:"helper-text"},"This percentage will be added to the per-guest price for additional guests above the base pack size.",-1))]),e("div",jp,[e("div",zp,[O(e("input",{type:"checkbox",id:"pricePerDay","onUpdate:modelValue":o[8]||(o[8]=W=>v.value.price_per_day=W)},null,512),[[$e,v.value.price_per_day]]),o[30]||(o[30]=e("label",{for:"pricePerDay"},"Price is per day",-1))]),o[31]||(o[31]=e("small",{class:"helper-text"},"Price will be charged per day of the event",-1))]),v.value.price_per_day?N("",!0):(n(),d("div",Gp,[o[33]||(o[33]=e("label",null,"Price Increase Per Additional Day",-1)),e("div",Jp,[o[32]||(o[32]=e("span",{class:"input-group-text"},"₱",-1)),O(e("input",{type:"number","onUpdate:modelValue":o[9]||(o[9]=W=>v.value.price_increase_per_day=W),class:"form-control",min:"0",max:"999999999999",placeholder:"Enter price increase for each additional day",onInput:x},null,544),[[Y,v.value.price_increase_per_day]])]),o[34]||(o[34]=e("small",{class:"text-muted"}," Leave empty or set to 0 if no additional charge for extra days ",-1))]))])):N("",!0),i.value===3?(n(),d("div",Wp,[e("div",Qp,[o[35]||(o[35]=e("label",{for:"description"},"Description",-1)),O(e("textarea",{id:"description","onUpdate:modelValue":o[10]||(o[10]=W=>v.value.description=W),required:"",rows:"4",placeholder:"Enter package description"},null,512),[[Y,v.value.description]])]),e("div",Hp,[o[38]||(o[38]=e("label",null,"Inclusions",-1)),e("div",Yp,[(n(!0),d(te,null,ae(v.value.inclusions,(W,q)=>(n(),d("div",{key:q,class:"inclusion-item"},[O(e("input",{type:"text","onUpdate:modelValue":j=>v.value.inclusions[q]=j,placeholder:"Enter inclusion",class:"w-full",style:{width:"100%"}},null,8,Zp),[[Y,v.value.inclusions[q]]]),e("button",{type:"button",onClick:j=>K(q),class:"remove-btn"},o[36]||(o[36]=[e("i",{class:"fas fa-minus"},null,-1)]),8,Kp)]))),128))]),e("button",{type:"button",onClick:h,class:"add-btn"},o[37]||(o[37]=[e("i",{class:"fas fa-plus"},null,-1),E(" Add Inclusion ")]))]),e("div",Xp,[o[42]||(o[42]=e("label",{for:"image",class:"upload-label"},"Package Image",-1)),e("div",{class:L(["image-upload-container",{"has-image":w.value}])},[w.value?(n(),d("div",ev,[e("img",{src:w.value,alt:"Preview",class:"preview-image"},null,8,tv),e("div",{class:"image-overlay"},[e("div",{class:"overlay-actions"},[e("button",{type:"button",onClick:G,class:"overlay-btn edit-btn"},o[40]||(o[40]=[e("i",{class:"fas fa-crop"},null,-1),E(" Edit ")])),e("button",{type:"button",onClick:Q,class:"overlay-btn change-btn"},o[41]||(o[41]=[e("i",{class:"fas fa-image"},null,-1),E(" Change Image ")]))])])])):(n(),d("div",{key:0,class:"upload-area",onClick:H,onDragover:o[11]||(o[11]=ce(()=>{},["prevent"])),onDrop:ce(P,["prevent"])},[e("input",{type:"file",id:"image",ref_key:"fileInput",ref:f,onChange:U,accept:"image/*",class:"file-input",style:{display:"none"}},null,544),o[39]||(o[39]=he('<div class="upload-content" data-v-fd379027><div class="upload-icon" data-v-fd379027><i class="fas fa-cloud-upload-alt" data-v-fd379027></i></div><div class="upload-text" data-v-fd379027><h4 data-v-fd379027>Drag and drop your image here</h4><p data-v-fd379027>or <span class="browse-text" data-v-fd379027>browse files</span></p></div><div class="upload-info" data-v-fd379027><p data-v-fd379027>Supported formats: JPEG, PNG, WebP</p><p data-v-fd379027>Maximum file size: 5MB</p></div></div>',1))],32))],2)])])):N("",!0),i.value===4?(n(),d("div",sv,[e("div",av,[o[48]||(o[48]=e("h3",null,"Review Package Details",-1)),e("div",ov,[e("div",nv,[o[43]||(o[43]=e("span",{class:"label"},"Event Type:",-1)),e("span",lv,r(v.value.eventType),1)]),e("div",iv,[o[44]||(o[44]=e("span",{class:"label"},"Package Name:",-1)),e("span",rv,r(v.value.name),1)]),e("div",dv,[o[45]||(o[45]=e("span",{class:"label"},"Price:",-1)),e("span",uv,"₱"+r(T(v.value.price)),1)]),e("div",cv,[o[46]||(o[46]=e("span",{class:"label"},"Packs:",-1)),e("span",pv,r(v.value.pack==="other"?v.value.customPack:v.value.pack)+" pax",1)]),e("div",vv,[o[47]||(o[47]=e("span",{class:"label"},"Number of Inclusions:",-1)),e("span",mv,r(v.value.inclusions.length),1)])])])])):N("",!0),e("div",fv,[i.value>1?(n(),d("button",{key:0,type:"button",class:"back-btn",onClick:m}," Back ")):N("",!0),i.value<4?(n(),d("button",{key:1,type:"button",class:"next-btn",onClick:a}," Next ")):N("",!0),i.value===4?(n(),d("button",{key:2,type:"submit",class:"submit-btn",disabled:_.value},[_.value?(n(),d("i",yv)):N("",!0),E(" "+r(_.value?"Adding...":"Add Package"),1)],8,gv)):N("",!0)])],32)])]),(n(),de(Qe,{to:"body"},[b.value?(n(),d("div",bv,[e("div",hv,[e("div",kv,[e("div",{class:"cropper-modal-header"},[o[50]||(o[50]=e("h3",null,"Crop Image",-1)),e("button",{onClick:I,class:"close-btn"},o[49]||(o[49]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",_v,[pe(M(We),{ref_key:"cropper",ref:l,src:C.value,"aspect-ratio":16/9,"view-mode":2,guides:!0,background:!0,rotatable:!0,zoomable:!0,movable:!0,responsive:!0,modal:!0,autoCropArea:1,center:!0,highlight:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0},null,8,["src"])]),e("div",{class:"cropper-modal-footer"},[e("div",{class:"cropper-controls"},[e("button",{type:"button",onClick:F,class:"control-btn"},o[51]||(o[51]=[e("i",{class:"fas fa-undo"},null,-1),E(" Rotate Left ")])),e("button",{type:"button",onClick:z,class:"control-btn"},o[52]||(o[52]=[e("i",{class:"fas fa-redo"},null,-1),E(" Rotate Right ")])),e("button",{type:"button",onClick:V,class:"control-btn"},o[53]||(o[53]=[e("i",{class:"fas fa-search-plus"},null,-1),E(" Zoom In ")])),e("button",{type:"button",onClick:B,class:"control-btn"},o[54]||(o[54]=[e("i",{class:"fas fa-search-minus"},null,-1),E(" Zoom Out ")])),e("button",{type:"button",onClick:J,class:"control-btn"},o[55]||(o[55]=[e("i",{class:"fas fa-sync"},null,-1),E(" Reset ")]))]),e("div",{class:"action-buttons"},[e("button",{type:"button",onClick:I,class:"btn-secondary"},"Cancel"),e("button",{type:"button",onClick:u,class:"btn-primary"},"Apply")])])])])])):N("",!0)]))],64))}},Ot=ne($v,[["__scopeId","data-v-fd379027"]]);const wv={class:"admin-dashboard"},Cv={class:"dashboard-content"},Pv={class:"overview-cards"},Av={class:"card"},Tv={class:"card-info"},Sv={class:"card-value"},xv={class:"card"},Ev={class:"card-info"},Iv={class:"card-value"},Dv={class:"card"},Mv={class:"card-info"},Nv={class:"card-value"},Fv={class:"card"},Bv={class:"card-info"},Uv={class:"card-value"},Rv={class:"charts-section"},Lv={class:"chart-container"},Ov={class:"recent-bookings"},Vv={class:"table-container"},qv={class:"quick-actions"},jv={__name:"AdminDashboard",setup(S){const{token:s}=ye(),c=g({totalBookings:0,totalRevenue:"",activeUsers:0,bookingTrend:0,revenueTrend:0,userTrend:0}),t=g(0),i=g(0),v=g([]),w=g(new Date().getFullYear()),k=g(JSON.parse(localStorage.getItem("user_info"))),_=g(!1),b=g(!1),C=g(null),A=_e(),l=g(null),f={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Revenue",data:[0,0,0,0,0,0,0,0,0,0,0,0],borderColor:"#4CAF50",tension:.4}]},a={labels:["Wedding","Debut","Christening","Party","Other"],datasets:[{data:[],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF"]}]},m=F=>F.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),$=F=>new Date(F).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}),T=async()=>{try{const F=await oe.get("http://127.0.0.1:8000/api/get-monthly-revenue");F.data.success&&(f.datasets[0].data=F.data.data,h&&h.update())}catch(F){console.error("Error fetching monthly revenue:",F)}};let h=null,K=null;const U=async()=>{try{const F=await oe.get("http://127.0.0.1:8000/api/get-all-bookings"),z=new Date,V=new Date(z);V.setDate(V.getDate()-1);const B=F.data.filter(p=>new Date(p.created_at).toDateString()===z.toDateString()),J=F.data.filter(p=>new Date(p.created_at).toDateString()===V.toDateString());if(c.value.totalBookings=F.data.length,J.length>0){const p=(B.length-J.length)/J.length*100;c.value.bookingTrend=Math.round(p)}else B.length>0?c.value.bookingTrend=100:c.value.bookingTrend=0;const G=B.reduce((p,o)=>p+parseFloat(o.package.package_price),0),Q=J.reduce((p,o)=>p+parseFloat(o.package.package_price),0);if(c.value.totalRevenue=F.data.reduce((p,o)=>p+parseFloat(o.package.package_price),0),Q>0){const p=(G-Q)/Q*100;c.value.revenueTrend=Math.round(p)}else G>0?c.value.revenueTrend=100:c.value.revenueTrend=0;const H=["Wedding","Debut","Christening","Party"],P=F.data.reduce((p,o)=>{const W=o.package.package_type;return H.includes(W)?p[W]=(p[W]||0)+1:p.Other=(p.Other||0)+1,p},{});a.datasets[0].data=[P.Wedding||0,P.Debut||0,P.Christening||0,P.Party||0,P.Other||0],K&&K.update(),v.value=F.data}catch(F){console.error("Error fetching bookings:",F)}},D=async()=>{try{const F=await oe.get("http://127.0.0.1:8000/api/get-all-users",{headers:{Authorization:`Bearer ${s.value}`}}),z=new Date,V=new Date(z);V.setDate(V.getDate()-1);const B=F.data.filter(G=>{const Q=new Date(G.created_at);return G.status==="active"&&Q.toDateString()===z.toDateString()}),J=F.data.filter(G=>{const Q=new Date(G.created_at);return G.status==="active"&&Q.toDateString()===V.toDateString()});if(c.value.activeUsers=F.data.filter(G=>G.status==="active").length,J.length>0){const G=(B.length-J.length)/J.length*100;c.value.userTrend=Math.round(G)}else B.length>0?c.value.userTrend=100:c.value.userTrend=0}catch(F){console.error("Error fetching users:",F)}},R=async()=>{try{const F=await oe.get("http://127.0.0.1:8000/api/get-all-ratings");if(F.data){const z=F.data;if(z.length>0){const V=z.length*5,B=z.reduce((P,p)=>P+parseInt(p.rating),0);t.value=Math.round(B/V*100);const J=new Date,G=new Date(J);G.setDate(G.getDate()-1);const Q=z.filter(P=>new Date(P.created_at).toDateString()===J.toDateString()),H=z.filter(P=>new Date(P.created_at).toDateString()===G.toDateString());if(H.length>0){const P=Q.reduce((o,W)=>o+parseInt(W.rating),0)/Q.length,p=H.reduce((o,W)=>o+parseInt(W.rating),0)/H.length;i.value=Math.round((P-p)/p*100)}else Q.length>0?i.value=100:i.value=0}else t.value=0,i.value=0}}catch(F){console.error("Error fetching satisfaction rate:",F)}},x=()=>{b.value=!0},y=()=>{b.value=!1},u=()=>{A.push("/admin/settings")},I=()=>{const F=window.open("","_blank"),z=new Date().toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"}),V=`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Dashboard Report - ${z}</title>
      <style>
        body {
          font-family: Arial, sans-serif;
          line-height: 1.6;
          padding: 20px;
          max-width: 1200px;
          margin: 0 auto;
        }
        .header {
          text-align: center;
          margin-bottom: 30px;
          padding-bottom: 20px;
          border-bottom: 2px solid #333;
        }
        .section {
          margin-bottom: 30px;
        }
        .section-title {
          font-size: 18px;
          font-weight: bold;
          margin-bottom: 15px;
          color: #333;
        }
        table {
          width: 100%;
          border-collapse: collapse;
          margin-bottom: 20px;
        }
        th, td {
          border: 1px solid #ddd;
          padding: 12px;
          text-align: left;
        }
        th {
          background-color: #f5f5f5;
        }
        .stats-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 20px;
          margin-bottom: 30px;
        }
        .stat-item {
          padding: 15px;
          background: #f9f9f9;
          border-radius: 8px;
        }
        .chart-section {
          page-break-before: always;
        }
        @media print {
          body {
            padding: 0;
          }
          .chart-section {
            page-break-before: always;
          }
        }
      </style>
    </head>
    <body>
      <div class="header">
        <h1>Dashboard Report</h1>
        <p>Generated on ${z}</p>
      </div>

      <div class="section">
        <div class="section-title">Overview Statistics</div>
        <div class="stats-grid">
          <div class="stat-item">
            <h3>Total Bookings</h3>
            <p>${c.value.totalBookings}</p>
            <small>Trend: ${c.value.bookingTrend}%</small>
          </div>
          <div class="stat-item">
            <h3>Total Revenue</h3>
            <p>₱${m(c.value.totalRevenue)}</p>
            <small>Trend: ${c.value.revenueTrend}%</small>
          </div>
          <div class="stat-item">
            <h3>Active Users</h3>
            <p>${c.value.activeUsers}</p>
            <small>Trend: ${c.value.userTrend}%</small>
          </div>
          <div class="stat-item">
            <h3>Satisfaction Rate</h3>
            <p>${t.value}%</p>
            <small>Trend: ${i.value}%</small>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Recent Bookings</div>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Client</th>
              <th>Event Type</th>
              <th>Date</th>
              <th>Status</th>
              <th>Amount</th>
            </tr>
          </thead>
          <tbody>
            ${v.value.map(B=>`
              <tr>
                <td>#${B.id}</td>
                <td>${B.full_name}</td>
                <td>${B.package.package_type}</td>
                <td>${$(B.event_date)}</td>
                <td>${B.status}</td>
                <td>₱${m(B.package.package_price)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </div>

      <div class="section chart-section">
        <div class="section-title">Monthly Revenue Data</div>
        <table>
          <thead>
            <tr>
              <th>Month</th>
              <th>Revenue</th>
            </tr>
          </thead>
          <tbody>
            ${f.labels.map((B,J)=>`
              <tr>
                <td>${B}</td>
                <td>₱${m(f.datasets[0].data[J])}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </div>

      <div class="section">
        <div class="section-title">Event Type Distribution</div>
        <table>
          <thead>
            <tr>
              <th>Event Type</th>
              <th>Number of Bookings</th>
            </tr>
          </thead>
          <tbody>
            ${a.labels.map((B,J)=>`
              <tr>
                <td>${B}</td>
                <td>${a.datasets[0].data[J]}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </div>
    </body>
    </html>
  `;F.document.write(V),F.document.close(),F.onload=function(){F.print()}};return me(async()=>{var V,B;await Promise.all([T(),U(),D(),R()]);const F=(V=document.querySelector("#revenueChart"))==null?void 0:V.getContext("2d");F&&(h=new Be(F,{type:"line",data:f,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(J){return"₱"+J.parsed.y.toLocaleString()}}}},scales:{y:{beginAtZero:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"},ticks:{callback:function(J){return"₱"+J.toLocaleString()}}},x:{grid:{display:!1}}}}}));const z=(B=document.querySelector("#eventTypeChart"))==null?void 0:B.getContext("2d");z&&(K=new Be(z,{type:"doughnut",data:a,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{size:12}}},tooltip:{callbacks:{label:function(J){const G=J.label||"",Q=J.raw||0,H=J.dataset.data.reduce((p,o)=>p+o,0),P=(Q/H*100).toFixed(1);return`${G}: ${Q} (${P}%)`}}}},cutout:"60%"}})),l.value=setInterval(async()=>{await T()},5*60*1e3)}),je(()=>{l.value&&clearInterval(l.value),h&&h.destroy(),K&&K.destroy()}),(F,z)=>{var V;return n(),d("div",wv,[e("main",Cv,[e("div",Pv,[e("div",Av,[e("div",Tv,[z[2]||(z[2]=e("h3",null,"Total Bookings",-1)),e("div",Sv,r(c.value.totalBookings),1),e("div",{class:L(["card-trend",{up:c.value.bookingTrend>0}])},[e("i",{class:L(["fas",c.value.bookingTrend>0?"fa-arrow-up":"fa-arrow-down"])},null,2),E(" "+r(Math.abs(c.value.bookingTrend))+"% ",1)],2)]),z[3]||(z[3]=e("div",{class:"card-icon"},[e("i",{class:"fas fa-calendar-check"})],-1))]),e("div",xv,[e("div",Ev,[e("h3",null,"Revenue ("+r(w.value)+")",1),e("div",Iv,"₱"+r(m(c.value.totalRevenue)),1),e("div",{class:L(["card-trend",{up:c.value.revenueTrend>0}])},[e("i",{class:L(["fas",c.value.revenueTrend>0?"fa-arrow-up":"fa-arrow-down"])},null,2),E(" "+r(Math.abs(c.value.revenueTrend))+"% ",1)],2)]),z[4]||(z[4]=e("div",{class:"card-icon"},[e("i",{class:"fas fa-coins"})],-1))]),e("div",Dv,[e("div",Mv,[z[5]||(z[5]=e("h3",null,"Active Users",-1)),e("div",Nv,r(c.value.activeUsers),1),e("div",{class:L(["card-trend",{up:c.value.userTrend>0}])},[e("i",{class:L(["fas",c.value.userTrend>0?"fa-arrow-up":"fa-arrow-down"])},null,2),E(" "+r(Math.abs(c.value.userTrend))+"% ",1)],2)]),z[6]||(z[6]=e("div",{class:"card-icon"},[e("i",{class:"fas fa-users"})],-1))]),e("div",Fv,[e("div",Bv,[z[7]||(z[7]=e("h3",null,"Satisfaction Rate",-1)),e("div",Uv,r(t.value)+"%",1),e("div",{class:L(["card-trend",{up:i.value>0}])},[e("i",{class:L(["fas",i.value>0?"fa-arrow-up":"fa-arrow-down"])},null,2),E(" "+r(Math.abs(i.value))+"% ",1)],2)]),z[8]||(z[8]=e("div",{class:"card-icon"},[e("i",{class:"fas fa-smile"})],-1))])]),e("div",Rv,[e("div",Lv,[e("h3",null,"Revenue Overview ("+r(w.value)+")",1),z[9]||(z[9]=e("canvas",{id:"revenueChart"},null,-1))]),z[10]||(z[10]=e("div",{class:"chart-container"},[e("h3",null,"Bookings by Event Type"),e("canvas",{id:"eventTypeChart"})],-1))]),e("div",Ov,[z[12]||(z[12]=e("div",{class:"section-header"},[e("h3",null,"Recent Bookings"),e("a",{href:"/admin/bookings",class:"btn-view-all"},"View All")],-1)),e("div",Vv,[e("table",null,[z[11]||(z[11]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Client"),e("th",null,"Event Type"),e("th",null,"Date"),e("th",null,"Status"),e("th",null,"Amount")])],-1)),e("tbody",null,[(n(!0),d(te,null,ae(v.value,B=>(n(),d("tr",{key:B.id},[e("td",null,"#"+r(B.id),1),e("td",null,r(B.full_name),1),e("td",null,r(B.package.package_type),1),e("td",null,r($(B.event_date)),1),e("td",null,[e("span",{style:{"text-transform":"capitalize"},class:L(["status",B.status.toLowerCase()])},r(B.status),3)]),e("td",null,"₱"+r(m(B.package.package_price)),1)]))),128))])])])]),e("div",qv,[((V=k.value)==null?void 0:V.role)==="admin"?(n(),d("button",{key:0,onClick:x,class:"action-btn"},z[13]||(z[13]=[e("i",{class:"fas fa-plus"},null,-1),E(" Add Package ")]))):N("",!0),e("button",{onClick:I,class:"action-btn"},z[14]||(z[14]=[e("i",{class:"fas fa-file-alt"},null,-1),E(" Generate Report ")])),e("button",{onClick:u,class:"action-btn"},z[15]||(z[15]=[e("i",{class:"fas fa-cog"},null,-1),E(" Settings ")]))])]),_.value?(n(),de(Ft,{key:0,booking:C.value,onClose:z[0]||(z[0]=B=>_.value=!1)},null,8,["booking"])):N("",!0),b.value?(n(),de(Ot,{key:1,onClose:z[1]||(z[1]=B=>b.value=!1),onSuccess:y})):N("",!0)])}}},zv=ne(jv,[["__scopeId","data-v-3d01f29b"]]);const Gv={class:"modal-content"},Jv={class:"modal-header"},Wv={class:"payment-section"},Qv={class:"payment-summary"},Hv={class:"summary-row"},Yv={class:"amount"},Zv={class:"summary-row"},Kv={class:"amount paid"},Xv={class:"summary-row"},em={class:"amount remaining"},tm={class:"payment-history"},sm={class:"payment-list"},am={class:"payment-info"},om={class:"payment-amount"},nm={class:"payment-date"},lm={key:0,class:"payment-notes"},im={class:"add-payment"},rm={class:"payment-form"},dm={class:"form-group"},um=["max","disabled"],cm={class:"form-group"},pm=["disabled"],vm={class:"form-section"},mm={class:"form-group"},fm={key:0,class:"form-group"},gm={class:"form-actions"},ym=["disabled"],bm={__name:"EditBookingModal",props:{booking:{type:Object,required:!0}},emits:["close","update"],setup(S,{emit:s}){const c=S,t=s,i=g(!1),v=g([]),w=g(0),k=g({status:c.booking.status.toLowerCase(),cancellationMessage:c.booking.cancellationMessage||""}),_=Te({amount:"",notes:""}),b=async()=>{var $,T;try{console.log("Fetching payments for booking:",c.booking.id);const h=await oe.get(`http://127.0.0.1:8000/api/bookings/${c.booking.id}/payments`);console.log("Payments response:",h.data),v.value=h.data.payments,w.value=h.data.total_paid}catch(h){console.error("Error fetching payments:",{message:h.message,response:($=h.response)==null?void 0:$.data,status:(T=h.response)==null?void 0:T.status})}},C=$=>Number($).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2}),A=$=>new Date($).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=ee(()=>w.value>=c.booking.total_price),f=ee(()=>Math.max(0,c.booking.total_price-w.value)),a=async()=>{try{i.value=!0,_.amount&&parseFloat(_.amount)>0&&parseFloat(_.amount)<=f.value&&await oe.post("http://127.0.0.1:8000/api/payments",{booking_id:c.booking.id,amount:parseFloat(_.amount),notes:_.notes||"Payment recorded during status update"}),(await oe.post("http://127.0.0.1:8000/api/update-booking",{id:c.booking.id,status:k.value.status,cancellationMessage:k.value.status==="cancelled"?k.value.cancellationMessage:null})).data.status===200&&(Z.fire({icon:"success",title:"Success",text:"Booking updated successfully"}),t("update"),t("close"))}catch($){console.error("Error updating booking:",$),Z.fire({icon:"error",title:"Error",text:"Failed to update booking"})}finally{i.value=!1}},m=$=>{const T=parseFloat($.target.value);T>f.value?_.amount=f.value:T<0&&(_.amount=0)};return me(()=>{b()}),($,T)=>(n(),d("div",{class:"modal-overlay",onClick:T[6]||(T[6]=ce(h=>$.$emit("close"),["self"]))},[e("div",Gv,[e("div",Jv,[e("h2",null,"Edit Booking #"+r(S.booking.id),1),e("button",{class:"close-btn",onClick:T[0]||(T[0]=h=>$.$emit("close"))},T[7]||(T[7]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Wv,[T[15]||(T[15]=e("h3",null,"Payment Tracking",-1)),e("div",Qv,[e("div",Hv,[T[8]||(T[8]=e("span",null,"Total Amount:",-1)),e("span",Yv,"₱"+r(C(S.booking.total_price)),1)]),e("div",Zv,[T[9]||(T[9]=e("span",null,"Total Paid:",-1)),e("span",Kv,"₱"+r(C(w.value)),1)]),e("div",Xv,[T[10]||(T[10]=e("span",null,"Remaining Balance:",-1)),e("span",em,"₱"+r(C(f.value)),1)])]),e("div",tm,[T[11]||(T[11]=e("h4",null,"Payment History",-1)),e("div",sm,[(n(!0),d(te,null,ae(v.value,h=>(n(),d("div",{key:h.id,class:"payment-item"},[e("div",am,[e("span",om,"₱"+r(C(h.amount)),1),e("span",nm,r(A(h.created_at)),1)]),h.notes?(n(),d("p",lm,r(h.notes),1)):N("",!0)]))),128))])]),e("div",im,[T[14]||(T[14]=e("h4",null,"Add Payment",-1)),e("div",rm,[e("div",dm,[T[12]||(T[12]=e("label",null,"Amount",-1)),O(e("input",{type:"number","onUpdate:modelValue":T[1]||(T[1]=h=>_.amount=h),max:f.value,min:"0",step:"0.01",disabled:l.value,class:L({"input-disabled":l.value}),onInput:m},null,42,um),[[Y,_.amount]])]),e("div",cm,[T[13]||(T[13]=e("label",null,"Notes",-1)),O(e("textarea",{"onUpdate:modelValue":T[2]||(T[2]=h=>_.notes=h),placeholder:"Add payment notes...",disabled:l.value,class:L({"input-disabled":l.value})},null,10,pm),[[Y,_.notes]])]),e("div",{class:L(["info-message",{warning:l.value}])},[e("i",{class:L(["fas",l.value?"fa-check-circle":"fa-info-circle"])},null,2),e("span",null,r(l.value?"Payment has been fully paid":'Payment will be recorded when you click "Save Changes"'),1)],2)])])]),e("form",{onSubmit:ce(a,["prevent"]),class:"edit-form"},[e("div",vm,[e("div",mm,[T[17]||(T[17]=e("label",{for:"status"},"Status",-1)),O(e("select",{"onUpdate:modelValue":T[3]||(T[3]=h=>k.value.status=h),id:"status"},T[16]||(T[16]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"confirmed"},"Confirmed",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"cancelled"},"Cancelled",-1)]),512),[[ue,k.value.status]])]),k.value.status==="cancelled"?(n(),d("div",fm,[T[18]||(T[18]=e("label",{for:"cancellationMessage"},"Reason for Cancellation",-1)),O(e("textarea",{"onUpdate:modelValue":T[4]||(T[4]=h=>k.value.cancellationMessage=h),id:"cancellationMessage",rows:"4",placeholder:"Please provide a reason for cancellation...",required:""},null,512),[[Y,k.value.cancellationMessage]])])):N("",!0)]),e("div",gm,[e("button",{type:"button",class:"cancel-btn",onClick:T[5]||(T[5]=h=>$.$emit("close"))},"Close"),e("button",{type:"submit",class:"submit-btn",disabled:i.value}," Save Changes ",8,ym)])],32)])]))}},hm=ne(bm,[["__scopeId","data-v-3594bd15"]]);const km={class:"bookings-management"},_m={class:"management-content"},$m={class:"page-header"},wm={class:"header-actions"},Cm={class:"archive-toggle"},Pm={class:"search-bar"},Am={class:"filters"},Tm={class:"bookings-table-container"},Sm={class:"bookings-table"},xm={class:"booking-id-col"},Em={class:"client-col"},Im={class:"event-type-col"},Dm={class:"event-date-col"},Mm={class:"status-col"},Nm={class:"package-col"},Fm={class:"booking-id-col"},Bm={class:"client-col"},Um={class:"client-info"},Rm={class:"client-details"},Lm={class:"client-name"},Om={class:"client-email"},Vm={class:"event-type-col"},qm={class:"event-date-col"},jm={class:"date-info"},zm={class:"time"},Gm={class:"status-col"},Jm={class:"package-col"},Wm={class:"actions-col"},Qm={class:"action-buttons"},Hm=["onClick"],Ym=["onClick","disabled","title"],Zm=["onClick"],Km={class:"pagination"},Xm=["disabled"],ef={class:"page-info"},tf=["disabled"],sf={key:2,class:"modal-overlay"},af={class:"modal-content"},of={class:"modal-header"},nf={class:"feedback-form"},lf={class:"form-group"},rf={class:"rating-group"},df=["onClick"],uf={class:"form-group"},cf={key:0,class:"form-group"},pf={class:"form-group"},vf={class:"form-group"},mf={class:"radio-group"},ff={class:"modal-actions"},gf=["disabled"],nt=10,yf={__name:"BookingsManagement",setup(S){ye();const s=g([]),c=g(""),t=g(""),i=g(""),v=g(1),w=g("eventDate"),k=g("desc"),_=g(!1),b=g(!1),C=g(!1),A=g(null),l=g(0),f=g(""),a=g(""),m=g(""),$=g(""),T=g(!1),h=ee(()=>{let q=[...s.value];if(t.value&&(q=q.filter(j=>j.status===t.value)),i.value&&(q=q.filter(j=>{var X,fe;return((fe=(X=j.package)==null?void 0:X.package_type)==null?void 0:fe.toLowerCase())===i.value.toLowerCase()})),c.value){const j=c.value.toLowerCase();q=q.filter(X=>{var fe,le,be,Ae,ie;return((fe=X.full_name)==null?void 0:fe.toLowerCase().includes(j))||((le=X.email)==null?void 0:le.toLowerCase().includes(j))||((be=X.venue_name)==null?void 0:be.toLowerCase().includes(j))||((ie=(Ae=X.package)==null?void 0:Ae.package_name)==null?void 0:ie.toLowerCase().includes(j))})}return q}),K=ee(()=>[...h.value].sort((q,j)=>{var le,be,Ae,ie,se,re,Ce,De,gt,yt,bt,ht;let X,fe;switch(w.value){case"id":X=q.id,fe=j.id;break;case"fullName":X=(le=q.full_name)==null?void 0:le.toLowerCase(),fe=(be=j.full_name)==null?void 0:be.toLowerCase();break;case"eventType":X=(ie=(Ae=q.package)==null?void 0:Ae.package_type)==null?void 0:ie.toLowerCase(),fe=(re=(se=j.package)==null?void 0:se.package_type)==null?void 0:re.toLowerCase();break;case"eventDate":X=new Date(q.event_date),fe=new Date(j.event_date);break;case"status":X=(Ce=q.status)==null?void 0:Ce.toLowerCase(),fe=(De=j.status)==null?void 0:De.toLowerCase();break;case"packageName":X=(yt=(gt=q.package)==null?void 0:gt.package_name)==null?void 0:yt.toLowerCase(),fe=(ht=(bt=j.package)==null?void 0:bt.package_name)==null?void 0:ht.toLowerCase();break;default:return 0}return X==null?1:fe==null?-1:X===fe?0:k.value==="asc"?X<fe?-1:1:X<fe?1:-1})),U=ee(()=>{const q=(v.value-1)*nt,j=q+nt;return K.value.slice(q,j)}),D=ee(()=>Math.ceil(K.value.length/nt)),R=ee(()=>!!localStorage.getItem("token")),x=ee(()=>JSON.parse(localStorage.getItem("user_info")||"{}").id),y=ee(()=>l.value>0&&f.value),u=async()=>{try{const q=await oe.get("http://127.0.0.1:8000/api/get-all-bookings");s.value=q.data}catch(q){console.error("Error fetching bookings:",q)}},I=()=>{v.value=1},F=()=>{v.value=1},z=q=>{w.value===q?k.value=k.value==="asc"?"desc":"asc":(w.value=q,k.value="asc")},V=q=>w.value!==q?"fa-sort":k.value==="asc"?"fa-sort-up":"fa-sort-down",B=q=>{v.value=q},J=q=>{if(!q)return"No date set";try{const j=new Date(q);return isNaN(j.getTime())?"Invalid date":j.toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"})}catch(j){return console.error("Error formatting date:",j),"Invalid date"}},G=q=>{if(!q)return"";try{if(/^\d{2}:\d{2}:\d{2}$/.test(q)){const[X,fe]=q.split(":"),le=new Date;return le.setHours(parseInt(X,10)),le.setMinutes(parseInt(fe,10)),le.toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit",hour12:!0})}const j=new Date(`2000-01-01T${q}`);return isNaN(j.getTime())?"":j.toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(j){return console.error("Error formatting time:",j),""}},Q=q=>{A.value=q,_.value=!0},H=q=>{A.value=q,b.value=!0},P=async()=>{if(!y.value){Z.fire({icon:"error",title:"Incomplete Feedback",text:"Please provide a satisfaction rating and reason for cancellation"});return}try{await oe.post("http://127.0.0.1:8000/api/booking-feedback",{booking_id:A.value.id,satisfaction_rating:l.value,cancellation_reason:f.value==="other"?a.value:f.value,feedback_message:m.value,would_return:$.value}),(await oe.post(`http://127.0.0.1:8000/api/bookings/${A.value.id}/cancel`,{status:"cancelled",feedback_submitted:!0})).status===200&&(C.value=!1,l.value=0,f.value="",a.value="",m.value="",$.value="",await u(),Z.fire({icon:"success",title:"Thank You for Your Feedback",text:"Your booking has been cancelled and your feedback has been recorded."}))}catch(q){console.error("Error processing cancellation:",q),Z.fire({icon:"error",title:"Error",text:"Failed to process your request. Please try again."})}},p=async()=>{await u(),b.value=!1},o=async q=>{try{(await Z.fire({title:"Are you sure?",text:"This booking will be moved to archives",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, archive it!"})).isConfirmed&&(await oe.post(`/api/bookings/${q.id}/archive`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.status===200&&(Z.fire("Archived!","Booking has been archived.","success"),await u())}catch(j){console.error("Error archiving booking:",j),Z.fire("Error!","Failed to archive booking.","error")}},W=()=>{T.value=!T.value};return me(async()=>{await u()}),(q,j)=>(n(),d("div",km,[e("main",_m,[e("div",$m,[j[26]||(j[26]=e("h1",null,"Bookings Management",-1)),e("div",wm,[e("div",Cm,[e("button",{class:L(["btn-archive",{active:T.value}]),onClick:W},[j[21]||(j[21]=e("i",{class:"fas fa-archive"},null,-1)),E(" "+r(T.value?"Show Active":"Show Archived"),1)],2)]),e("div",Pm,[j[22]||(j[22]=e("i",{class:"fas fa-search"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":j[0]||(j[0]=X=>c.value=X),placeholder:"Search bookings...",onInput:I},null,544),[[Y,c.value]])]),e("div",Am,[O(e("select",{"onUpdate:modelValue":j[1]||(j[1]=X=>t.value=X)},j[23]||(j[23]=[he('<option value="" data-v-14404874>All Status</option><option value="pending" data-v-14404874>Pending</option><option value="confirmed" data-v-14404874>Confirmed</option><option value="completed" data-v-14404874>Completed</option><option value="cancelled" data-v-14404874>Cancelled</option>',5)]),512),[[ue,t.value]]),O(e("select",{"onUpdate:modelValue":j[2]||(j[2]=X=>i.value=X)},j[24]||(j[24]=[he('<option value="" data-v-14404874>All Event Types</option><option value="wedding" data-v-14404874>Wedding</option><option value="debut" data-v-14404874>Debut</option><option value="christening" data-v-14404874>Christening</option><option value="party" data-v-14404874>Party</option><option value="other" data-v-14404874>Other</option>',6)]),512),[[ue,i.value]]),e("button",{class:"filter-btn",onClick:F},j[25]||(j[25]=[e("i",{class:"fas fa-filter"},null,-1),E(" Apply Filters ")]))])])]),e("div",Tm,[e("table",Sm,[e("thead",null,[e("tr",null,[e("th",xm,[e("div",{class:"th-content",onClick:j[3]||(j[3]=X=>z("id"))},[j[27]||(j[27]=E(" Booking ID ")),e("i",{class:L(["fas",V("id")])},null,2)])]),e("th",Em,[e("div",{class:"th-content",onClick:j[4]||(j[4]=X=>z("fullName"))},[j[28]||(j[28]=E(" Client ")),e("i",{class:L(["fas",V("fullName")])},null,2)])]),e("th",Im,[e("div",{class:"th-content",onClick:j[5]||(j[5]=X=>z("eventType"))},[j[29]||(j[29]=E(" Event Type ")),e("i",{class:L(["fas",V("eventType")])},null,2)])]),e("th",Dm,[e("div",{class:"th-content",onClick:j[6]||(j[6]=X=>z("eventDate"))},[j[30]||(j[30]=E(" Event Date ")),e("i",{class:L(["fas",V("eventDate")])},null,2)])]),e("th",Mm,[e("div",{class:"th-content",onClick:j[7]||(j[7]=X=>z("status"))},[j[31]||(j[31]=E(" Status ")),e("i",{class:L(["fas",V("status")])},null,2)])]),e("th",Nm,[e("div",{class:"th-content",onClick:j[8]||(j[8]=X=>z("packageName"))},[j[32]||(j[32]=E(" Package Name ")),e("i",{class:L(["fas",V("packageName")])},null,2)])]),j[33]||(j[33]=e("th",{class:"actions-col"},"Actions",-1))])]),e("tbody",null,[(n(!0),d(te,null,ae(U.value,X=>{var fe,le,be,Ae,ie;return n(),d("tr",{key:X.id},[e("td",Fm,r(X.id),1),e("td",Bm,[e("div",Um,[e("div",Rm,[e("span",Lm,r(X.full_name),1),e("span",Om,r(X.email),1)])])]),e("td",Vm,[e("span",{class:L(["event-type",(le=(fe=X.package)==null?void 0:fe.package_type)==null?void 0:le.toLowerCase()])},r((be=X.package)==null?void 0:be.package_type),3)]),e("td",qm,[e("div",jm,[e("span",null,r(J(X.event_date)),1),e("span",zm,r(G(X.event_time)),1)])]),e("td",Gm,[e("span",{class:L(["status",(Ae=X.status)==null?void 0:Ae.toLowerCase()])},r(X.status),3)]),e("td",Jm,r((ie=X.package)==null?void 0:ie.package_name),1),e("td",Wm,[e("div",Qm,[e("button",{class:"btn-action view",onClick:se=>Q(X),title:"View Details"},j[34]||(j[34]=[e("i",{class:"fas fa-eye"},null,-1)]),8,Hm),e("button",{class:"btn-action edit",onClick:se=>H(X),disabled:X.status==="completed",title:X.status==="completed"?"Cannot edit completed bookings":"Edit Booking"},j[35]||(j[35]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Ym),e("button",{class:"btn-action delete",onClick:se=>o(X),title:"Archive Booking"},j[36]||(j[36]=[e("i",{class:"fas fa-archive"},null,-1)]),8,Zm)])])])}),128))])])]),e("div",Km,[e("button",{disabled:v.value===1,onClick:j[9]||(j[9]=X=>B(v.value-1)),class:"page-btn"},j[37]||(j[37]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Xm),e("span",ef," Page "+r(v.value)+" of "+r(D.value),1),e("button",{disabled:v.value===D.value,onClick:j[10]||(j[10]=X=>B(v.value+1)),class:"page-btn"},j[38]||(j[38]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,tf)])]),_.value?(n(),de(Ut,{key:0,booking:A.value,onClose:j[11]||(j[11]=X=>_.value=!1)},null,8,["booking"])):N("",!0),b.value?(n(),de(hm,{key:1,booking:A.value,onClose:j[12]||(j[12]=X=>b.value=!1),onUpdate:p},null,8,["booking"])):N("",!0),C.value?(n(),d("div",sf,[e("div",af,[e("div",of,[j[40]||(j[40]=e("h2",null,"Booking Cancellation Feedback",-1)),e("button",{class:"close-btn",onClick:j[13]||(j[13]=X=>C.value=!1)},j[39]||(j[39]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",nf,[j[51]||(j[51]=e("p",{class:"feedback-intro"},"Please help us improve our services by providing feedback before cancellation:",-1)),e("div",lf,[j[42]||(j[42]=e("label",null,"How satisfied were you with our service?",-1)),e("div",rf,[(n(),d(te,null,ae(5,X=>e("div",{key:X,class:L(["star",{active:X<=l.value}]),onClick:fe=>l.value=X},j[41]||(j[41]=[e("i",{class:"fas fa-star"},null,-1)]),10,df)),64))])]),e("div",uf,[j[44]||(j[44]=e("label",null,"Primary reason for cancellation",-1)),O(e("select",{"onUpdate:modelValue":j[14]||(j[14]=X=>f.value=X),required:""},j[43]||(j[43]=[he('<option value="" data-v-14404874>Select a reason</option><option value="schedule_conflict" data-v-14404874>Schedule Conflict</option><option value="change_of_plans" data-v-14404874>Change of Plans</option><option value="budget_constraints" data-v-14404874>Budget Constraints</option><option value="service_quality" data-v-14404874>Service Quality Concerns</option><option value="found_alternative" data-v-14404874>Found Alternative Service</option><option value="other" data-v-14404874>Other</option>',7)]),512),[[ue,f.value]])]),f.value==="other"?(n(),d("div",cf,[j[45]||(j[45]=e("label",null,"Please specify your reason",-1)),O(e("input",{type:"text","onUpdate:modelValue":j[15]||(j[15]=X=>a.value=X),placeholder:"Enter your specific reason",required:""},null,512),[[Y,a.value]])])):N("",!0),e("div",pf,[j[46]||(j[46]=e("label",null,"Additional Comments",-1)),O(e("textarea",{"onUpdate:modelValue":j[16]||(j[16]=X=>m.value=X),placeholder:"Please share any additional feedback or suggestions...",rows:"4"},null,512),[[Y,m.value]])]),e("div",vf,[j[50]||(j[50]=e("label",null,"Would you consider using our services in the future?",-1)),e("div",mf,[e("label",null,[O(e("input",{type:"radio","onUpdate:modelValue":j[17]||(j[17]=X=>$.value=X),value:"yes"},null,512),[[Fe,$.value]]),j[47]||(j[47]=E(" Yes "))]),e("label",null,[O(e("input",{type:"radio","onUpdate:modelValue":j[18]||(j[18]=X=>$.value=X),value:"maybe"},null,512),[[Fe,$.value]]),j[48]||(j[48]=E(" Maybe "))]),e("label",null,[O(e("input",{type:"radio","onUpdate:modelValue":j[19]||(j[19]=X=>$.value=X),value:"no"},null,512),[[Fe,$.value]]),j[49]||(j[49]=E(" No "))])])]),e("div",ff,[e("button",{class:"btn-secondary",onClick:j[20]||(j[20]=X=>C.value=!1)}," Back "),e("button",{class:"btn-primary",onClick:P,disabled:!y.value}," Submit & Cancel Booking ",8,gf)])])])])):N("",!0),R.value?(n(),de(ct,{key:3,"current-user-id":x.value},null,8,["current-user-id"])):N("",!0)]))}},bf=ne(yf,[["__scopeId","data-v-14404874"]]);const hf={class:"modal-content"},kf={class:"modal-header"},_f={class:"form-section"},$f={class:"form-group"},wf={class:"form-row"},Cf={class:"form-group"},Pf={key:0,class:"form-group"},Af={class:"form-group"},Tf={class:"form-group"},Sf={class:"form-group"},xf={class:"form-section"},Ef={class:"image-upload"},If={key:0,class:"upload-placeholder"},Df={key:1,class:"preview-container"},Mf=["src"],Nf={class:"preview-actions"},Ff={class:"form-section"},Bf={class:"inclusions-list"},Uf=["onUpdate:modelValue"],Rf=["onClick","disabled"],Lf={class:"form-section"},Of={class:"form-row"},Vf={class:"form-group"},qf={class:"form-group"},jf={class:"form-actions"},zf=["disabled"],Gf={key:0,class:"fas fa-spinner fa-spin"},Jf={key:0,class:"cropper-modal-wrapper"},Wf={class:"cropper-modal"},Qf={class:"cropper-modal-content"},Hf={class:"cropper-modal-body"},Yf={__name:"EditPackageModal",props:{package:{type:Object,required:!0}},emits:["close","update"],setup(S,{emit:s}){const c=S,t=s,{token:i}=ye(),v=g(!1),w=g(null),k=g(!1),_=g(!1),b=g(null),C=g(null),A=g(!1),l=Te({id:"",name:"",eventType:"",price:"",description:"",packs:"",status:"active",inclusions:[""],image:null,previewImage:null,additional_price_percentage:"0"}),f=()=>{l.id=c.package.id,l.name=c.package.package_name||"",l.eventType=c.package.package_type||"",l.price=c.package.package_price||"",l.description=c.package.package_description||"",l.packs=c.package.packs||"",l.status=c.package.status||"active",l.previewImage=c.package.package_image||null,l.additional_price_percentage=c.package.additional_price_percentage||"0";try{if(c.package.package_inclusion){const V=typeof c.package.package_inclusion=="string"?JSON.parse(c.package.package_inclusion):c.package.package_inclusion;l.inclusions=Array.isArray(V)&&V.length>0?V:[""]}}catch(V){console.error("Error parsing inclusions:",V),l.inclusions=[""]}};me(()=>{f(),A.value=!!l.previewImage});const a=async()=>{var V,B,J,G;try{if(v.value=!0,!l.name||!l.eventType||!l.price||!l.description||!l.packs)throw new Error("Please fill in all required fields");const Q=parseFloat(l.additional_price_percentage);if(isNaN(Q)||Q<0||Q>100)throw new Error("Additional guest price percentage must be between 0% and 100%");const H=new FormData;H.append("id",l.id),H.append("name",l.name),H.append("eventType",l.eventType),H.append("price",l.price),H.append("description",l.description),H.append("packs",l.packs),H.append("status",l.status),H.append("inclusions",JSON.stringify(l.inclusions.filter(p=>p.trim()))),H.append("additional_price_percentage",l.additional_price_percentage),l.image instanceof File&&H.append("image",l.image);const P=await oe.post("http://127.0.0.1:8000/api/update-package",H,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:`Bearer ${i}`}});if(P.data.status===200)await Z.fire({title:"Success",text:"Package updated successfully",icon:"success"}),t("update"),t("close");else throw new Error(P.data.message||"Failed to update package")}catch(Q){console.error("Error updating package:",Q);let H="Failed to update package. Please try again.";if((B=(V=Q.response)==null?void 0:V.data)!=null&&B.message)H=Q.response.data.message;else if((G=(J=Q.response)==null?void 0:J.data)!=null&&G.errors){const P=Q.response.data.errors;H=Object.entries(P).map(([p,o])=>`${p}: ${o.join(", ")}`).join(`
`)}else Q.message&&(H=Q.message);await Z.fire({title:"Error",text:H,icon:"error"})}finally{v.value=!1}},m=async()=>{try{if(k.value=!0,w.value){b.value=w.value,_.value=!0;return}if(l.previewImage){const V=await oe.get(`http://127.0.0.1:8000/storage/${l.previewImage}`,{responseType:"arraybuffer",headers:{Authorization:`Bearer ${i}`}}),B=new Blob([V.data],{type:"image/jpeg"}),J=new FileReader;J.onloadend=()=>{b.value=J.result,_.value=!0},J.readAsDataURL(B)}}catch(V){console.error("Error loading image for editing:",V),Z.fire({title:"Error",text:"Failed to load image for editing. Please try again.",icon:"error"})}finally{k.value=!1}},$=V=>{var Q,H;const B=(H=(Q=V.target)==null?void 0:Q.files)==null?void 0:H[0];if(!B)return;if(!["image/jpeg","image/png","image/webp"].includes(B.type)){Z.fire({title:"Error",text:"Please upload a valid image file (JPEG, PNG, or WebP)",icon:"error"});return}l.image=B;const G=new FileReader;G.onload=P=>{b.value=P.target.result,_.value=!0},G.readAsDataURL(B)},T=()=>{if(C.value)try{const V=C.value.getCroppedCanvas({width:1600,height:900,imageSmoothingQuality:"high",fillColor:"#fff"});w.value=V.toDataURL("image/jpeg",.9),V.toBlob(B=>{B&&(l.image=new File([B],"package-image.jpg",{type:"image/jpeg",lastModified:new Date().getTime()}),l.previewImage=null,A.value=!0)},"image/jpeg",.9),_.value=!1}catch(V){console.error("Error applying crop:",V),Z.fire({title:"Error",text:"Failed to crop image. Please try again.",icon:"error"})}},h=()=>{_.value=!1,w.value||(l.image=null,b.value=null)},K=()=>{C.value&&C.value.rotate(-90)},U=()=>{C.value&&C.value.rotate(90)},D=()=>{C.value&&C.value.zoom(.1)},R=()=>{C.value&&C.value.zoom(-.1)},x=()=>{C.value&&C.value.reset()},y=()=>{A.value=!1;const V=document.createElement("input");V.type="file",V.accept="image/*",V.onchange=$,V.click()},u=ee(()=>w.value?w.value:l.previewImage?`http://127.0.0.1:8000/storage/${l.previewImage}`:null),I=()=>{l.inclusions.push("")},F=V=>{l.inclusions.length>1&&(l.inclusions=l.inclusions.filter((B,J)=>J!==V))},z=()=>{l.eventType==="Other"&&!l.customEventType?l.inclusions=[...et.Other]:l.eventType&&l.eventType!=="Other"&&(l.inclusions=[...et[l.eventType]])};return(V,B)=>(n(),d(te,null,[e("div",{class:"modal-overlay",onClick:B[10]||(B[10]=ce(J=>V.$emit("close"),["self"]))},[e("div",hf,[e("div",kf,[B[12]||(B[12]=e("h2",null,"Edit Package",-1)),e("button",{class:"close-btn",onClick:B[0]||(B[0]=J=>V.$emit("close"))},B[11]||(B[11]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",{onSubmit:ce(a,["prevent"]),class:"edit-form"},[e("div",_f,[B[20]||(B[20]=e("h3",null,"Package Details",-1)),e("div",$f,[B[13]||(B[13]=e("label",{for:"packageName"},"Package Name",-1)),O(e("input",{type:"text",id:"packageName","onUpdate:modelValue":B[1]||(B[1]=J=>l.name=J),required:"",placeholder:"Enter package name"},null,512),[[Y,l.name]])]),e("div",wf,[e("div",Cf,[B[15]||(B[15]=e("label",{for:"eventType"},"Event Type",-1)),O(e("select",{id:"eventType","onUpdate:modelValue":B[2]||(B[2]=J=>l.eventType=J),required:"",onChange:z},B[14]||(B[14]=[he('<option value="" data-v-af78476b>Select event type</option><option value="Wedding" data-v-af78476b>Wedding</option><option value="Debut" data-v-af78476b>Debut</option><option value="Christening" data-v-af78476b>Christening</option><option value="Party" data-v-af78476b>Party</option><option value="Other" data-v-af78476b>Other</option>',6)]),544),[[ue,l.eventType]])]),l.eventType==="Other"?(n(),d("div",Pf,[B[16]||(B[16]=e("label",{for:"customEventType"},"Custom Event Type",-1)),O(e("input",{type:"text",id:"customEventType","onUpdate:modelValue":B[3]||(B[3]=J=>l.customEventType=J),required:"",placeholder:"Enter custom event type"},null,512),[[Y,l.customEventType]])])):N("",!0),e("div",Af,[B[17]||(B[17]=e("label",{for:"price"},"Price (₱)",-1)),O(e("input",{type:"number",id:"price","onUpdate:modelValue":B[4]||(B[4]=J=>l.price=J),required:"",min:"0",step:"0.01",placeholder:"Enter price"},null,512),[[Y,l.price]])]),e("div",Tf,[B[18]||(B[18]=e("label",{for:"additional_price_percentage"},"Additional Guest Price (%)",-1)),O(e("input",{type:"number",id:"additional_price_percentage","onUpdate:modelValue":B[5]||(B[5]=J=>l.additional_price_percentage=J),required:"",min:"0",max:"100",step:"0.01",placeholder:"Enter additional guest price percentage"},null,512),[[Y,l.additional_price_percentage]])])]),e("div",Sf,[B[19]||(B[19]=e("label",{for:"description"},"Description",-1)),O(e("textarea",{id:"description","onUpdate:modelValue":B[6]||(B[6]=J=>l.description=J),required:"",rows:"4",placeholder:"Enter package description"},null,512),[[Y,l.description]])])]),e("div",xf,[B[25]||(B[25]=e("h3",null,"Package Image",-1)),e("div",Ef,[!w.value&&!l.previewImage?(n(),d("div",If,[e("input",{type:"file",id:"image",onChange:$,accept:"image/*",class:"file-input"},null,32),B[21]||(B[21]=e("i",{class:"fas fa-cloud-upload-alt"},null,-1)),B[22]||(B[22]=e("span",null,"Click to upload image",-1))])):(n(),d("div",Df,[e("img",{src:u.value,alt:"Package Preview",class:"image-preview"},null,8,Mf),e("div",Nf,[A.value?(n(),d("button",{key:0,type:"button",onClick:m,class:"action-btn"},B[23]||(B[23]=[e("i",{class:"fas fa-crop"},null,-1),E(" Edit ")]))):N("",!0),e("button",{type:"button",onClick:y,class:"action-btn"},B[24]||(B[24]=[e("i",{class:"fas fa-image"},null,-1),E(" Change Image ")]))])]))])]),e("div",Ff,[e("div",{class:"section-header"},[B[27]||(B[27]=e("h3",null,"Inclusions",-1)),e("button",{type:"button",onClick:I,class:"add-btn"},B[26]||(B[26]=[e("i",{class:"fas fa-plus"},null,-1),E(" Add Inclusion ")]))]),e("div",Bf,[(n(!0),d(te,null,ae(l.inclusions,(J,G)=>(n(),d("div",{key:G,class:"inclusion-item"},[O(e("input",{type:"text","onUpdate:modelValue":Q=>l.inclusions[G]=Q,placeholder:"Enter inclusion",required:""},null,8,Uf),[[Y,l.inclusions[G]]]),e("button",{type:"button",onClick:Q=>F(G),class:"remove-btn",disabled:l.inclusions.length===1},B[28]||(B[28]=[e("i",{class:"fas fa-minus"},null,-1)]),8,Rf)]))),128))])]),e("div",Lf,[B[33]||(B[33]=e("h3",null,"Package Status",-1)),e("div",Of,[e("div",Vf,[B[30]||(B[30]=e("label",{for:"status"},"Status",-1)),O(e("select",{id:"status","onUpdate:modelValue":B[7]||(B[7]=J=>l.status=J),required:""},B[29]||(B[29]=[e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"draft"},"Draft",-1)]),512),[[ue,l.status]])]),e("div",qf,[B[32]||(B[32]=e("label",null,"Packs",-1)),O(e("select",{"onUpdate:modelValue":B[8]||(B[8]=J=>l.packs=J),class:"form-select",required:""},B[31]||(B[31]=[he('<option value="" disabled data-v-af78476b>Select number of packs</option><option value="50" data-v-af78476b>50 pax</option><option value="100" data-v-af78476b>100 pax</option><option value="150" data-v-af78476b>150 pax</option><option value="200" data-v-af78476b>200 pax</option><option value="250" data-v-af78476b>250 pax</option><option value="300" data-v-af78476b>300 pax</option><option value="350" data-v-af78476b>350 pax</option><option value="400" data-v-af78476b>400 pax</option><option value="450" data-v-af78476b>450 pax</option><option value="500" data-v-af78476b>500 pax</option>',11)]),512),[[ue,l.packs]])])])]),e("div",jf,[e("button",{type:"button",class:"cancel-btn",onClick:B[9]||(B[9]=J=>V.$emit("close"))},"Cancel"),e("button",{type:"submit",class:"submit-btn",disabled:v.value||!A.value&&!l.previewImage},[v.value?(n(),d("i",Gf)):N("",!0),E(" "+r(v.value?"Saving...":"Save Changes"),1)],8,zf)])],32)])]),(n(),de(Qe,{to:"body"},[_.value?(n(),d("div",Jf,[e("div",Wf,[e("div",Qf,[e("div",{class:"cropper-modal-header"},[B[35]||(B[35]=e("h3",null,"Crop Image",-1)),e("button",{onClick:h,class:"close-btn"},B[34]||(B[34]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Hf,[pe(M(We),{ref_key:"cropper",ref:C,src:b.value,"aspect-ratio":16/9,"view-mode":2,guides:!0,background:!0,rotatable:!0,zoomable:!0,movable:!0,responsive:!0,modal:!0,autoCropArea:1,center:!0,highlight:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0},null,8,["src"])]),e("div",{class:"cropper-modal-footer"},[e("div",{class:"cropper-controls"},[e("button",{type:"button",onClick:K,class:"control-btn"},B[36]||(B[36]=[e("i",{class:"fas fa-undo"},null,-1),E(" Rotate Left ")])),e("button",{type:"button",onClick:U,class:"control-btn"},B[37]||(B[37]=[e("i",{class:"fas fa-redo"},null,-1),E(" Rotate Right ")])),e("button",{type:"button",onClick:D,class:"control-btn"},B[38]||(B[38]=[e("i",{class:"fas fa-search-plus"},null,-1),E(" Zoom In ")])),e("button",{type:"button",onClick:R,class:"control-btn"},B[39]||(B[39]=[e("i",{class:"fas fa-search-minus"},null,-1),E(" Zoom Out ")])),e("button",{type:"button",onClick:x,class:"control-btn"},B[40]||(B[40]=[e("i",{class:"fas fa-sync"},null,-1),E(" Reset ")]))]),e("div",{class:"action-buttons"},[e("button",{type:"button",onClick:h,class:"btn-secondary"}," Cancel "),e("button",{type:"button",onClick:T,class:"btn-primary"}," Apply ")])])])])])):N("",!0)]))],64))}},Zf=ne(Yf,[["__scopeId","data-v-af78476b"]]),Pt={wedding:{background:"#ffebee",color:"#c62828"},debut:{background:"#fff3e0",color:"#ef6c00"},christening:{background:"#e3f2fd",color:"#1565c0"},party:{background:"#fce4ec",color:"#c2185b"}},Kf=S=>{let s=0;for(let v=0;v<S.length;v++)s=S.charCodeAt(v)+((s<<5)-s);const c=Math.abs(s)%360,t=25+Math.abs(s)%30,i=85+Math.abs(s)%10;return{background:`hsl(${c}, ${t}%, ${i}%)`,color:`hsl(${c}, ${t+20}%, 25%)`}},Vt=S=>{if(!S)return Pt.other;const s=S.toLowerCase();return Pt[s]||Kf(S)};const Xf={name:"PackagesManagement",components:{AdminSidebar:vt,AddPackageModal:Ot,EditPackageModal:Zf,ConfirmationModal:Ie},setup(){ye();const S=g([]),s=g(""),c=g(""),t=g(!1),i=g(!1),v=g(!1),w=g(null),k=ee(()=>S.value.filter(U=>{const D=!s.value||U.package_name.toLowerCase().includes(s.value.toLowerCase())||U.package_type.toLowerCase().includes(s.value.toLowerCase()),R=!c.value||(c.value==="Other"?!["Wedding","Debut","Christening","Party"].includes(U.package_type):U.package_type===c.value);return D&&R})),_=async()=>{try{const U=await oe.get("/api/get-all-packages");S.value=U.data.map(D=>({...D,showAll:!1}))}catch(U){console.error("Error fetching packages:",U)}},b=()=>{c.value=""},C=U=>U.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),A=()=>{t.value=!0},l=U=>{w.value=U,i.value=!0},f=U=>{w.value=U,v.value=!0},a=async()=>{var U,D;try{const R=await oe.post(`/api/delete-package/${w.value.id}`);R.data.status===200&&(Z.fire({title:"Success",text:R.data.message,icon:"success"}),await _(),v.value=!1)}catch(R){console.error("Error deleting package:",R),Z.fire({title:"Error",text:((D=(U=R.response)==null?void 0:U.data)==null?void 0:D.message)||"Failed to delete package",icon:"error"})}},m=async()=>{await _(),t.value=!1},$=async()=>{await _(),i.value=!1},T="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNFNUU3RUIiLz48cGF0aCBkPSJNODAgOTBIMTIwVjExMEg4MFY5MFoiIGZpbGw9IiM5Q0EzQUYiLz48cGF0aCBkPSJNNjUgNjBIMTM1VjgwSDY1VjYwWiIgZmlsbD0iIzlDQTNBRiIvPjwvc3ZnPg==",h=U=>U?`/storage/${U}`:T,K=U=>{const D=Vt(U);return{backgroundColor:D.background,color:D.color}};return me(async()=>{await _()}),{packages:S,searchQuery:s,package_typeFilter:c,showAddModal:t,showEditModal:i,showDeleteModal:v,selectedPackage:w,filteredPackages:k,handleSearch:b,formatNumber:C,openAddPackageModal:A,editPackage:l,deletePackage:f,confirmDeletePackage:a,handlePackageAdded:m,handlePackageUpdated:$,getImageUrl:h,getEventTypeStyle:K}}},eg={class:"packages-management"},tg={class:"management-content"},sg={class:"page-header"},ag={class:"header-actions"},og={class:"search-bar"},ng={class:"filters"},lg={class:"packages-grid"},ig={class:"package-image"},rg=["src","alt"],dg={class:"package-actions"},ug=["onClick"],cg=["onClick"],pg={class:"package-content"},vg={class:"package-header"},mg={class:"package-price"},fg={class:"package-description"},gg={class:"package-inclusions"},yg=["onClick"],bg={class:"package-stats"},hg={class:"stat"},kg={key:0,class:"no-results"};function _g(S,s,c,t,i,v){const w=ke("AddPackageModal"),k=ke("EditPackageModal"),_=ke("ConfirmationModal");return n(),d("div",eg,[e("main",tg,[e("div",sg,[s[10]||(s[10]=e("h1",null,"Packages Management",-1)),e("div",ag,[e("div",og,[s[7]||(s[7]=e("i",{class:"fas fa-search"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=b=>t.searchQuery=b),placeholder:"Search packages...",onInput:s[1]||(s[1]=(...b)=>t.handleSearch&&t.handleSearch(...b))},null,544),[[Y,t.searchQuery]])]),e("div",ng,[O(e("select",{"onUpdate:modelValue":s[2]||(s[2]=b=>t.package_typeFilter=b)},s[8]||(s[8]=[he('<option value="" data-v-377864f0>All Event Types</option><option value="Wedding" data-v-377864f0>Wedding</option><option value="Debut" data-v-377864f0>Debut</option><option value="Christening" data-v-377864f0>Christening</option><option value="Party" data-v-377864f0>Party</option><option value="Other" data-v-377864f0>Other</option>',6)]),512),[[ue,t.package_typeFilter]]),e("button",{class:"add-package-btn",onClick:s[3]||(s[3]=(...b)=>t.openAddPackageModal&&t.openAddPackageModal(...b))},s[9]||(s[9]=[e("i",{class:"fas fa-plus"},null,-1),E(" Add Package ")]))])])]),e("div",lg,[(n(!0),d(te,null,ae(t.filteredPackages,b=>(n(),d("div",{key:b.id,class:"package-card"},[e("div",ig,[e("img",{src:t.getImageUrl(b.package_image),alt:b.package_name},null,8,rg),e("div",dg,[e("button",{onClick:C=>t.editPackage(b),class:"action-btn edit"},s[11]||(s[11]=[e("i",{class:"fas fa-edit"},null,-1)]),8,ug),e("button",{onClick:C=>t.deletePackage(b),class:"action-btn delete"},s[12]||(s[12]=[e("i",{class:"fas fa-trash"},null,-1)]),8,cg)])]),e("div",pg,[e("div",vg,[e("h3",null,r(b.package_name),1),e("div",{class:"event-type",style:Je(t.getEventTypeStyle(b.package_type))},r(b.package_type),5)]),e("div",mg,[E(" ₱"+r(t.formatNumber(b.package_price))+" ",1),s[13]||(s[13]=e("br",null,null,-1)),e("span",{class:L(["event-type",b.status.toLowerCase()])},r(b.status),3)]),e("p",fg,r(b.description),1),e("div",gg,[s[14]||(s[14]=e("h4",null,"Inclusions:",-1)),e("ul",null,[(n(!0),d(te,null,ae(b.showAll?JSON.parse(b.package_inclusion):JSON.parse(b.package_inclusion).slice(0,3),(C,A)=>(n(),d("li",{key:A},r(C),1))),128))]),JSON.parse(b.package_inclusion).length>3?(n(),d("button",{key:0,onClick:C=>b.showAll=!b.showAll,class:"show-more-btn"},r(b.showAll?"Show Less":"Show More"),9,yg)):N("",!0)]),e("div",bg,[e("div",hg,[s[15]||(s[15]=e("i",{class:"fas fa-calendar-check"},null,-1)),e("span",null,r(b.bookingsCount)+" Bookings",1)])])])]))),128))]),t.filteredPackages.length===0?(n(),d("div",kg,[s[16]||(s[16]=e("i",{class:"fas fa-box-open"},null,-1)),e("p",null,"No packages founds in "+r(t.package_typeFilter),1)])):N("",!0)]),t.showAddModal?(n(),de(w,{key:0,onClose:s[4]||(s[4]=b=>t.showAddModal=!1),onSuccess:t.handlePackageAdded},null,8,["onSuccess"])):N("",!0),t.showEditModal?(n(),de(k,{key:1,package:t.selectedPackage,onClose:s[5]||(s[5]=b=>t.showEditModal=!1),onUpdate:t.handlePackageUpdated},null,8,["package","onUpdate"])):N("",!0),t.showDeleteModal?(n(),de(_,{key:2,title:"Delete Package",message:"Are you sure you want to delete this package? This action cannot be undone.",type:"danger",confirmText:"Delete",onConfirm:t.confirmDeletePackage,onClose:s[6]||(s[6]=b=>t.showDeleteModal=!1)},null,8,["onConfirm"])):N("",!0)])}const $g=ne(Xf,[["render",_g],["__scopeId","data-v-377864f0"]]);const wg={class:"modal-content"},Cg={class:"modal-header"},Pg={class:"form-group"},Ag={class:"form-group"},Tg={class:"form-group"},Sg={key:0,class:"form-group"},xg={class:"form-group"},Eg={key:0,class:"upload-content"},Ig={key:1,class:"preview-container"},Dg=["src"],Mg={class:"form-group"},Ng={key:0,class:"upload-content"},Fg={key:1,class:"album-grid"},Bg=["src"],Ug=["onClick"],Rg={class:"form-actions"},Lg=["disabled"],Og={key:0,class:"fas fa-spinner fa-spin"},Vg={key:0,class:"cropper-modal-wrapper"},qg={class:"cropper-modal"},jg={class:"cropper-modal-content"},zg={class:"cropper-modal-body"},Gg={__name:"AddportfolioModal",emits:["close","success"],setup(S,{emit:s}){const c=s,t=Te({title:"",description:"",eventType:"",customEventType:"",image:null,albumImages:[]}),i=g(null),v=g([]),w=g(!1),k=g(!1),_=g(null),b=g(null),C=g(!1),A=u=>{var V;const I=(V=u.target.files)==null?void 0:V[0];if(!I)return;if(!["image/jpeg","image/png","image/webp"].includes(I.type)){alert("Please upload a valid image file (JPEG, PNG, or WebP)"),u.target.value="";return}const z=new FileReader;z.onload=B=>{_.value=B.target.result,k.value=!0},z.readAsDataURL(I)},l=u=>{const I=Array.from(u.target.files||[]),F=["image/jpeg","image/png","image/webp"],z=5*1024*1024,V=I.filter(B=>F.includes(B.type)?B.size>z?(alert(`File ${B.name} is too large. Maximum size is 5MB.`),!1):!0:!1);if(V.length!==I.length&&alert("Some files were skipped. Please ensure all files are images (JPEG, PNG, or WebP) and under 5MB."),t.albumImages.length+V.length>10){alert("Maximum 10 images allowed in the album.");return}t.albumImages.push(...V),V.forEach(B=>{const J=new FileReader;J.onload=G=>{v.value.push(G.target.result)},J.readAsDataURL(B)})},f=u=>{t.albumImages.splice(u,1),v.value.splice(u,1)},a=()=>{t.eventType!=="Other"&&(t.customEventType="")},m=()=>{b.value.rotate(-90)},$=()=>{b.value.rotate(90)},T=()=>{b.value.zoom(.1)},h=()=>{b.value.zoom(-.1)},K=()=>{b.value.reset()},U=()=>{k.value=!1,_.value=null,t.image=null,i.value=null,this.$refs.coverImageInput&&(this.$refs.coverImageInput.value="")},D=()=>{const u=b.value.getCroppedCanvas();i.value=u.toDataURL(),u.toBlob(I=>{const F=new File([I],"cropped-image.jpg",{type:"image/jpeg"});t.image=F,C.value=!0},"image/jpeg"),k.value=!1},R=async()=>{var u,I;if(!w.value){if(!t.image){Z.fire({title:"Error",text:"Please upload a cover image",icon:"error"});return}try{w.value=!0;const F=new FormData;F.append("title",t.title),F.append("description",t.description),F.append("event_type",t.eventType==="Other"?t.customEventType:t.eventType),F.append("main_image_url",t.image),t.albumImages&&t.albumImages.length>0&&t.albumImages.forEach((V,B)=>{F.append(`album_images[${B}]`,V)}),(await oe.post("http://127.0.0.1:8000/api/add-portfolio",F,{headers:{"Content-Type":"multipart/form-data"}})).status===200&&Z.fire({title:"Success",text:"Portfolio added successfully",icon:"success"}).then(()=>{c("success"),c("close")})}catch(F){console.error("Error adding portfolio:",F),Z.fire({title:"Error",text:((I=(u=F.response)==null?void 0:u.data)==null?void 0:I.message)||"Failed to add portfolio",icon:"error"})}finally{w.value=!1}}},x=()=>{i.value&&(_.value=i.value,k.value=!0)},y=()=>{const u=document.createElement("input");u.type="file",u.accept="image/*",u.onchange=A,u.click()};return(u,I)=>(n(),d(te,null,[e("div",{class:"modal-overlay",onClick:I[7]||(I[7]=ce(F=>u.$emit("close"),["self"]))},[e("div",wg,[e("div",Cg,[I[9]||(I[9]=e("h2",null,"Add New Portfolio",-1)),e("button",{class:"close-btn",onClick:I[0]||(I[0]=F=>u.$emit("close"))},I[8]||(I[8]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",{onSubmit:ce(R,["prevent"]),class:"portfolio-form"},[e("div",Pg,[I[10]||(I[10]=e("label",{for:"portfolioName"},"Portfolio Title",-1)),O(e("input",{type:"text",id:"portfolioName","onUpdate:modelValue":I[1]||(I[1]=F=>t.title=F),required:"",placeholder:"Enter Portfolio Title",class:"form-input"},null,512),[[Y,t.title]])]),e("div",Ag,[I[11]||(I[11]=e("label",{for:"description"},"Portfolio Description",-1)),O(e("textarea",{id:"description","onUpdate:modelValue":I[2]||(I[2]=F=>t.description=F),required:"",rows:"4",placeholder:"Enter Portfolio Description",class:"form-input"},null,512),[[Y,t.description]])]),e("div",Tg,[I[13]||(I[13]=e("label",{for:"eventType"},"Event Type",-1)),O(e("select",{id:"eventType","onUpdate:modelValue":I[3]||(I[3]=F=>t.eventType=F),required:"",class:"form-input",onChange:a},I[12]||(I[12]=[he('<option value="" data-v-2344c243>Select Event Type</option><option value="Wedding" data-v-2344c243>Wedding</option><option value="Debut" data-v-2344c243>Debut</option><option value="Christening" data-v-2344c243>Christening</option><option value="Party" data-v-2344c243>Party</option><option value="Other" data-v-2344c243>Other</option>',6)]),544),[[ue,t.eventType]])]),t.eventType==="Other"?(n(),d("div",Sg,[I[14]||(I[14]=e("label",{for:"customEventType"},"Custom Event Type",-1)),O(e("input",{type:"text",id:"customEventType","onUpdate:modelValue":I[4]||(I[4]=F=>t.customEventType=F),required:"",placeholder:"Enter custom event type",class:"form-input"},null,512),[[Y,t.customEventType]])])):N("",!0),e("div",xg,[I[20]||(I[20]=e("label",{for:"coverImage"},"Cover Image",-1)),e("div",{class:L(["upload-container",{"has-image":i.value}])},[i.value?(n(),d("div",Ig,[e("img",{src:i.value,alt:"Preview",class:"image-preview"},null,8,Dg),e("div",{class:"preview-overlay"},[e("div",{class:"preview-actions"},[e("button",{type:"button",onClick:x,class:"action-btn"},I[18]||(I[18]=[e("i",{class:"fas fa-crop"},null,-1),E(" Edit ")])),e("button",{type:"button",onClick:y,class:"action-btn"},I[19]||(I[19]=[e("i",{class:"fas fa-image"},null,-1),E(" Change Image ")]))])])])):(n(),d("div",Eg,[e("input",{type:"file",id:"coverImage",ref:"coverImageInput",onChange:A,accept:"image/*",class:"file-input"},null,544),I[15]||(I[15]=e("i",{class:"fas fa-cloud-upload-alt"},null,-1)),I[16]||(I[16]=e("span",null,"Click to upload cover image",-1)),I[17]||(I[17]=e("p",{class:"upload-hint"},"Supports: JPG, PNG, WebP (Max 5MB)",-1))]))],2)]),e("div",Mg,[I[24]||(I[24]=e("label",{for:"albumImages"},"Album Images",-1)),e("div",{class:L(["upload-container album-container",{"has-images":v.value.length>0}])},[e("input",{type:"file",id:"albumImages",ref:"albumImagesInput",onChange:l,accept:"image/*",multiple:"",class:"file-input"},null,544),v.value.length===0?(n(),d("div",Ng,I[21]||(I[21]=[e("i",{class:"fas fa-images"},null,-1),e("span",null,"Click to upload album images",-1),e("p",{class:"upload-hint"},"Select multiple images (Max 10 images)",-1)]))):(n(),d("div",Fg,[(n(!0),d(te,null,ae(v.value,(F,z)=>(n(),d("div",{key:z,class:"album-item"},[e("img",{src:F,alt:"Album preview"},null,8,Bg),e("button",{type:"button",onClick:V=>f(z),class:"remove-image-btn"},I[22]||(I[22]=[e("i",{class:"fas fa-times"},null,-1)]),8,Ug)]))),128)),v.value.length<10?(n(),d("div",{key:0,class:"add-more-images",onClick:I[5]||(I[5]=F=>u.$refs.albumImagesInput.click())},I[23]||(I[23]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"Add More",-1)]))):N("",!0)]))],2)]),e("div",Rg,[e("button",{type:"button",class:"cancel-btn",onClick:I[6]||(I[6]=F=>u.$emit("close"))},"Cancel"),e("button",{type:"submit",class:"submit-btn",disabled:w.value},[w.value?(n(),d("i",Og)):N("",!0),E(" "+r(w.value?"Adding...":"Add Portfolio"),1)],8,Lg)])],32)])]),(n(),de(Qe,{to:"body"},[k.value?(n(),d("div",Vg,[e("div",qg,[e("div",jg,[e("div",{class:"cropper-modal-header"},[I[25]||(I[25]=e("h3",null,"Crop Image",-1)),e("button",{onClick:U,class:"close-btn"},"×")]),e("div",zg,[pe(M(We),{ref_key:"cropper",ref:b,src:_.value,"aspect-ratio":16/9,"view-mode":2,guides:!0,background:!0,rotatable:!0,zoomable:!0,movable:!0,responsive:!0,modal:!0,autoCropArea:1,center:!0,highlight:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0},null,8,["src"])]),e("div",{class:"cropper-modal-footer"},[e("div",{class:"footer-content"},[e("div",{class:"cropper-controls"},[e("button",{type:"button",onClick:m,class:"control-btn"},"Rotate Left"),e("button",{type:"button",onClick:$,class:"control-btn"},"Rotate Right"),e("button",{type:"button",onClick:T,class:"control-btn"},"Zoom In"),e("button",{type:"button",onClick:h,class:"control-btn"},"Zoom Out"),e("button",{type:"button",onClick:K,class:"control-btn"},"Reset")]),e("div",{class:"action-buttons"},[e("button",{type:"button",onClick:U,class:"btn-secondary"},"Cancel"),e("button",{type:"button",onClick:D,class:"btn-primary"},"Apply")])])])])])])):N("",!0)]))],64))}},Jg=ne(Gg,[["__scopeId","data-v-2344c243"]]);const Wg={class:"modal-content"},Qg={class:"modal-header"},Hg={class:"portfolio-form"},Yg={class:"form-group"},Zg={class:"form-group"},Kg={class:"form-group"},Xg={key:0,class:"form-group"},e1={class:"form-group"},t1={class:"preview-container"},s1=["src"],a1={class:"form-group"},o1={class:"upload-container album-container"},n1={key:0,class:"upload-area"},l1={key:1,class:"album-grid"},i1=["src","alt"],r1={key:0,class:"cropper-modal-wrapper"},d1={class:"cropper-modal"},u1={class:"cropper-modal-content"},c1={class:"cropper-modal-body"},p1={__name:"ViewPortfolioModal",props:{portfolio:{type:Object,required:!0}},emits:["close","update"],setup(S,{emit:s}){var K;const c=S,t=Te({title:c.portfolio.title||"",description:c.portfolio.description||"",eventType:c.portfolio.event_type||"",customEventType:"",image:c.portfolio.main_image_url,images:c.portfolio.images_url}),i=g(c.portfolio.image_url||null);g(((K=c.portfolio.album_images)==null?void 0:K.map(U=>U.url))||[]),g(!1);const v=g(!1),w=g(null),k=g(null),_=g(!0),b=()=>{t.eventType!=="Other"&&(t.customEventType="")},C=ee(()=>{try{return typeof c.portfolio.images_url=="string"?JSON.parse(c.portfolio.images_url):Array.isArray(c.portfolio.images_url)?c.portfolio.images_url:[]}catch(U){return console.error("Error parsing images:",U),[]}}),A=()=>{k.value.rotate(-90)},l=()=>{k.value.rotate(90)},f=U=>U?U.startsWith("http")?U:`/storage/${U}`:"",a=()=>{k.value.zoom(.1)},m=()=>{k.value.zoom(-.1)},$=()=>{k.value.reset()},T=()=>{v.value=!1,w.value=null,i.value||(t.image=null)},h=()=>{const U=k.value.getCroppedCanvas();i.value=U.toDataURL(),U.toBlob(D=>{const R=new File([D],"cropped-image.jpg",{type:"image/jpeg"});t.image=R,_.value=!0},"image/jpeg"),v.value=!1};return me(()=>{c.portfolio.event_type&&(["Wedding","Debut","Christening","Party"].includes(c.portfolio.event_type)?t.eventType=c.portfolio.event_type:(t.eventType="Other",t.customEventType=c.portfolio.event_type))}),(U,D)=>(n(),d(te,null,[e("div",{class:"modal-overlay",onClick:D[5]||(D[5]=ce(R=>U.$emit("close"),["self"]))},[e("div",Wg,[e("div",Qg,[D[7]||(D[7]=e("h2",null,"View Portfolio",-1)),e("button",{class:"close-btn",onClick:D[0]||(D[0]=R=>U.$emit("close"))},D[6]||(D[6]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",Hg,[e("div",Yg,[D[8]||(D[8]=e("label",{for:"portfolioName"},"Portfolio Title",-1)),O(e("input",{type:"text",id:"portfolioName","onUpdate:modelValue":D[1]||(D[1]=R=>t.title=R),required:"",placeholder:"Enter Portfolio Title",class:"form-input"},null,512),[[Y,t.title]])]),e("div",Zg,[D[9]||(D[9]=e("label",{for:"description"},"Portfolio Description",-1)),O(e("textarea",{id:"description","onUpdate:modelValue":D[2]||(D[2]=R=>t.description=R),required:"",rows:"4",placeholder:"Enter Portfolio Description",class:"form-input"},null,512),[[Y,t.description]])]),e("div",Kg,[D[11]||(D[11]=e("label",{for:"eventType"},"Event Type",-1)),O(e("select",{id:"eventType","onUpdate:modelValue":D[3]||(D[3]=R=>t.eventType=R),required:"",class:"form-input",onChange:b},D[10]||(D[10]=[he('<option value="" data-v-3c43379a>Select Event Type</option><option value="Wedding" data-v-3c43379a>Wedding</option><option value="Debut" data-v-3c43379a>Debut</option><option value="Christening" data-v-3c43379a>Christening</option><option value="Party" data-v-3c43379a>Party</option><option value="Other" data-v-3c43379a>Other</option>',6)]),544),[[ue,t.eventType]])]),t.eventType==="Other"?(n(),d("div",Xg,[D[12]||(D[12]=e("label",{for:"customEventType"},"Custom Event Type",-1)),O(e("input",{type:"text",id:"customEventType","onUpdate:modelValue":D[4]||(D[4]=R=>t.customEventType=R),required:"",placeholder:"Enter custom event type",class:"form-input"},null,512),[[Y,t.customEventType]])])):N("",!0),e("div",e1,[D[13]||(D[13]=e("label",{for:"coverImage"},"Cover Image ",-1)),e("div",{class:L(["upload-container",{"has-image":i.value}])},[e("div",t1,[e("img",{src:f(t.image),alt:"Preview",class:"image-preview"},null,8,s1)])],2)]),e("div",a1,[D[15]||(D[15]=e("label",{for:"albumImages"},"Album Images",-1)),e("div",o1,[C.value.length?(n(),d("div",l1,[(n(!0),d(te,null,ae(C.value,(R,x)=>(n(),d("div",{key:x,class:"album-item"},[e("img",{src:f(R),alt:`Album image ${x+1}`},null,8,i1)]))),128))])):(n(),d("div",n1,D[14]||(D[14]=[e("div",{class:"upload-content"},[e("i",{class:"fas fa-images"}),e("span",null,"No album images available")],-1)])))])])])])]),(n(),de(Qe,{to:"body"},[v.value?(n(),d("div",r1,[e("div",d1,[e("div",u1,[e("div",{class:"cropper-modal-header"},[D[16]||(D[16]=e("h3",null,"Crop Image",-1)),e("button",{onClick:T,class:"close-btn"},"×")]),e("div",c1,[pe(M(We),{ref_key:"cropper",ref:k,src:w.value,"aspect-ratio":16/9,"view-mode":2,guides:!0,background:!0,rotatable:!0,zoomable:!0,movable:!0,responsive:!0,modal:!0,autoCropArea:1,center:!0,highlight:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0},null,8,["src"])]),e("div",{class:"cropper-modal-footer"},[e("div",{class:"footer-content"},[e("div",{class:"cropper-controls"},[e("button",{type:"button",onClick:A,class:"control-btn"},"Rotate Left"),e("button",{type:"button",onClick:l,class:"control-btn"},"Rotate Right"),e("button",{type:"button",onClick:a,class:"control-btn"},"Zoom In"),e("button",{type:"button",onClick:m,class:"control-btn"},"Zoom Out"),e("button",{type:"button",onClick:$,class:"control-btn"},"Reset")]),e("div",{class:"action-buttons"},[e("button",{type:"button",onClick:T,class:"btn-secondary"},"Cancel"),e("button",{type:"button",onClick:h,class:"btn-primary"},"Apply")])])])])])])):N("",!0)]))],64))}},v1=ne(p1,[["__scopeId","data-v-3c43379a"]]);const m1={class:"modal-content"},f1={class:"modal-header"},g1={class:"form-group"},y1={class:"form-group"},b1={class:"form-group"},h1={key:0,class:"form-group"},k1={class:"form-group"},_1={key:0,class:"upload-area"},$1={class:"upload-content"},w1={key:1,class:"preview-container"},C1=["src"],P1={class:"preview-actions"},A1={class:"form-group"},T1={key:0,class:"upload-area"},S1={class:"upload-content"},x1={class:"album-grid"},E1=["src"],I1=["onClick"],D1={class:"form-actions"},M1=["disabled"],N1={key:0,class:"fas fa-spinner fa-spin"},F1={key:0,class:"cropper-modal-wrapper"},B1={class:"cropper-modal"},U1={class:"cropper-modal-content"},R1={class:"cropper-modal-body"},L1={__name:"EditportfolioModal",props:{portfolio:{type:Object,required:!0}},emits:["close","update"],setup(S,{emit:s}){const c=S,t=s,i=Te({title:c.portfolio.title||"",description:c.portfolio.description||"",eventType:c.portfolio.event_type||"",customEventType:"",image:null,albumImages:[],removedImages:[]}),v=g(null),w=g([]),k=g(!1),_=g(!1),b=g(null),C=g(null),A=g(!1),l=g(null),f=g(new Set),a=J=>{var P,p;const G=(p=(P=J.target)==null?void 0:P.files)==null?void 0:p[0];if(!G)return;if(!["image/jpeg","image/png","image/webp"].includes(G.type)){Z.fire({title:"Error",text:"Please upload a valid image file (JPEG, PNG, or WebP)",icon:"error"});return}i.image=G;const H=new FileReader;H.onload=o=>{b.value=o.target.result,_.value=!0},H.readAsDataURL(G)},m=J=>{const G=Array.from(J.target.files||[]),Q=["image/jpeg","image/png","image/webp"],H=5*1024*1024,P=G.filter(p=>Q.includes(p.type)?p.size>H?(alert(`File ${p.name} is too large. Maximum size is 5MB.`),!1):!0:!1);if(P.length!==G.length&&alert("Some files were skipped. Please ensure all files are images (JPEG, PNG, or WebP) and under 5MB."),i.albumImages.length+P.length>10){alert("Maximum 10 images allowed in the album.");return}i.albumImages.push(...P),P.forEach(p=>{const o=new FileReader;o.onload=W=>{w.value.push(W.target.result)},o.readAsDataURL(p)})},$=J=>{const G=w.value[J];if(G.isExisting&&G.path&&(i.removedImages.push(G.path),f.value.add(G.path)),!G.isExisting){const Q=i.albumImages.findIndex((H,P)=>!w.value.slice(0,J).find(p=>!p.isExisting));Q!==-1&&i.albumImages.splice(Q,1)}w.value.splice(J,1)},T=()=>{i.eventType!=="Other"&&(i.customEventType="")},h=()=>{C.value&&C.value.rotate(-90)},K=()=>{C.value&&C.value.rotate(90)},U=()=>{C.value&&C.value.zoom(.1)},D=()=>{C.value&&C.value.zoom(-.1)},R=()=>{C.value&&C.value.reset()},x=()=>{_.value=!1,v.value||(i.image=null,b.value=null)},y=()=>{if(C.value)try{const J=C.value.getCroppedCanvas({width:1600,height:900,imageSmoothingQuality:"high",fillColor:"#fff"});v.value=J.toDataURL("image/jpeg",.9),J.toBlob(G=>{G&&(i.image=new File([G],"portfolio-image.jpg",{type:"image/jpeg",lastModified:new Date().getTime()}),A.value=!0)},"image/jpeg",.9),_.value=!1}catch(J){console.error("Error applying crop:",J),Z.fire({title:"Error",text:"Failed to crop image. Please try again.",icon:"error"})}},u=async()=>{var J,G;if(!k.value)try{k.value=!0;const Q=new FormData;Q.append("id",c.portfolio.id),Q.append("title",i.title),Q.append("description",i.description),Q.append("event_type",i.eventType==="Other"?i.customEventType:i.eventType),i.image&&Q.append("image",i.image),i.albumImages&&i.albumImages.length>0&&i.albumImages.forEach((p,o)=>{Q.append(`album_images[${o}]`,p)}),i.removedImages.length>0&&Q.append("removed_images",JSON.stringify(Array.from(i.removedImages)));const H=w.value.filter(p=>p.isExisting&&p.path&&!f.value.has(p.path)).map(p=>p.path);Q.append("existing_images",JSON.stringify(H)),(await oe.post("/api/update-portfolio",Q,{headers:{"Content-Type":"multipart/form-data"}})).status===200&&Z.fire({title:"Success",text:"Portfolio updated successfully",icon:"success"}).then(()=>{t("update"),t("close")})}catch(Q){console.error("Error updating portfolio:",Q),Z.fire({title:"Error",text:((G=(J=Q.response)==null?void 0:J.data)==null?void 0:G.message)||"Failed to update portfolio. Please try again.",icon:"error"})}finally{k.value=!1}},I=()=>{v.value&&(b.value=v.value,_.value=!0)},F=()=>{A.value=!1;const J=document.createElement("input");J.type="file",J.accept="image/*",J.onchange=a,J.click()},z=()=>{l.value.click()},V=J=>{Array.from(J.target.files).forEach(Q=>{if(Q.type.startsWith("image/")){i.albumImages.push(Q);const H=new FileReader;H.onload=P=>{w.value.push({path:null,url:P.target.result,isExisting:!1})},H.readAsDataURL(Q)}}),J.target.value=""};me(()=>{if(c.portfolio.event_type&&(["Wedding","Debut","Christening","Party"].includes(c.portfolio.event_type)?i.eventType=c.portfolio.event_type:(i.eventType="Other",i.customEventType=c.portfolio.event_type)),c.portfolio.main_image_url){const J=B(c.portfolio.main_image_url);v.value=J}if(c.portfolio.images_url){let J=[];try{J=typeof c.portfolio.images_url=="string"?JSON.parse(c.portfolio.images_url):c.portfolio.images_url,w.value=J.map(G=>({path:G,url:B(G),isExisting:!0}))}catch(G){console.error("Error parsing images:",G),w.value=[]}}});const B=J=>J?J.startsWith("http")?J:`/storage/${J}`:"";return(J,G)=>(n(),d(te,null,[e("div",{class:"modal-overlay",onClick:G[6]||(G[6]=ce(Q=>J.$emit("close"),["self"]))},[e("div",m1,[e("div",f1,[G[8]||(G[8]=e("h2",null,"Edit Portfolio",-1)),e("button",{class:"close-btn",onClick:G[0]||(G[0]=Q=>J.$emit("close"))},G[7]||(G[7]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",{onSubmit:ce(u,["prevent"]),class:"portfolio-form"},[e("div",g1,[G[9]||(G[9]=e("label",{for:"portfolioName"},"Portfolio Title",-1)),O(e("input",{type:"text",id:"portfolioName","onUpdate:modelValue":G[1]||(G[1]=Q=>i.title=Q),required:"",placeholder:"Enter Portfolio Title",class:"form-input"},null,512),[[Y,i.title]])]),e("div",y1,[G[10]||(G[10]=e("label",{for:"description"},"Portfolio Description",-1)),O(e("textarea",{id:"description","onUpdate:modelValue":G[2]||(G[2]=Q=>i.description=Q),required:"",rows:"4",placeholder:"Enter Portfolio Description",class:"form-input"},null,512),[[Y,i.description]])]),e("div",b1,[G[12]||(G[12]=e("label",{for:"eventType"},"Event Type",-1)),O(e("select",{id:"eventType","onUpdate:modelValue":G[3]||(G[3]=Q=>i.eventType=Q),required:"",class:"form-input",onChange:T},G[11]||(G[11]=[he('<option value="" data-v-fc3ab1b5>Select Event Type</option><option value="Wedding" data-v-fc3ab1b5>Wedding</option><option value="Debut" data-v-fc3ab1b5>Debut</option><option value="Christening" data-v-fc3ab1b5>Christening</option><option value="Party" data-v-fc3ab1b5>Party</option><option value="Other" data-v-fc3ab1b5>Other</option>',6)]),544),[[ue,i.eventType]])]),i.eventType==="Other"?(n(),d("div",h1,[G[13]||(G[13]=e("label",{for:"customEventType"},"Custom Event Type",-1)),O(e("input",{type:"text",id:"customEventType","onUpdate:modelValue":G[4]||(G[4]=Q=>i.customEventType=Q),required:"",placeholder:"Enter custom event type",class:"form-input"},null,512),[[Y,i.customEventType]])])):N("",!0),e("div",k1,[G[19]||(G[19]=e("label",{for:"coverImage"},"Cover Image",-1)),e("div",{class:L(["upload-container",{"has-image":v.value}])},[v.value?(n(),d("div",w1,[e("img",{src:v.value,alt:"Preview",class:"image-preview"},null,8,C1),e("div",P1,[A.value?(n(),d("button",{key:0,type:"button",onClick:I,class:"action-btn"},G[17]||(G[17]=[e("i",{class:"fas fa-crop"},null,-1),E(" Edit ")]))):N("",!0),e("button",{type:"button",onClick:F,class:"action-btn"},G[18]||(G[18]=[e("i",{class:"fas fa-image"},null,-1),E(" Change Image ")]))])])):(n(),d("div",_1,[e("div",$1,[e("input",{type:"file",id:"coverImage",ref:"coverImageInput",onChange:a,accept:"image/*",class:"file-input"},null,544),G[14]||(G[14]=e("i",{class:"fas fa-cloud-upload-alt"},null,-1)),G[15]||(G[15]=e("span",null,"Click to upload cover image",-1)),G[16]||(G[16]=e("p",{class:"upload-hint"},"Supports: JPG, PNG, WebP (Max 5MB)",-1))])]))],2)]),e("div",A1,[G[25]||(G[25]=e("label",{for:"albumImages"},"Album Images",-1)),e("div",{class:L(["upload-container album-container",{"has-images":w.value.length>0}])},[w.value.length===0?(n(),d("div",T1,[e("div",S1,[e("input",{type:"file",id:"albumImages",ref:"albumImagesInput",onChange:m,accept:"image/*",multiple:"",class:"file-input"},null,544),G[20]||(G[20]=e("i",{class:"fas fa-images"},null,-1)),G[21]||(G[21]=e("span",null,"Click to upload album images",-1)),G[22]||(G[22]=e("p",{class:"upload-hint"},"Select multiple images (Max 10 images)",-1))])])):N("",!0),e("div",x1,[(n(!0),d(te,null,ae(w.value,(Q,H)=>(n(),d("div",{key:H,class:"album-item"},[e("img",{src:Q.url,alt:"Album preview"},null,8,E1),e("button",{type:"button",onClick:P=>$(H),class:"remove-image-btn"},G[23]||(G[23]=[e("i",{class:"fas fa-times"},null,-1)]),8,I1)]))),128)),e("div",{class:"add-more-btn",onClick:z},[e("input",{type:"file",ref_key:"albumInput",ref:l,multiple:"",accept:"image/*",onChange:V,style:{display:"none"}},null,544),G[24]||(G[24]=e("div",{class:"add-more-content"},[e("span",{class:"plus-icon"},"+"),e("span",null,"Add More")],-1))])])],2)]),e("div",D1,[e("button",{type:"button",class:"cancel-btn",onClick:G[5]||(G[5]=Q=>J.$emit("close"))},"Cancel"),e("button",{type:"submit",class:"submit-btn",disabled:k.value},[k.value?(n(),d("i",N1)):N("",!0),E(" "+r(k.value?"Saving...":"Save Changes"),1)],8,M1)])],32)])]),(n(),de(Qe,{to:"body"},[_.value?(n(),d("div",F1,[e("div",B1,[e("div",U1,[e("div",{class:"cropper-modal-header"},[G[27]||(G[27]=e("h3",null,"Crop Image",-1)),e("button",{onClick:x,class:"close-btn"},G[26]||(G[26]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",R1,[pe(M(We),{ref_key:"cropper",ref:C,src:b.value,"aspect-ratio":16/9,"view-mode":2,guides:!0,background:!0,rotatable:!0,zoomable:!0,movable:!0,responsive:!0,modal:!0,autoCropArea:1,center:!0,highlight:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0},null,8,["src"])]),e("div",{class:"cropper-modal-footer"},[e("div",{class:"cropper-controls"},[e("button",{type:"button",onClick:h,class:"control-btn"},G[28]||(G[28]=[e("i",{class:"fas fa-undo"},null,-1),E(" Rotate Left ")])),e("button",{type:"button",onClick:K,class:"control-btn"},G[29]||(G[29]=[e("i",{class:"fas fa-redo"},null,-1),E(" Rotate Right ")])),e("button",{type:"button",onClick:U,class:"control-btn"},G[30]||(G[30]=[e("i",{class:"fas fa-search-plus"},null,-1),E(" Zoom In ")])),e("button",{type:"button",onClick:D,class:"control-btn"},G[31]||(G[31]=[e("i",{class:"fas fa-search-minus"},null,-1),E(" Zoom Out ")])),e("button",{type:"button",onClick:R,class:"control-btn"},G[32]||(G[32]=[e("i",{class:"fas fa-sync"},null,-1),E(" Reset ")]))]),e("div",{class:"action-buttons"},[e("button",{type:"button",onClick:x,class:"btn-secondary"}," Cancel "),e("button",{type:"button",onClick:y,class:"btn-primary"}," Apply ")])])])])])):N("",!0)]))],64))}},O1=ne(L1,[["__scopeId","data-v-fc3ab1b5"]]);const V1={name:"portfoliosManagement",components:{AdminSidebar:vt,AddportfolioModal:Jg,EditportfolioModal:O1,ViewPortfolioModal:v1,ConfirmationModal:Ie},setup(){ye();const S=g([]),s=g(""),c=g(""),t=g(!1),i=g(!1),v=g(!1),w=g(!1),k=g(null),_=ee(()=>S.value.filter(D=>{const R=!s.value||D.title.toLowerCase().includes(s.value.toLowerCase())||D.description.toLowerCase().includes(s.value.toLowerCase()),x=!c.value||(c.value==="Other"?!["Wedding","Debut","Christening","Party"].includes(D.event_type):D.event_type===c.value);return R&&x})),b=async()=>{const D=await oe.get("http://127.0.0.1:8000/api/get-all-portfolios");S.value=D.data},C=()=>{c.value=""},A=D=>D.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),l=()=>{t.value=!0},f=D=>{k.value=D,i.value=!0},a=D=>{k.value=D,v.value=!0},m=async D=>{Z.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Okay",cancelButtonText:"Close"}).then(async R=>{if(R.isConfirmed)try{(await oe.post(`http://127.0.0.1:8000/api/delete-portfolio/${D}`)).status===200?(await b(),Z.fire("Deleted!","Portfolio has been deleted.","success")):Z.fire("Error!","Something went wrong.","error")}catch(x){console.error("Error deleting portfolio:",x),Z.fire("Error!","Failed to delete portfolio.","error")}})},$=async()=>{try{const D=await oe.post(`http://127.0.0.1:8000/api/delete-portfolio/${k.value.id}`);D.status===200?(Z.fire({title:"Success",text:D.data.message,icon:"success"}),await b(),w.value=!1):(Z.fire({title:"Error",text:D.data.message,icon:"error"}),await b(),w.value=!1)}catch(D){console.error("Error deleting portfolio:",D)}},T=async()=>{await b(),t.value=!1},h=async()=>{await b(),i.value=!1},K="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNFNUU3RUIiLz48cGF0aCBkPSJNODAgOTBIMTIwVjExMEg4MFY5MFoiIGZpbGw9IiM5Q0EzQUYiLz48cGF0aCBkPSJNNjUgNjBIMTM1VjgwSDY1VjYwWiIgZmlsbD0iIzlDQTNBRiIvPjwvc3ZnPg==",U=D=>D?`http://127.0.0.1:8000/storage/${D}`:K;return me(async()=>{await b()}),{portfolios:S,viewportfolio:a,searchQuery:s,eventTypeFilter:c,showDeleteModal:w,selectedportfolio:k,filteredportfolios:_,handleSearch:C,deleteportfolio:m,editportfolio:f,formatNumber:A,openAddportfolioModal:l,confirmDeleteportfolio:$,showEditModal:i,handleportfolioAdded:T,handleportfolioUpdated:h,showPortfolioModal:v,showAddModal:t,getImageUrl:U}}},q1={class:"portfolios-management"},j1={class:"management-content"},z1={class:"content-container"},G1={class:"search-filter-container"},J1={class:"search-bar"},W1={class:"filter-select-container"},Q1={class:"portfolios-grid"},H1={class:"portfolio-image"},Y1=["src","alt"],Z1={class:"portfolio-actions"},K1=["onClick"],X1=["onClick"],ey=["onClick"],ty={class:"portfolio-content"},sy={class:"portfolio-header"},ay={class:"portfolio-description"},oy={key:0,class:"no-results"};function ny(S,s,c,t,i,v){const w=ke("AddportfolioModal"),k=ke("EditportfolioModal"),_=ke("ViewPortfolioModal");return n(),d("div",q1,[e("main",j1,[s[14]||(s[14]=e("div",{class:"page-header"},[e("h1",null,"Portfolios Management")],-1)),e("div",z1,[e("div",G1,[e("div",J1,[s[7]||(s[7]=e("i",{class:"fas fa-search search-icon"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=b=>t.searchQuery=b),placeholder:"Search portfolios...",onInput:s[1]||(s[1]=(...b)=>t.handleSearch&&t.handleSearch(...b))},null,544),[[Y,t.searchQuery]])]),e("div",W1,[O(e("select",{"onUpdate:modelValue":s[2]||(s[2]=b=>t.eventTypeFilter=b),class:"filter-select"},s[8]||(s[8]=[he('<option value="" data-v-e0a91316>All Event Types</option><option value="Wedding" data-v-e0a91316>Wedding</option><option value="Debut" data-v-e0a91316>Debut</option><option value="Christening" data-v-e0a91316>Christening</option><option value="Party" data-v-e0a91316>Party</option><option value="Other" data-v-e0a91316>Other Events</option>',6)]),512),[[ue,t.eventTypeFilter]])]),e("button",{class:"add-portfolio-btn",onClick:s[3]||(s[3]=(...b)=>t.openAddportfolioModal&&t.openAddportfolioModal(...b))},s[9]||(s[9]=[e("i",{class:"fas fa-plus"},null,-1),E(" Add Portfolio ")]))]),e("div",Q1,[(n(!0),d(te,null,ae(t.filteredportfolios,b=>(n(),d("div",{key:b.id,class:"portfolio-card"},[e("div",H1,[e("img",{src:t.getImageUrl(b.main_image_url),alt:b.portfolio_name},null,8,Y1),e("div",Z1,[e("button",{onClick:C=>t.viewportfolio(b),class:"action-btn edit"},s[10]||(s[10]=[e("i",{class:"fas fa-eye"},null,-1)]),8,K1),e("button",{onClick:C=>t.editportfolio(b),class:"action-btn edit"},s[11]||(s[11]=[e("i",{class:"fas fa-edit"},null,-1)]),8,X1),e("button",{onClick:C=>t.deleteportfolio(b.id),class:"action-btn delete"},s[12]||(s[12]=[e("i",{class:"fas fa-trash"},null,-1)]),8,ey)])]),e("div",ty,[e("div",sy,[e("h3",null,r(b.title),1)]),e("p",ay,r(b.description),1)])]))),128))]),t.filteredportfolios.length===0?(n(),d("div",oy,[s[13]||(s[13]=e("i",{class:"fas fa-box-open"},null,-1)),e("p",null,"No portfolios founds in "+r(S.portfolio_typeFilter),1)])):N("",!0)])]),t.showAddModal?(n(),de(w,{key:0,onClose:s[4]||(s[4]=b=>t.showAddModal=!1),onSuccess:t.handleportfolioAdded},null,8,["onSuccess"])):N("",!0),t.showEditModal?(n(),de(k,{key:1,portfolio:t.selectedportfolio,onClose:s[5]||(s[5]=b=>t.showEditModal=!1),onUpdate:t.handleportfolioUpdated},null,8,["portfolio","onUpdate"])):N("",!0),t.showPortfolioModal?(n(),de(_,{key:2,portfolio:t.selectedportfolio,onClose:s[6]||(s[6]=b=>t.showPortfolioModal=!1)},null,8,["portfolio"])):N("",!0)])}const ly=ne(V1,[["render",ny],["__scopeId","data-v-e0a91316"]]);const iy={class:"modal-content"},ry={class:"modal-header"},dy={class:"form-section"},uy={class:"form-row"},cy={class:"form-group"},py={class:"form-group"},vy={class:"form-row"},my={class:"form-group"},fy={class:"form-group"},gy={class:"form-section"},yy={class:"form-row"},by={class:"form-group"},hy={class:"form-group"},ky={class:"password-section"},_y={class:"form-row"},$y={class:"form-group"},wy={class:"password-input"},Cy=["type"],Py={class:"form-group"},Ay={class:"password-input"},Ty=["type"],Sy={key:0,class:"error-message"},xy={class:"form-actions"},Ey=["disabled"],Iy={key:0,class:"fas fa-spinner fa-spin"},Dy={__name:"AddUserModal",emits:["close","success"],setup(S,{emit:s}){const c=s,{token:t}=ye(),i=g(!1),v=g(!1),w=g(!1),k=g(""),_=Te({firstName:"",lastName:"",email:"",phone:"",role:"staff",status:"active",password:"",confirmPassword:""});Pe([()=>_.password,()=>_.confirmPassword],([A,l])=>{if(!A&&!l){k.value="";return}A&&A.length<8?k.value="Password must be at least 8 characters long":A&&l&&A!==l?k.value="Passwords do not match":k.value=""});const b=async()=>{var A,l;if(!k.value)try{i.value=!0;const f={first_name:_.firstName,last_name:_.lastName,email:_.email,phone_number:_.phone,role:_.role,status:_.status,password:_.password};if((await oe.post("http://127.0.0.1:8000/api/add-user",f,{headers:{Authorization:`Bearer ${t.value}`}})).status===200)await Z.fire({title:"Success",text:"User created successfully",icon:"success"}),c("success"),c("close");else throw new Error("Failed to create user")}catch(f){console.error("Error creating user:",f),await Z.fire({title:"Error",text:((l=(A=f.response)==null?void 0:A.data)==null?void 0:l.message)||"Failed to create user",icon:"error"})}finally{i.value=!1}},C=A=>{let l=A.target.value.replace(/\D/g,"");l.length>0&&l[0]!=="0"&&(l="0"+l),l.length>11&&(l=l.slice(0,11)),_.phone=l};return(A,l)=>(n(),d("div",{class:"modal-overlay",onClick:l[12]||(l[12]=ce(f=>A.$emit("close"),["self"]))},[e("div",iy,[e("div",ry,[l[14]||(l[14]=e("h2",null,"Add New User",-1)),e("button",{class:"close-btn",onClick:l[0]||(l[0]=f=>A.$emit("close"))},l[13]||(l[13]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",{onSubmit:ce(b,["prevent"]),class:"add-form"},[e("div",dy,[l[19]||(l[19]=e("h3",null,"Basic Information",-1)),e("div",uy,[e("div",cy,[l[15]||(l[15]=e("label",{for:"firstName"},"First Name",-1)),O(e("input",{type:"text",id:"firstName","onUpdate:modelValue":l[1]||(l[1]=f=>_.firstName=f),required:"",placeholder:"Enter first name"},null,512),[[Y,_.firstName]])]),e("div",py,[l[16]||(l[16]=e("label",{for:"lastName"},"Last Name",-1)),O(e("input",{type:"text",id:"lastName","onUpdate:modelValue":l[2]||(l[2]=f=>_.lastName=f),required:"",placeholder:"Enter last name"},null,512),[[Y,_.lastName]])])]),e("div",vy,[e("div",my,[l[17]||(l[17]=e("label",{for:"email"},"Email",-1)),O(e("input",{type:"email",id:"email","onUpdate:modelValue":l[3]||(l[3]=f=>_.email=f),required:"",placeholder:"Enter email address"},null,512),[[Y,_.email]])]),e("div",fy,[l[18]||(l[18]=e("label",{for:"phone"},"Phone Number",-1)),O(e("input",{type:"text",id:"phone","onUpdate:modelValue":l[4]||(l[4]=f=>_.phone=f),onInput:C,required:"",placeholder:"Enter phone number (e.g., 09123456789)",maxlength:"11"},null,544),[[Y,_.phone]])])])]),e("div",gy,[l[26]||(l[26]=e("h3",null,"Account Settings",-1)),e("div",yy,[e("div",by,[l[21]||(l[21]=e("label",{for:"role"},"Role",-1)),O(e("select",{id:"role","onUpdate:modelValue":l[5]||(l[5]=f=>_.role=f),required:""},l[20]||(l[20]=[e("option",{value:"staff"},"Staff",-1),e("option",{value:"admin"},"Admin",-1)]),512),[[ue,_.role]])]),e("div",hy,[l[23]||(l[23]=e("label",{for:"status"},"Status",-1)),O(e("select",{id:"status","onUpdate:modelValue":l[6]||(l[6]=f=>_.status=f),required:""},l[22]||(l[22]=[e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[ue,_.status]])])]),e("div",ky,[e("div",_y,[e("div",$y,[l[24]||(l[24]=e("label",{for:"password"},"Password",-1)),e("div",wy,[O(e("input",{type:v.value?"text":"password",id:"password","onUpdate:modelValue":l[7]||(l[7]=f=>_.password=f),required:"",placeholder:"Enter password"},null,8,Cy),[[Se,_.password]]),e("button",{type:"button",class:"toggle-password",onClick:l[8]||(l[8]=f=>v.value=!v.value)},[e("i",{class:L(["fas",v.value?"fa-eye-slash":"fa-eye"])},null,2)])])]),e("div",Py,[l[25]||(l[25]=e("label",{for:"confirmPassword"},"Confirm Password",-1)),e("div",Ay,[O(e("input",{type:w.value?"text":"password",id:"confirmPassword","onUpdate:modelValue":l[9]||(l[9]=f=>_.confirmPassword=f),required:"",placeholder:"Confirm password"},null,8,Ty),[[Se,_.confirmPassword]]),e("button",{type:"button",class:"toggle-password",onClick:l[10]||(l[10]=f=>w.value=!w.value)},[e("i",{class:L(["fas",w.value?"fa-eye-slash":"fa-eye"])},null,2)])])])]),k.value?(n(),d("div",Sy,r(k.value),1)):N("",!0)])]),e("div",xy,[e("button",{type:"button",class:"cancel-btn",onClick:l[11]||(l[11]=f=>A.$emit("close"))},"Cancel"),e("button",{type:"submit",class:"submit-btn",disabled:i.value||!!k.value},[i.value?(n(),d("i",Iy)):N("",!0),E(" "+r(i.value?"Creating...":"Create User"),1)],8,Ey)])],32)])]))}},My=ne(Dy,[["__scopeId","data-v-4fd6bf0a"]]);const Ny={class:"modal-content"},Fy={class:"modal-header"},By={class:"form-section"},Uy={class:"form-row"},Ry={class:"form-group"},Ly={class:"form-group"},Oy={class:"form-row"},Vy={class:"form-group"},qy={class:"form-group"},jy={class:"form-section"},zy={class:"form-row"},Gy={key:0,class:"form-group"},Jy={class:"form-group"},Wy={class:"password-section"},Qy={class:"section-header"},Hy={key:0,class:"form-row"},Yy={class:"form-group"},Zy={class:"password-input"},Ky=["type"],Xy={class:"form-group"},eb={class:"password-input"},tb=["type"],sb={key:1,class:"error-message"},ab={class:"form-actions"},ob=["disabled"],nb={key:0,class:"fas fa-spinner fa-spin"},lb={__name:"EditUserModal",props:{user:{type:Object,required:!0}},emits:["close","update"],setup(S,{emit:s}){const c=S,{token:t}=ye();localStorage.getItem("user_role");const i=g(!1),v=g(!1),w=g(!1),k=g(!1);g(null);const _=g(""),b=Te({id:c.user.id,firstName:c.user.first_name,lastName:c.user.last_name,email:c.user.email,phone:c.user.phone_number,email_verified_at:c.user.email_verified_at,role:c.user.role,status:c.user.status,flag:c.user.flag,password:"",confirmPassword:""});Pe([()=>b.password,()=>b.confirmPassword],([A,l])=>{if(!A&&!l){_.value="";return}A&&A.length<8?_.value="Password must be at least 8 characters long":A&&l&&A!==l?_.value="Passwords do not match":_.value=""});const C=async()=>{try{const A={...b},l=await oe.post("http://127.0.0.1:8000/api/update-user-info",A,{headers:{Authorization:`Bearer ${t.value}`}});if(l.status===200)Z.fire({title:"Success",text:l.data.message,icon:"success"}).then(()=>{window.location.reload()});else throw new Error("Failed to update user")}catch(A){console.error("Error updating user:",A)}};return(A,l)=>(n(),d("div",{class:"modal-overlay",onClick:l[13]||(l[13]=ce(f=>A.$emit("close"),["self"]))},[e("div",Ny,[e("div",Fy,[l[15]||(l[15]=e("h2",null,"Edit User",-1)),e("button",{class:"close-btn",onClick:l[0]||(l[0]=f=>A.$emit("close"))},l[14]||(l[14]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",{onSubmit:ce(C,["prevent"]),class:"edit-form"},[e("div",By,[l[20]||(l[20]=e("h3",null,"Basic Information",-1)),e("div",Uy,[e("div",Ry,[l[16]||(l[16]=e("label",{for:"firstName"},"First Name",-1)),O(e("input",{type:"text",id:"firstName","onUpdate:modelValue":l[1]||(l[1]=f=>b.firstName=f),required:"",placeholder:"Enter first name"},null,512),[[Y,b.firstName]])]),e("div",Ly,[l[17]||(l[17]=e("label",{for:"lastName"},"Last Name",-1)),O(e("input",{type:"text",id:"lastName","onUpdate:modelValue":l[2]||(l[2]=f=>b.lastName=f),required:"",placeholder:"Enter last name"},null,512),[[Y,b.lastName]])])]),e("div",Oy,[e("div",Vy,[l[18]||(l[18]=e("label",{for:"email"},"Email",-1)),O(e("input",{type:"email",id:"email","onUpdate:modelValue":l[3]||(l[3]=f=>b.email=f),required:"",placeholder:"Enter email address"},null,512),[[Y,b.email]])]),e("div",qy,[l[19]||(l[19]=e("label",{for:"phone"},"Phone Number",-1)),O(e("input",{type:"tel",id:"phone","onUpdate:modelValue":l[4]||(l[4]=f=>b.phone=f),required:"",placeholder:"Enter phone number"},null,512),[[Y,b.phone]])])])]),e("div",jy,[l[28]||(l[28]=e("h3",null,"Account Settings",-1)),e("div",zy,[b.role!=="user"?(n(),d("div",Gy,[l[22]||(l[22]=e("label",{for:"role"},"Role",-1)),O(e("select",{id:"role","onUpdate:modelValue":l[5]||(l[5]=f=>b.role=f),required:"",disabled:""},l[21]||(l[21]=[e("option",{value:"staff"},"Staff",-1),e("option",{value:"admin"},"Admin",-1)]),512),[[ue,b.role]])])):N("",!0),e("div",Jy,[l[24]||(l[24]=e("label",{for:"status"},"Status",-1)),O(e("select",{id:"status","onUpdate:modelValue":l[6]||(l[6]=f=>b.status=f),required:""},l[23]||(l[23]=[e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[ue,b.status]])])]),e("div",Wy,[e("div",Qy,[l[25]||(l[25]=e("h4",null,"Change Password",-1)),e("button",{type:"button",class:"toggle-btn",onClick:l[7]||(l[7]=f=>v.value=!v.value)},r(v.value?"Cancel":"Change Password"),1)]),v.value?(n(),d("div",Hy,[e("div",Yy,[l[26]||(l[26]=e("label",{for:"password"},"New Password",-1)),e("div",Zy,[O(e("input",{type:w.value?"text":"password",id:"password","onUpdate:modelValue":l[8]||(l[8]=f=>b.password=f),placeholder:"Enter new password"},null,8,Ky),[[Se,b.password]]),e("button",{type:"button",class:"toggle-password",onClick:l[9]||(l[9]=f=>w.value=!w.value)},[e("i",{class:L(["fas",w.value?"fa-eye-slash":"fa-eye"])},null,2)])])]),e("div",Xy,[l[27]||(l[27]=e("label",{for:"confirmPassword"},"Confirm Password",-1)),e("div",eb,[O(e("input",{type:k.value?"text":"password",id:"confirmPassword","onUpdate:modelValue":l[10]||(l[10]=f=>b.confirmPassword=f),placeholder:"Confirm new password"},null,8,tb),[[Se,b.confirmPassword]]),e("button",{type:"button",class:"toggle-password",onClick:l[11]||(l[11]=f=>k.value=!k.value)},[e("i",{class:L(["fas",k.value?"fa-eye-slash":"fa-eye"])},null,2)])])])])):N("",!0),_.value?(n(),d("div",sb,r(_.value),1)):N("",!0)])]),e("div",ab,[e("button",{type:"button",class:"cancel-btn",onClick:l[12]||(l[12]=f=>A.$emit("close"))},"Cancel"),e("button",{type:"submit",class:"submit-btn",disabled:i.value||!!_.value},[i.value?(n(),d("i",nb)):N("",!0),E(" "+r(i.value?"Saving...":"Save Changes"),1)],8,ob)])],32)])]))}},ib=ne(lb,[["__scopeId","data-v-aee55e56"]]);const rb={class:"modal-content"},db={class:"modal-header"},ub={class:"user-details"},cb={class:"user-profile"},pb={class:"profile-image"},vb=["src","alt"],mb={class:"profile-info"},fb={class:"badges"},gb={class:"details-section"},yb={class:"info-grid"},bb={class:"info-item"},hb={class:"value"},kb={class:"info-item"},_b={class:"value"},$b={class:"info-item full-width"},wb={class:"value"},Cb={class:"details-section"},Pb={class:"info-grid"},Ab={class:"info-item"},Tb={class:"value"},Sb={class:"info-item"},xb={class:"value"},Eb={class:"info-item"},Ib={class:"value"},Db={class:"info-item"},Mb={class:"value"},Nb={class:"details-section"},Fb={class:"bookings-list"},Bb={class:"booking-info"},Ub={class:"booking-id"},Rb={class:"booking-date"},Lb={class:"booking-status"},Ob={class:"amount"},Vb={class:"details-section"},qb={class:"info-grid"},jb={class:"info-item"},zb={class:"value"},Gb={class:"info-item"},Jb={class:"value"},Wb={class:"modal-actions"},Qb={__name:"UserDetailsModal",props:{user:{type:Object,required:!0}},emits:["close","edit","block","delete"],setup(S,{emit:s}){const c=S,t=s,i=_e(),v=ee(()=>[c.user.address,c.user.city,c.user.postalCode].filter(Boolean).join(", ")),w=f=>new Date(f).toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"}),k=f=>new Date(f).toLocaleString("en-PH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),_=f=>f.toLocaleString(),b=()=>{t("edit")},C=()=>{t("block")},A=()=>{t("delete")},l=()=>{i.push({path:"/admin/bookings",query:{user:c.user.id}}),t("close")};return(f,a)=>(n(),d("div",{class:"modal-overlay",onClick:a[1]||(a[1]=ce(m=>f.$emit("close"),["self"]))},[e("div",rb,[e("div",db,[a[3]||(a[3]=e("h2",null,"User Details",-1)),e("button",{class:"close-btn",onClick:a[0]||(a[0]=m=>f.$emit("close"))},a[2]||(a[2]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",ub,[e("div",cb,[e("div",pb,[e("img",{src:S.user.avatar||"/default-avatar.png",alt:S.user.firstName},null,8,vb)]),e("div",mb,[e("h3",null,r(S.user.firstName)+" "+r(S.user.lastName),1),e("div",fb,[e("span",{class:L(["role-badge",S.user.role])},r(S.user.role),3),e("span",{class:L(["status-badge",S.user.status])},r(S.user.status),3)])])]),e("div",gb,[a[10]||(a[10]=e("h3",null,"Contact Information",-1)),e("div",yb,[e("div",bb,[a[5]||(a[5]=e("span",{class:"label"},"Email",-1)),e("span",hb,[a[4]||(a[4]=e("i",{class:"fas fa-envelope"},null,-1)),E(" "+r(S.user.email),1)])]),e("div",kb,[a[7]||(a[7]=e("span",{class:"label"},"Phone",-1)),e("span",_b,[a[6]||(a[6]=e("i",{class:"fas fa-phone"},null,-1)),E(" "+r(S.user.phone),1)])]),e("div",$b,[a[9]||(a[9]=e("span",{class:"label"},"Address",-1)),e("span",wb,[a[8]||(a[8]=e("i",{class:"fas fa-map-marker-alt"},null,-1)),E(" "+r(v.value),1)])])])]),e("div",Cb,[a[19]||(a[19]=e("h3",null,"Account Activity",-1)),e("div",Pb,[e("div",Ab,[a[12]||(a[12]=e("span",{class:"label"},"Member Since",-1)),e("span",Tb,[a[11]||(a[11]=e("i",{class:"fas fa-calendar"},null,-1)),E(" "+r(w(S.user.createdAt)),1)])]),e("div",Sb,[a[14]||(a[14]=e("span",{class:"label"},"Last Login",-1)),e("span",xb,[a[13]||(a[13]=e("i",{class:"fas fa-clock"},null,-1)),E(" "+r(k(S.user.lastLogin)),1)])]),e("div",Eb,[a[16]||(a[16]=e("span",{class:"label"},"Total Bookings",-1)),e("span",Ib,[a[15]||(a[15]=e("i",{class:"fas fa-calendar-check"},null,-1)),E(" "+r(S.user.bookingsCount)+" bookings ",1)])]),e("div",Db,[a[18]||(a[18]=e("span",{class:"label"},"Total Spent",-1)),e("span",Mb,[a[17]||(a[17]=e("i",{class:"fas fa-coins"},null,-1)),E(" ₱"+r(_(S.user.totalSpent)),1)])])])]),e("div",Nb,[e("div",{class:"section-header"},[a[21]||(a[21]=e("h3",null,"Recent Bookings",-1)),e("button",{class:"view-all-btn",onClick:l},a[20]||(a[20]=[E(" View All "),e("i",{class:"fas fa-arrow-right"},null,-1)]))]),e("div",Fb,[(n(!0),d(te,null,ae(S.user.recentBookings,m=>(n(),d("div",{key:m.id,class:"booking-item"},[e("div",Bb,[e("span",Ub,"#"+r(m.id),1),e("span",{class:L(["event-type",m.eventType.toLowerCase()])},r(m.eventType),3),e("span",Rb,r(w(m.eventDate)),1)]),e("div",Lb,[e("span",{class:L(["status",m.status.toLowerCase()])},r(m.status),3),e("span",Ob,"₱"+r(_(m.amount)),1)])]))),128))])]),e("div",Vb,[a[25]||(a[25]=e("h3",null,"Security Information",-1)),e("div",qb,[e("div",jb,[a[22]||(a[22]=e("span",{class:"label"},"Two-Factor Auth",-1)),e("span",zb,[e("i",{class:L(["fas",S.user.twoFactorEnabled?"fa-check-circle":"fa-times-circle"])},null,2),E(" "+r(S.user.twoFactorEnabled?"Enabled":"Disabled"),1)])]),e("div",Gb,[a[24]||(a[24]=e("span",{class:"label"},"Last Password Change",-1)),e("span",Jb,[a[23]||(a[23]=e("i",{class:"fas fa-key"},null,-1)),E(" "+r(w(S.user.lastPasswordChange)),1)])])])])]),e("div",Wb,[e("button",{class:"action-btn edit",onClick:b},a[26]||(a[26]=[e("i",{class:"fas fa-edit"},null,-1),E(" Edit User ")])),e("button",{class:L(["action-btn",S.user.status==="blocked"?"unblock":"block"]),onClick:C},[e("i",{class:L(["fas",S.user.status==="blocked"?"fa-unlock":"fa-ban"])},null,2),E(" "+r(S.user.status==="blocked"?"Unblock User":"Block User"),1)],2),e("button",{class:"action-btn delete",onClick:A},a[27]||(a[27]=[e("i",{class:"fas fa-trash"},null,-1),E(" Delete User ")]))])])]))}},Hb=ne(Qb,[["__scopeId","data-v-d784f6a7"]]);const Yb={class:"users-management"},Zb={class:"management-content"},Kb={class:"page-header"},Xb={class:"header-actions"},eh={class:"search-bar"},th={class:"filters"},sh={class:"users-table-container"},ah={class:"users-table"},oh={class:"user-info"},nh={class:"user-name"},lh={class:"user-email"},ih={class:"last-login"},rh={class:"date"},dh={class:"time"},uh={class:"action-buttons"},ch=["onClick"],ph=["onClick"],vh=["onClick"],mh=["onClick"],fh={class:"pagination"},gh=["disabled"],yh={class:"page-info"},bh=["disabled"],hh=10,kh={__name:"UsersManagement",setup(S){const{token:s}=ye(),c=g([]),t=g(""),i=g(""),v=g(""),w=g(1),k=g("id"),_=g("desc"),b=g(!1),C=g(!1),A=g(!1),l=g(!1),f=g(!1),a=g(null),m=Re(),$=_e();me(()=>{m.query.action==="add"&&(b.value=!0),U()}),Pe(()=>m.query.action,p=>{p==="add"&&(b.value=!0)});const T=ee(()=>c.value.filter(p=>{const o=t.value===""||p.first_name.toLowerCase().includes(t.value.toLowerCase())||p.last_name.toLowerCase().includes(t.value.toLowerCase())||p.email.toLowerCase().includes(t.value.toLowerCase()),W=i.value===""||p.role.toLowerCase()===i.value.toLowerCase(),q=v.value===""||p.status.toLowerCase()===v.value.toLowerCase();return o&&W&&q})),h=ee(()=>{const p=[...T.value].sort((o,W)=>k.value==="lastLogin"?new Date(o[k.value])-new Date(W[k.value]):k.value==="bookingsCount"?o[k.value]-W[k.value]:String(o[k.value]).localeCompare(String(W[k.value])));return _.value==="desc"?p.reverse():p}),K=ee(()=>Math.ceil(T.value.length/hh)),U=async()=>{try{const p=await oe.get("http://127.0.0.1:8000/api/get-all-users");c.value=p.data,p.ok&&(c.value=await p.json())}catch(p){console.error("Error fetching users:",p)}},D=()=>{w.value=1},R=p=>{k.value===p?_.value=_.value==="asc"?"desc":"asc":(k.value=p,_.value="asc")},x=p=>k.value!==p?"fa-sort":_.value==="asc"?"fa-sort-up":"fa-sort-down",y=p=>{w.value=p},u=p=>new Date(p).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}),I=p=>new Date(p).toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit"}),F=p=>{a.value=p,C.value=!0},z=p=>{a.value=p,f.value=!0},V=p=>{a.value=p,f.value=!0},B=p=>{a.value=p,l.value=!0},J=async()=>{try{const p=a.value.status==="blocked"?"unblock":"block";(await fetch(`http://localhost:3000/api/admin/users/${a.value.id}/${p}`,{method:"POST",headers:{Authorization:`Bearer ${s.value}`}})).ok&&(await U(),f.value=!1)}catch(p){console.error("Error updating user status:",p)}},G=async()=>{try{(await oe.post(`http://127.0.0.1:8000/api/delete-user/${a.value.id}`)).data.status==200?Z.fire({icon:"success",title:"Deleted!",text:"User and all associated bookings have been deleted.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Z.stopTimer),o.addEventListener("mouseleave",Z.resumeTimer)}}).then(()=>{window.location.reload()}):Z.fire({icon:"error",title:"Error",text:"Something went wrong!"})}catch(p){console.error("Error deleting user:",p),Z.fire({icon:"error",title:"Error",text:"Failed to delete user and associated bookings"})}},Q=async()=>{await U(),b.value=!1,$.replace({path:m.path})},H=async()=>{await U(),C.value=!1},P=()=>{b.value=!1,$.replace({path:m.path})};return(p,o)=>{var W,q,j,X,fe;return n(),d("div",Yb,[e("main",Zb,[e("div",Kb,[o[18]||(o[18]=e("h1",null,"Users Management",-1)),e("div",Xb,[e("button",{onClick:o[0]||(o[0]=le=>b.value=!0),class:"btn-add"},o[14]||(o[14]=[e("i",{class:"fas fa-user-plus"},null,-1),E(" Add New User ")])),e("div",eh,[o[15]||(o[15]=e("i",{class:"fas fa-search"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=le=>t.value=le),placeholder:"Search users...",onInput:D},null,544),[[Y,t.value]])]),e("div",th,[O(e("select",{"onUpdate:modelValue":o[2]||(o[2]=le=>i.value=le)},o[16]||(o[16]=[e("option",{value:""},"All Roles",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"staff"},"Staff",-1),e("option",{value:"user"},"User",-1)]),512),[[ue,i.value]]),O(e("select",{"onUpdate:modelValue":o[3]||(o[3]=le=>v.value=le)},o[17]||(o[17]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"blocked"},"Blocked",-1)]),512),[[ue,v.value]])])])]),e("div",sh,[e("table",ah,[e("thead",null,[e("tr",null,[e("th",null,[e("div",{class:"th-content",onClick:o[4]||(o[4]=le=>R("id"))},[o[19]||(o[19]=E(" ID ")),e("i",{class:L(["fas",x("id")])},null,2)])]),o[23]||(o[23]=e("th",null,"User",-1)),e("th",null,[e("div",{class:"th-content",onClick:o[5]||(o[5]=le=>R("role"))},[o[20]||(o[20]=E(" Role ")),e("i",{class:L(["fas",x("role")])},null,2)])]),e("th",null,[e("div",{class:"th-content",onClick:o[6]||(o[6]=le=>R("status"))},[o[21]||(o[21]=E(" Status ")),e("i",{class:L(["fas",x("status")])},null,2)])]),e("th",null,[e("div",{class:"th-content",onClick:o[7]||(o[7]=le=>R("lastLogin"))},[o[22]||(o[22]=E(" Last Login ")),e("i",{class:L(["fas",x("lastLogin")])},null,2)])]),o[24]||(o[24]=e("th",null,"Actions",-1))])]),e("tbody",null,[(n(!0),d(te,null,ae(h.value,le=>(n(),d("tr",{key:le.id},[e("td",null,"#"+r(le.id),1),e("td",null,[e("div",oh,[e("div",null,[e("span",nh,r(le.name),1),e("span",lh,r(le.email),1)])])]),e("td",null,[e("span",{class:L(["role-badge",le.role]),style:{"text-transform":"capitalize"}},r(le.role),3)]),e("td",null,[e("span",{class:L(["status-badge",le.flag==="1"?"banned":le.status]),style:{"text-transform":"capitalize"}},r(le.flag==="1"?"Removed!":le.status),3)]),e("td",null,[e("div",ih,[e("span",rh,r(u(le.updated_at)),1),e("span",dh,r(I(le.updated_at)),1)])]),e("td",null,[e("div",uh,[e("button",{onClick:be=>F(le),class:"btn-action edit",title:"Edit User"},o[25]||(o[25]=[e("i",{class:"fas fa-edit"},null,-1)]),8,ch),le.status!=="blocked"?(n(),d("button",{key:0,onClick:be=>z(le),class:"btn-action block",title:"Block User"},o[26]||(o[26]=[e("i",{class:"fas fa-ban"},null,-1)]),8,ph)):(n(),d("button",{key:1,onClick:be=>V(le),class:"btn-action unblock",title:"Unblock User"},o[27]||(o[27]=[e("i",{class:"fas fa-unlock"},null,-1)]),8,vh)),e("button",{onClick:be=>B(le),class:"btn-action delete",title:"Delete User"},o[28]||(o[28]=[e("i",{class:"fas fa-trash"},null,-1)]),8,mh)])])]))),128))])])]),e("div",fh,[e("button",{disabled:w.value===1,onClick:o[8]||(o[8]=le=>y(w.value-1)),class:"page-btn"},o[29]||(o[29]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,gh),e("span",yh," Page "+r(w.value)+" of "+r(K.value),1),e("button",{disabled:w.value===K.value,onClick:o[9]||(o[9]=le=>y(w.value+1)),class:"page-btn"},o[30]||(o[30]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,bh)])]),b.value?(n(),de(My,{key:0,onClose:P,onSuccess:Q})):N("",!0),C.value?(n(),de(ib,{key:1,user:a.value,onClose:o[10]||(o[10]=le=>C.value=!1),onUpdate:H},null,8,["user"])):N("",!0),A.value?(n(),de(Hb,{key:2,user:a.value,onClose:o[11]||(o[11]=le=>A.value=!1)},null,8,["user"])):N("",!0),l.value?(n(),de(Ie,{key:3,title:"Delete User",message:"Are you sure you want to delete this user? This action cannot be undone.",type:"danger",confirmText:"Delete",onConfirm:G,onClose:o[12]||(o[12]=le=>l.value=!1)})):N("",!0),f.value?(n(),de(Ie,{key:4,title:((W=a.value)==null?void 0:W.status)==="blocked"?"Unblock User":"Block User",message:((q=a.value)==null?void 0:q.status)==="blocked"?"Are you sure you want to unblock this user?":"Are you sure you want to block this user? They will not be able to access their account.",type:((j=a.value)==null?void 0:j.status)==="blocked"?"warning":"danger",confirmText:((X=a.value)==null?void 0:X.status)==="blocked"?"Unblock":"Block",userid:(fe=a.value)==null?void 0:fe.id,onConfirm:J,onClose:o[13]||(o[13]=le=>f.value=!1)},null,8,["title","message","type","confirmText","userid"])):N("",!0)])}}},_h=ne(kh,[["__scopeId","data-v-0e7ce0da"]]);const $h={class:"users-management"},wh={class:"management-content"},Ch={class:"page-header"},Ph={class:"search-bar"},Ah={class:"content-container"},Th={class:"table-container"},Sh={class:"users-table"},xh={class:"user-info"},Eh={class:"user-name"},Ih={class:"user-email"},Dh={class:"user-email"},Mh=["onClick"],Nh={class:"last-login"},Fh={class:"date"},Bh={class:"time"},Uh={class:"pagination"},Rh=["disabled"],Lh={class:"page-info"},Oh=["disabled"],Vh={__name:"ContactUsManagement",setup(S){ye();const s=g([]),c=g(""),t=g(1),i=g({}),v=ee(()=>s.value.filter(f=>c.value===""||f.first_name.toLowerCase().includes(c.value.toLowerCase())||f.last_name.toLowerCase().includes(c.value.toLowerCase())||f.email.toLowerCase().includes(c.value.toLowerCase()))),w=ee(()=>Math.ceil(v.value.length/5)),k=async()=>{const f=await oe.get("/api/get-all-contact-us");s.value=f.data,console.log(f.data)},_=()=>{t.value=1},b=f=>{t.value=f},C=f=>{i.value[f]=!i.value[f]},A=f=>new Date(f).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}),l=f=>new Date(f).toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit"});return me(async()=>{await k()}),(f,a)=>(n(),d("div",$h,[e("main",wh,[e("div",Ch,[a[4]||(a[4]=e("h1",null,"Contact Us Management",-1)),e("div",Ph,[a[3]||(a[3]=e("i",{class:"fas fa-search"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=m=>c.value=m),placeholder:"Search messages...",onInput:_},null,544),[[Y,c.value]])])]),e("div",Ah,[e("div",Th,[e("table",Sh,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("th",null,[e("div",{class:"th-content"},[E(" ID "),e("i",{class:"fas"})])]),e("th",null,"User Information"),e("th",null,"Message"),e("th",null,[e("div",{class:"th-content"},[E(" Reasonable Type "),e("i",{class:"fas fa-sort"})])]),e("th",null,[e("div",{class:"th-content"},[E(" Date Created "),e("i",{class:"fas fa-sort"})])])])],-1)),e("tbody",null,[(n(!0),d(te,null,ae(v.value,m=>(n(),d("tr",{key:m.id},[e("td",null,"#"+r(m.id),1),e("td",null,[e("div",xh,[e("div",null,[e("span",Eh,r(m.first_name)+" "+r(m.last_name),1),e("span",Ih,r(m.email),1),e("span",Dh,r(m.phone),1)])])]),e("td",null,[e("span",{class:L(["status-badge",m.flag==="1"?"banned":m.event_type]),style:{"text-transform":"capitalize"}},[E(r(i.value[m.id]?m.message:m.message.length>50?m.message.slice(0,50)+"...":m.message)+" ",1),m.message.length>50?(n(),d("button",{key:0,onClick:$=>C(m.id),class:"view-more-btn"},r(i.value[m.id]?"View Less":"View More"),9,Mh)):N("",!0)],2)]),e("td",null,[e("span",{class:L(["status-badge",m.event_type.toLowerCase()])},r(m.event_type),3)]),e("td",null,[e("div",Nh,[e("span",Fh,r(A(m.updated_at)),1),e("span",Bh,r(l(m.updated_at)),1)])])]))),128))])])]),e("div",Uh,[e("button",{disabled:t.value===1,onClick:a[1]||(a[1]=m=>b(t.value-1)),class:"page-btn"},a[6]||(a[6]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Rh),e("span",Lh," Page "+r(t.value)+" of "+r(w.value),1),e("button",{disabled:t.value===w.value,onClick:a[2]||(a[2]=m=>b(t.value+1)),class:"page-btn"},a[7]||(a[7]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,Oh)])])])]))}},qh=ne(Vh,[["__scopeId","data-v-45149b9e"]]);const jh={class:"reports-management"},zh={class:"management-content"},Gh={class:"page-header"},Jh={class:"reports-grid"},Wh={class:"report-card"},Qh={class:"report-header"},Hh={class:"period-selector"},Yh=["onClick"],Zh={class:"stats-grid"},Kh={class:"stat-item"},Xh={class:"value"},ek={class:"trend up"},tk={class:"stat-item"},sk={class:"value"},ak={class:"trend up"},ok={class:"report-card"},nk={class:"stats-grid"},lk={class:"stat-item"},ik={class:"value"},rk={class:"trend up"},dk={class:"stat-item"},uk={class:"value"},ck={class:"trend up"},pk={class:"report-card"},vk={class:"stats-grid"},mk={class:"stat-item"},fk={class:"value"},gk={class:"stat-item"},yk={class:"value"},bk={class:"report-card"},hk={class:"packages-list"},kk={class:"package-info"},_k={class:"package-name"},$k={class:"package-stats"},wk={class:"stat"},Ck={class:"value"},Pk={class:"stat"},Ak={class:"value"},Tk={class:"stat"},Sk={class:"value"},xk={key:0,class:"no-data"},Ek={class:"modal-content"},Ik={class:"modal-header"},Dk={class:"form-group"},Mk={class:"form-row"},Nk={class:"form-group"},Fk={class:"form-group"},Bk={class:"form-group"},Uk={class:"form-actions"},Rk=["disabled"],Lk={key:0,class:"fas fa-spinner fa-spin"},Ok={__name:"ReportsManagement",setup(S,{expose:s}){const c=g(!1),t=g(!1),i=g({totalRevenue:0,averageOrderValue:0,totalBookings:0,completionRate:0,revenueTrend:0,bookingTrend:0}),v=g({labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Revenue",data:[],borderColor:"#4CAF50",tension:.4}]});g({labels:["Wedding","Debut","Christening","Party","Other"],datasets:[{data:[],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF"],borderWidth:1,borderColor:"#ffffff"}]});const w=g({type:"revenue",startDate:"",endDate:"",format:"pdf"}),k=["7D","30D","90D","1Y"],_=g("30D"),b=g(0),C=g(0),A=g(0),l=g(0),f=g(null),a=g(null);g(null);const m=g([]),$=x=>x?x>=1e6?`₱${(x/1e6).toFixed(1)}M`:x>=1e3?`₱${(x/1e3).toFixed(1)}K`:`₱${x.toFixed(2)}`:"₱0",T=async()=>{try{const y=(await oe.get("http://127.0.0.1:8000/api/get-monthly-revenue")).data.monthlyRevenue||[];v.value.datasets[0].data=y.map(u=>{const I=Number(u);return isNaN(I)?0:I}),f.value&&f.value.update()}catch(x){console.error("Error fetching monthly revenue:",x),v.value.datasets[0].data=Array(12).fill(0),f.value&&f.value.update()}},h=async()=>{try{const x=await oe.get("http://127.0.0.1:8000/api/get-revenue-overview");i.value={...i.value,totalRevenue:x.data.totalRevenue,averageOrderValue:x.data.averageOrderValue,revenueTrend:x.data.revenueTrend},f.value&&(f.value.data.datasets[0].data=[x.data.revenueData.yesterday,x.data.revenueData.today],f.value.update())}catch(x){console.error("Error fetching revenue data:",x)}},K=async()=>{try{const x=await oe.get("http://127.0.0.1:8000/api/get-bookings-by-event-type");if(i.value={...i.value,totalBookings:x.data.totalBookings,bookingTrend:x.data.bookingTrend,completionRate:x.data.completionRate},a.value&&x.data.bookingsByType){const y=x.data.bookingsByType,u=Object.keys(y),I=u.map(F=>y[F].count||1);a.value.data.labels=u,a.value.data.datasets[0].data=I,a.value.update("none")}}catch(x){console.error("Error fetching bookings data:",x)}},U=async()=>{try{const x=await oe.get("http://127.0.0.1:8000/api/get-active-users");b.value=x.data.active_users_count,A.value=x.data.trend;const y=await oe.get("http://127.0.0.1:8000/api/get-ratings");console.log("Satisfaction Response:",y.data),C.value=y.data.satisfaction_percentage||0,l.value=y.data.trend||0}catch(x){console.error("Error fetching customer analytics:",x),C.value=0,l.value=0}},D=async()=>{try{const x=await oe.get("http://127.0.0.1:8000/api/get-popular-packages");m.value=x.data.popular_packages||[]}catch(x){console.error("Error fetching popular packages:",x),m.value=[]}},R=()=>{const x=document.querySelector("#revenueChart").getContext("2d");f.value=new Be(x,{type:"line",data:v.value,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(u){const I=u.parsed.y;return I>=1e9?`₱${(I/1e9).toFixed(1)}B`:I>=1e6?`₱${(I/1e6).toFixed(1)}M`:I>=1e3?`₱${(I/1e3).toFixed(1)}K`:`₱${I}`}}}},scales:{y:{beginAtZero:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"},ticks:{callback:function(u){return u>=1e9?`₱${(u/1e9).toFixed(1)}B`:u>=1e6?`₱${(u/1e6).toFixed(1)}M`:u>=1e3?`₱${(u/1e3).toFixed(1)}K`:`₱${u}`}}},x:{grid:{display:!1}}}}});const y=document.querySelector("#bookingsChart").getContext("2d");a.value=new Be(y,{type:"doughnut",data:{labels:["Wedding","Debut","Christening","Party","Other"],datasets:[{data:[1,1,1,1,1],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF"],borderColor:"#ffffff",borderWidth:2,hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,pointStyle:"circle",font:{size:12}}}},cutout:"70%",radius:"90%"}}),new Be(document.querySelector("#customerChart").getContext("2d"),{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"New Users",data:[120,150,180,220,280,350],backgroundColor:"#4CAF50"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"}},x:{grid:{display:!1}}}}})};return me(async()=>{await Promise.all([T(),h(),K(),U(),D()]),R()}),s({formatCurrency:$}),(x,y)=>(n(),d("div",jh,[e("main",zh,[e("div",Gh,[y[10]||(y[10]=e("h1",null,"Reports Management",-1)),e("button",{class:"generate-btn",onClick:y[0]||(y[0]=(...u)=>x.generateReport&&x.generateReport(...u))},y[9]||(y[9]=[e("i",{class:"fas fa-file-export"},null,-1),E(" Generate Report ")]))]),e("div",Jh,[e("div",Wh,[e("div",Qh,[y[11]||(y[11]=e("h3",null,"Revenue Overview",-1)),e("div",Hh,[(n(),d(te,null,ae(k,u=>e("button",{key:u,class:L(["period-btn",{active:_.value===u}]),onClick:I=>_.value=u},r(u),11,Yh)),64))])]),y[16]||(y[16]=e("div",{class:"chart-container"},[e("canvas",{id:"revenueChart"})],-1)),e("div",Zh,[e("div",Kh,[y[13]||(y[13]=e("span",{class:"label"},"Total Revenue",-1)),e("span",Xh,"₱"+r(i.value.totalRevenue.toLocaleString()),1),e("span",ek,[y[12]||(y[12]=e("i",{class:"fas fa-arrow-up"},null,-1)),E(" "+r(i.value.revenueTrend)+"% ",1)])]),e("div",tk,[y[15]||(y[15]=e("span",{class:"label"},"Average Order Value",-1)),e("span",sk,"₱"+r(i.value.averageOrderValue.toLocaleString()),1),e("span",ak,[y[14]||(y[14]=e("i",{class:"fas fa-arrow-up"},null,-1)),E(" "+r(i.value.bookingTrend)+"% ",1)])])])]),e("div",ok,[y[21]||(y[21]=e("div",{class:"report-header"},[e("h3",null,"Bookings by Event Type")],-1)),y[22]||(y[22]=e("div",{class:"chart-container"},[e("canvas",{id:"bookingsChart"})],-1)),e("div",nk,[e("div",lk,[y[18]||(y[18]=e("span",{class:"label"},"Total Bookings",-1)),e("span",ik,r(i.value.totalBookings),1),e("span",rk,[y[17]||(y[17]=e("i",{class:"fas fa-arrow-up"},null,-1)),E(" "+r(i.value.bookingTrend)+"% ",1)])]),e("div",dk,[y[20]||(y[20]=e("span",{class:"label"},"Completion Rate",-1)),e("span",uk,r(i.value.completionRate.toFixed(2))+"%",1),e("span",ck,[y[19]||(y[19]=e("i",{class:"fas fa-arrow-up"},null,-1)),E(" "+r(i.value.bookingTrend)+"% ",1)])])])]),e("div",pk,[y[25]||(y[25]=e("div",{class:"report-header"},[e("h3",null,"Customer Analytics")],-1)),y[26]||(y[26]=e("div",{class:"chart-container"},[e("canvas",{id:"customerChart"})],-1)),e("div",vk,[e("div",mk,[y[23]||(y[23]=e("span",{class:"label"},"Active Users",-1)),e("span",fk,r(b.value),1),e("span",{class:L(["trend",{up:A.value>0,down:A.value<0}])},[e("i",{class:L(["fas",A.value>0?"fa-arrow-up":"fa-arrow-down"])},null,2),E(" "+r(Math.abs(A.value))+"% ",1)],2)]),e("div",gk,[y[24]||(y[24]=e("span",{class:"label"},"Customer Satisfaction",-1)),e("span",yk,r(C.value)+"%",1),e("span",{class:L(["trend",{up:l.value>0,down:l.value<0}])},[e("i",{class:L(["fas",l.value>0?"fa-arrow-up":"fa-arrow-down"])},null,2),E(" "+r(Math.abs(l.value))+"% ",1)],2)])])]),e("div",bk,[y[30]||(y[30]=e("div",{class:"report-header"},[e("h3",null,"Popular Packages")],-1)),e("div",hk,[(n(!0),d(te,null,ae(m.value,u=>(n(),d("div",{key:u.package_name,class:"package-item"},[e("div",kk,[e("span",_k,r(u.package_name),1),e("span",{class:L(["event-type",u.event_type.toLowerCase()])},r(u.event_type),3)]),e("div",$k,[e("div",wk,[y[27]||(y[27]=e("span",{class:"label"},"Bookings",-1)),e("span",Ck,r(u.bookings),1)]),e("div",Pk,[y[28]||(y[28]=e("span",{class:"label"},"Revenue",-1)),e("span",Ak,r($(u.revenue)),1)]),e("div",Tk,[y[29]||(y[29]=e("span",{class:"label"},"Rating",-1)),e("span",Sk,r(u.rating.toFixed(1)),1)])])]))),128)),m.value.length===0?(n(),d("div",xk," No package data available ")):N("",!0)])])]),c.value?(n(),d("div",{key:0,class:"modal-overlay",onClick:y[8]||(y[8]=ce(u=>c.value=!1,["self"]))},[e("div",Ek,[e("div",Ik,[y[32]||(y[32]=e("h2",null,"Generate Report",-1)),e("button",{class:"close-btn",onClick:y[1]||(y[1]=u=>c.value=!1)},y[31]||(y[31]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",{onSubmit:y[7]||(y[7]=ce((...u)=>x.handleGenerateReport&&x.handleGenerateReport(...u),["prevent"])),class:"generate-form"},[e("div",Dk,[y[34]||(y[34]=e("label",{for:"reportType"},"Report Type",-1)),O(e("select",{id:"reportType","onUpdate:modelValue":y[2]||(y[2]=u=>w.value.type=u),required:""},y[33]||(y[33]=[e("option",{value:"revenue"},"Revenue Report",-1),e("option",{value:"bookings"},"Bookings Report",-1),e("option",{value:"customers"},"Customer Analytics",-1),e("option",{value:"packages"},"Package Performance",-1)]),512),[[ue,w.value.type]])]),e("div",Mk,[e("div",Nk,[y[35]||(y[35]=e("label",{for:"startDate"},"Start Date",-1)),O(e("input",{type:"date",id:"startDate","onUpdate:modelValue":y[3]||(y[3]=u=>w.value.startDate=u),required:""},null,512),[[Y,w.value.startDate]])]),e("div",Fk,[y[36]||(y[36]=e("label",{for:"endDate"},"End Date",-1)),O(e("input",{type:"date",id:"endDate","onUpdate:modelValue":y[4]||(y[4]=u=>w.value.endDate=u),required:""},null,512),[[Y,w.value.endDate]])])]),e("div",Bk,[y[38]||(y[38]=e("label",{for:"format"},"Export Format",-1)),O(e("select",{id:"format","onUpdate:modelValue":y[5]||(y[5]=u=>w.value.format=u),required:""},y[37]||(y[37]=[e("option",{value:"pdf"},"PDF",-1),e("option",{value:"excel"},"Excel",-1),e("option",{value:"csv"},"CSV",-1)]),512),[[ue,w.value.format]])]),e("div",Uk,[e("button",{type:"button",class:"cancel-btn",onClick:y[6]||(y[6]=u=>c.value=!1)}," Cancel "),e("button",{type:"submit",class:"submit-btn",disabled:t.value},[t.value?(n(),d("i",Lk)):N("",!0),E(" "+r(t.value?"Generating...":"Generate Report"),1)],8,Rk)])],32)])])):N("",!0)])]))}},Vk=ne(Ok,[["__scopeId","data-v-9769140c"]]);function qk(){xe();const{isLoading:S,withLoading:s}=Le(),c=g([]),t=g(0),i=g(1),v=12,w=()=>i.value*v<t.value,k=async _=>{w()&&await fetchGalleryItems(_,i.value+1)};return{galleryItems:c,totalItems:t,currentPage:i,isLoading:S,fetchGalleryItems,hasMoreItems:w,loadMore:k}}const jk={name:"Modal",props:{show:{type:Boolean,default:!1},title:{type:String,default:""}}},zk={class:"modal"},Gk={class:"modal-header"},Jk={class:"modal-body"};function Wk(S,s,c,t,i,v){return c.show?(n(),d("div",{key:0,class:"modal-overlay",onClick:s[1]||(s[1]=ce(w=>S.$emit("close"),["self"]))},[e("div",zk,[e("div",Gk,[e("h3",null,r(c.title),1),e("button",{class:"close-button",onClick:s[0]||(s[0]=w=>S.$emit("close"))},"×")]),e("div",Jk,[Dt(S.$slots,"default",{},void 0,!0)])])])):N("",!0)}const Ue=ne(jk,[["render",Wk],["__scopeId","data-v-34b14400"]]);const Qk={class:"gallery-management"},Hk={class:"filter-section"},Yk={class:"search-box"},Zk={class:"filter-controls"},Kk={class:"gallery-grid"},Xk={class:"item-preview"},e0=["src","alt"],t0={class:"item-details"},s0={class:"category"},a0={class:"date"},o0={class:"item-actions"},n0=["onClick"],l0=["onClick"],i0={key:0,class:"load-more"},r0=["disabled"],d0={key:0,class:"fas fa-spinner fa-spin"},u0={key:1},c0={class:"upload-modal"},p0={key:0,class:"upload-prompt"},v0={key:1,class:"selected-files"},m0=["src"],f0=["src"],g0={class:"file-info"},y0={class:"file-name"},b0=["onClick"],h0={class:"upload-form"},k0={class:"form-group"},_0={class:"form-group"},$0={class:"form-group"},w0={class:"form-group"},C0={class:"form-group"},P0={class:"modal-footer"},A0=["disabled"],T0={key:0,class:"fas fa-spinner fa-spin"},S0={key:1},x0={class:"edit-modal"},E0={class:"preview"},I0=["src","alt"],D0=["src"],M0={class:"edit-form"},N0={class:"form-group"},F0={class:"form-group"},B0={class:"form-group"},U0={class:"form-group"},R0={class:"form-group"},L0={class:"modal-footer"},O0=["disabled"],V0={key:0,class:"fas fa-spinner fa-spin"},q0={key:1},j0={__name:"GalleryManagement",setup(S){const{galleryItems:s,isLoading:c,fetchGalleryItems:t,hasMoreItems:i,loadMore:v}=qk(),{showNotification:w}=we(),k=g(""),_=g("all"),b=g("date-desc"),C=g(!1),A=g(!1),l=g(!1),f=g(!1),a=g(!1),m=g(null),$=g([]),T=g({category:"wedding",titlePattern:"",description:"",location:"",date:new Date().toISOString().split("T")[0]}),h=g(null),K=g(null),U=g({title:"",category:"",description:"",location:"",date:""}),D=ee(()=>{let p=[...s.value];if(_.value!=="all"&&(p=p.filter(o=>o.category===_.value)),k.value){const o=k.value.toLowerCase();p=p.filter(W=>W.title.toLowerCase().includes(o)||W.description.toLowerCase().includes(o)||W.location.toLowerCase().includes(o))}switch(b.value){case"date-desc":p.sort((o,W)=>new Date(W.date)-new Date(o.date));break;case"date-asc":p.sort((o,W)=>new Date(o.date)-new Date(W.date));break;case"name-asc":p.sort((o,W)=>o.title.localeCompare(W.title));break;case"name-desc":p.sort((o,W)=>W.title.localeCompare(o.title));break}return p});Pe([_,b],()=>{t(_.value)});const R=p=>{const o=Array.from(p.dataTransfer.files);y(o)},x=p=>{const o=Array.from(p.target.files);y(o)},y=p=>{p.filter(W=>W.type.startsWith("image/")||W.type.startsWith("video/")).forEach(W=>{const q=new FileReader;q.onload=j=>{$.value.push({file:W,name:W.name,type:W.type,preview:j.target.result})},q.readAsDataURL(W)})},u=p=>{$.value.splice(p,1)},I=()=>{C.value=!0},F=()=>{C.value=!1,$.value=[],T.value={category:"wedding",titlePattern:"",description:"",location:"",date:new Date().toISOString().split("T")[0]}},z=p=>{h.value=p,U.value={title:p.title,category:p.category,description:p.description,location:p.location,date:p.date},A.value=!0},V=()=>{A.value=!1,h.value=null,U.value={title:"",category:"",description:"",location:"",date:""}},B=p=>{K.value=p,l.value=!0},J=()=>{l.value=!1,K.value=null},G=async()=>{if($.value.length){f.value=!0;try{const p=new FormData;$.value.forEach((o,W)=>{p.append("files",o.file)}),p.append("data",JSON.stringify(T.value)),await api.post("/gallery/upload",p,{headers:{"Content-Type":"multipart/form-data"}}),w({type:"success",message:"Files uploaded successfully"}),F(),t(_.value)}catch{w({type:"error",message:"Failed to upload files. Please try again."})}finally{f.value=!1}}},Q=async()=>{if(h.value){a.value=!0;try{await api.put(`/gallery/${h.value.id}`,U.value),w({type:"success",message:"Gallery item updated successfully"}),V(),t(_.value)}catch{w({type:"error",message:"Failed to update gallery item. Please try again."})}finally{a.value=!1}}},H=async()=>{if(K.value)try{await api.delete(`/gallery/${K.value.id}`),w({type:"success",message:"Gallery item deleted successfully"}),J(),t(_.value)}catch{w({type:"error",message:"Failed to delete gallery item. Please try again."})}},P=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return t(),(p,o)=>{var W;return n(),d("div",Qk,[e("div",{class:"page-header"},[o[17]||(o[17]=e("h1",null,"Gallery Management",-1)),e("button",{class:"primary-btn",onClick:I},o[16]||(o[16]=[e("i",{class:"fas fa-plus"},null,-1),E(" Add New Items ")]))]),e("div",Hk,[e("div",Yk,[o[18]||(o[18]=e("i",{class:"fas fa-search"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=q=>k.value=q),placeholder:"Search gallery items..."},null,512),[[Y,k.value]])]),e("div",Zk,[O(e("select",{"onUpdate:modelValue":o[1]||(o[1]=q=>_.value=q)},o[19]||(o[19]=[he('<option value="all" data-v-3db33ddc>All Categories</option><option value="wedding" data-v-3db33ddc>Weddings</option><option value="corporate" data-v-3db33ddc>Corporate</option><option value="social" data-v-3db33ddc>Social</option><option value="themed" data-v-3db33ddc>Themed</option>',5)]),512),[[ue,_.value]]),O(e("select",{"onUpdate:modelValue":o[2]||(o[2]=q=>b.value=q)},o[20]||(o[20]=[e("option",{value:"date-desc"},"Newest First",-1),e("option",{value:"date-asc"},"Oldest First",-1),e("option",{value:"name-asc"},"Name A-Z",-1),e("option",{value:"name-desc"},"Name Z-A",-1)]),512),[[ue,b.value]])])]),e("div",Kk,[(n(!0),d(te,null,ae(D.value,q=>(n(),d("div",{key:q.id,class:"gallery-item"},[e("div",Xk,[e("img",{src:q.thumbnail,alt:q.title,loading:"lazy"},null,8,e0),e("div",{class:L(["item-type-badge",q.type])},[e("i",{class:L(q.type==="video"?"fas fa-video":"fas fa-image")},null,2),E(" "+r(q.type),1)],2)]),e("div",t0,[e("h3",null,r(q.title),1),e("p",s0,r(q.category),1),e("p",a0,r(P(q.date)),1)]),e("div",o0,[e("button",{class:"edit-btn",onClick:j=>z(q)},o[21]||(o[21]=[e("i",{class:"fas fa-edit"},null,-1),E(" Edit ")]),8,n0),e("button",{class:"delete-btn",onClick:j=>B(q)},o[22]||(o[22]=[e("i",{class:"fas fa-trash"},null,-1),E(" Delete ")]),8,l0)])]))),128))]),M(i)?(n(),d("div",i0,[e("button",{class:"load-more-btn",onClick:o[3]||(o[3]=(...q)=>M(v)&&M(v)(...q)),disabled:M(c)},[M(c)?(n(),d("i",d0)):(n(),d("span",u0,"Load More"))],8,r0)])):N("",!0),C.value?(n(),de(Ue,{key:1,onClose:F,title:"Add Gallery Items"},{default:ve(()=>[e("div",c0,[e("div",{class:"upload-zone",onDrop:ce(R,["prevent"]),onDragover:o[5]||(o[5]=ce(()=>{},["prevent"]))},[e("input",{type:"file",ref_key:"fileInput",ref:m,multiple:"",accept:"image/*,video/*",onChange:x,class:"hidden"},null,544),$.value.length?(n(),d("div",v0,[(n(!0),d(te,null,ae($.value,(q,j)=>(n(),d("div",{key:j,class:"file-item"},[q.type.startsWith("image")?(n(),d("img",{key:0,src:q.preview,alt:"Preview"},null,8,m0)):q.type.startsWith("video")?(n(),d("video",{key:1,src:q.preview,controls:""},null,8,f0)):N("",!0),e("div",g0,[e("span",y0,r(q.name),1),e("button",{onClick:X=>u(j)},o[25]||(o[25]=[e("i",{class:"fas fa-times"},null,-1)]),8,b0)])]))),128))])):(n(),d("div",p0,[o[23]||(o[23]=e("i",{class:"fas fa-cloud-upload-alt"},null,-1)),o[24]||(o[24]=e("p",null,"Drag and drop files here or",-1)),e("button",{onClick:o[4]||(o[4]=q=>p.$refs.fileInput.click())},"Browse Files")]))],32),e("div",h0,[e("div",k0,[o[27]||(o[27]=e("label",null,"Category",-1)),O(e("select",{"onUpdate:modelValue":o[6]||(o[6]=q=>T.value.category=q)},o[26]||(o[26]=[e("option",{value:"wedding"},"Wedding",-1),e("option",{value:"corporate"},"Corporate",-1),e("option",{value:"social"},"Social",-1),e("option",{value:"themed"},"Themed",-1)]),512),[[ue,T.value.category]])]),e("div",_0,[o[28]||(o[28]=e("label",null,"Title Pattern",-1)),O(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=q=>T.value.titlePattern=q),placeholder:"e.g., Wedding {n} - will generate Wedding 1, Wedding 2, etc."},null,512),[[Y,T.value.titlePattern]])]),e("div",$0,[o[29]||(o[29]=e("label",null,"Description",-1)),O(e("textarea",{"onUpdate:modelValue":o[8]||(o[8]=q=>T.value.description=q),placeholder:"Enter description for the gallery items"},null,512),[[Y,T.value.description]])]),e("div",w0,[o[30]||(o[30]=e("label",null,"Location",-1)),O(e("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=q=>T.value.location=q),placeholder:"Enter event location"},null,512),[[Y,T.value.location]])]),e("div",C0,[o[31]||(o[31]=e("label",null,"Date",-1)),O(e("input",{type:"date","onUpdate:modelValue":o[10]||(o[10]=q=>T.value.date=q)},null,512),[[Y,T.value.date]])])]),e("div",P0,[e("button",{class:"secondary-btn",onClick:F}," Cancel "),e("button",{class:"primary-btn",onClick:G,disabled:f.value||!$.value.length},[f.value?(n(),d("i",T0)):(n(),d("span",S0,"Upload Files"))],8,A0)])])]),_:1})):N("",!0),A.value?(n(),de(Ue,{key:2,onClose:V,title:"Edit Gallery Item"},{default:ve(()=>{var q,j,X,fe,le;return[e("div",x0,[e("div",E0,[((q=h.value)==null?void 0:q.type)==="image"?(n(),d("img",{key:0,src:(j=h.value)==null?void 0:j.url,alt:(X=h.value)==null?void 0:X.title},null,8,I0)):((fe=h.value)==null?void 0:fe.type)==="video"?(n(),d("video",{key:1,src:(le=h.value)==null?void 0:le.url,controls:""},null,8,D0)):N("",!0)]),e("div",M0,[e("div",N0,[o[32]||(o[32]=e("label",null,"Title",-1)),O(e("input",{type:"text","onUpdate:modelValue":o[11]||(o[11]=be=>U.value.title=be)},null,512),[[Y,U.value.title]])]),e("div",F0,[o[34]||(o[34]=e("label",null,"Category",-1)),O(e("select",{"onUpdate:modelValue":o[12]||(o[12]=be=>U.value.category=be)},o[33]||(o[33]=[e("option",{value:"wedding"},"Wedding",-1),e("option",{value:"corporate"},"Corporate",-1),e("option",{value:"social"},"Social",-1),e("option",{value:"themed"},"Themed",-1)]),512),[[ue,U.value.category]])]),e("div",B0,[o[35]||(o[35]=e("label",null,"Description",-1)),O(e("textarea",{"onUpdate:modelValue":o[13]||(o[13]=be=>U.value.description=be)},null,512),[[Y,U.value.description]])]),e("div",U0,[o[36]||(o[36]=e("label",null,"Location",-1)),O(e("input",{type:"text","onUpdate:modelValue":o[14]||(o[14]=be=>U.value.location=be)},null,512),[[Y,U.value.location]])]),e("div",R0,[o[37]||(o[37]=e("label",null,"Date",-1)),O(e("input",{type:"date","onUpdate:modelValue":o[15]||(o[15]=be=>U.value.date=be)},null,512),[[Y,U.value.date]])])]),e("div",L0,[e("button",{class:"secondary-btn",onClick:V}," Cancel "),e("button",{class:"primary-btn",onClick:Q,disabled:a.value},[a.value?(n(),d("i",V0)):(n(),d("span",q0,"Save Changes"))],8,O0)])])]}),_:1})):N("",!0),l.value?(n(),de(Ie,{key:3,onConfirm:H,onCancel:J,title:"Delete Gallery Item",message:"Are you sure you want to delete "+((W=K.value)==null?void 0:W.title)+"? This action cannot be undone."},null,8,["message"])):N("",!0)])}}},z0=ne(j0,[["__scopeId","data-v-3db33ddc"]]);function G0(){const S=xe(),{showNotification:s}=we(),{isLoading:c,withLoading:t}=Le(),i=g([]),v=g(0),w=g(1),k=6,_=async($=1,T={})=>{try{const h=await t("testimonials",()=>S.get("/testimonials",{params:{page:$,limit:k,...T}}));$===1?i.value=h.data.items:i.value=[...i.value,...h.data.items],v.value=h.data.total,w.value=$}catch(h){s({type:"error",message:"Failed to load testimonials. Please try again later."}),console.error("Error fetching testimonials:",h)}},b=async $=>{try{const T=await t("add-testimonial",()=>S.post("/testimonials",$));return s({type:"success",message:"Thank you for your testimonial!"}),T.data}catch(T){throw s({type:"error",message:"Failed to submit testimonial. Please try again."}),T}},C=async($,T)=>{try{const h=await t("update-testimonial",()=>S.put(`/testimonials/${$}`,T));return s({type:"success",message:"Testimonial updated successfully"}),h.data}catch(h){throw s({type:"error",message:"Failed to update testimonial. Please try again."}),h}},A=async $=>{try{await t("delete-testimonial",()=>S.delete(`/testimonials/${$}`)),s({type:"success",message:"Testimonial deleted successfully"})}catch(T){throw s({type:"error",message:"Failed to delete testimonial. Please try again."}),T}},l=async $=>{try{const T=await t("approve-testimonial",()=>S.put(`/testimonials/${$}/approve`));return s({type:"success",message:"Testimonial approved successfully"}),T.data}catch(T){throw s({type:"error",message:"Failed to approve testimonial. Please try again."}),T}},f=async($,T)=>{try{const h=await t("reject-testimonial",()=>S.put(`/testimonials/${$}/reject`,{reason:T}));return s({type:"success",message:"Testimonial rejected successfully"}),h.data}catch(h){throw s({type:"error",message:"Failed to reject testimonial. Please try again."}),h}},a=()=>w.value*k<v.value;return{testimonials:i,totalTestimonials:v,currentPage:w,isLoading:c,fetchTestimonials:_,addTestimonial:b,updateTestimonial:C,deleteTestimonial:A,approveTestimonial:l,rejectTestimonial:f,hasMoreTestimonials:a,loadMore:async($={})=>{a()&&await _(w.value+1,$)}}}const J0={class:"testimonials-management"},W0={class:"page-header"},Q0={class:"header-actions"},H0=["disabled"],Y0={class:"stats-grid"},Z0={class:"stat-card"},K0={class:"stat-info"},X0={class:"stat-value"},e_={class:"stat-card"},t_={class:"stat-info"},s_={class:"stat-value"},a_={class:"stat-card"},o_={class:"stat-info"},n_={class:"stat-value"},l_={class:"stat-card"},i_={class:"stat-info"},r_={class:"stat-value"},d_={class:"filter-section"},u_={class:"search-box"},c_={class:"filter-controls"},p_={class:"table-container"},v_={class:"testimonials-table"},m_={class:"user-cell"},f_={class:"user-info"},g_=["src","alt"],y_={class:"rating-cell"},b_={class:"rating"},h_={class:"content-cell"},k_={class:"truncate"},__=["onClick"],$_={class:"actions-cell"},w_=["onClick","disabled"],C_=["onClick","disabled"],P_=["onClick","disabled"],A_=["onClick","disabled"],T_={key:0,class:"load-more"},S_=["disabled"],x_={key:0,class:"fas fa-spinner fa-spin"},E_={key:1},I_={key:1,class:"empty-state"},D_={class:"testimonial-details"},M_={class:"user-header"},N_=["src","alt"],F_={class:"user-info"},B_={class:"rating"},U_={class:"testimonial-content"},R_={key:0,class:"testimonial-images"},L_=["src","alt","onClick"],O_={class:"meta-info"},V_={class:"date"},q_={class:"reject-form"},j_={class:"modal-actions"},z_=["disabled"],G_={key:0,class:"fas fa-spinner fa-spin"},J_={key:1},W_={__name:"TestimonialsManagement",setup(S){const{testimonials:s,totalTestimonials:c,isLoading:t,fetchTestimonials:i,approveTestimonial:v,rejectTestimonial:w,deleteTestimonial:k,hasMoreTestimonials:_,loadMore:b}=G0(),C=g(""),A=g(""),l=g(""),f=g("date-desc"),a=g(null),m=g(!1),$=g(!1),T=g(""),h=g(null),K=ee(()=>s.value.filter(P=>P.status==="pending").length),U=ee(()=>s.value.filter(P=>P.status==="approved").length),D=ee(()=>s.value.filter(P=>P.featured).length),R=ee(()=>{let P=[...s.value];if(A.value&&(P=P.filter(p=>p.status===A.value)),l.value&&(P=P.filter(p=>p.eventType===l.value)),C.value){const p=C.value.toLowerCase();P=P.filter(o=>o.content.toLowerCase().includes(p)||o.userName.toLowerCase().includes(p))}switch(f.value){case"date-desc":P.sort((p,o)=>new Date(o.date)-new Date(p.date));break;case"date-asc":P.sort((p,o)=>new Date(p.date)-new Date(o.date));break;case"rating-desc":P.sort((p,o)=>o.rating-p.rating);break;case"rating-asc":P.sort((p,o)=>p.rating-o.rating);break}return P}),x=P=>{a.value=P},y=()=>{a.value=null},u=P=>{a.value=P,m.value=!0},I=()=>{a.value=null,m.value=!1,T.value=""},F=async()=>{if(!(!a.value||!T.value))try{await w(a.value.id,T.value),I(),await i()}catch(P){console.error("Error rejecting testimonial:",P)}},z=P=>{h.value=P,$.value=!0},V=()=>{h.value=null,$.value=!1},B=async()=>{if(h.value)try{await k(h.value.id),V(),await i()}catch(P){console.error("Error deleting testimonial:",P)}},J=()=>{b({status:A.value,eventType:l.value})},G=()=>{},Q=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),H=P=>{window.open(P,"_blank")};return Pe([A,l,f],()=>{i(1,{status:A.value,eventType:l.value})}),me(()=>{i()}),(P,p)=>{var o;return n(),d("div",J0,[e("div",W0,[p[6]||(p[6]=e("h1",null,"Testimonials Management",-1)),e("div",Q0,[e("button",{class:"export-btn",onClick:G,disabled:M(t)},p[5]||(p[5]=[e("i",{class:"fas fa-download"},null,-1),E(" Export Data ")]),8,H0)])]),e("div",Y0,[e("div",Z0,[p[8]||(p[8]=e("div",{class:"stat-icon pending"},[e("i",{class:"fas fa-clock"})],-1)),e("div",K0,[p[7]||(p[7]=e("h3",null,"Pending Review",-1)),e("p",X0,r(K.value),1)])]),e("div",e_,[p[10]||(p[10]=e("div",{class:"stat-icon approved"},[e("i",{class:"fas fa-check"})],-1)),e("div",t_,[p[9]||(p[9]=e("h3",null,"Approved",-1)),e("p",s_,r(U.value),1)])]),e("div",a_,[p[12]||(p[12]=e("div",{class:"stat-icon featured"},[e("i",{class:"fas fa-star"})],-1)),e("div",o_,[p[11]||(p[11]=e("h3",null,"Featured",-1)),e("p",n_,r(D.value),1)])]),e("div",l_,[p[14]||(p[14]=e("div",{class:"stat-icon total"},[e("i",{class:"fas fa-comments"})],-1)),e("div",i_,[p[13]||(p[13]=e("h3",null,"Total",-1)),e("p",r_,r(M(c)),1)])])]),e("div",d_,[e("div",u_,[p[15]||(p[15]=e("i",{class:"fas fa-search"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=W=>C.value=W),placeholder:"Search testimonials..."},null,512),[[Y,C.value]])]),e("div",c_,[O(e("select",{"onUpdate:modelValue":p[1]||(p[1]=W=>A.value=W)},p[16]||(p[16]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)]),512),[[ue,A.value]]),O(e("select",{"onUpdate:modelValue":p[2]||(p[2]=W=>l.value=W)},p[17]||(p[17]=[he('<option value="" data-v-f6de1a36>All Event Types</option><option value="wedding" data-v-f6de1a36>Wedding</option><option value="corporate" data-v-f6de1a36>Corporate</option><option value="birthday" data-v-f6de1a36>Birthday</option><option value="social" data-v-f6de1a36>Social</option><option value="other" data-v-f6de1a36>Other</option>',6)]),512),[[ue,l.value]]),O(e("select",{"onUpdate:modelValue":p[3]||(p[3]=W=>f.value=W)},p[18]||(p[18]=[e("option",{value:"date-desc"},"Newest First",-1),e("option",{value:"date-asc"},"Oldest First",-1),e("option",{value:"rating-desc"},"Highest Rated",-1),e("option",{value:"rating-asc"},"Lowest Rated",-1)]),512),[[ue,f.value]])])]),e("div",p_,[e("table",v_,[p[23]||(p[23]=e("thead",null,[e("tr",null,[e("th",null,"User"),e("th",null,"Event Type"),e("th",null,"Rating"),e("th",null,"Content"),e("th",null,"Status"),e("th",null,"Date"),e("th",null,"Actions")])],-1)),e("tbody",null,[(n(!0),d(te,null,ae(R.value,W=>(n(),d("tr",{key:W.id},[e("td",m_,[e("div",f_,[e("img",{src:W.userAvatar||"/default-avatar.png",alt:W.userName},null,8,g_),e("span",null,r(W.userName),1)])]),e("td",null,r(W.eventType),1),e("td",y_,[e("div",b_,[(n(),d(te,null,ae(5,q=>e("i",{key:q,class:L(["fas fa-star",{active:q<=W.rating}])},null,2)),64))])]),e("td",h_,[e("p",k_,r(W.content),1),e("button",{class:"view-more",onClick:q=>x(W)}," View More ",8,__)]),e("td",null,[e("span",{class:L(["status-badge",W.status])},r(W.status),3)]),e("td",null,r(Q(W.date)),1),e("td",$_,[W.status==="pending"?(n(),d(te,{key:0},[e("button",{class:"approve-btn",onClick:q=>P.approveTestimonial(W.id),disabled:M(t)},p[19]||(p[19]=[e("i",{class:"fas fa-check"},null,-1)]),8,w_),e("button",{class:"reject-btn",onClick:q=>u(W),disabled:M(t)},p[20]||(p[20]=[e("i",{class:"fas fa-times"},null,-1)]),8,C_)],64)):N("",!0),W.status==="approved"?(n(),d("button",{key:1,class:L(["feature-btn",{featured:W.featured}]),onClick:q=>P.toggleFeature(W.id),disabled:M(t)},p[21]||(p[21]=[e("i",{class:"fas fa-star"},null,-1)]),10,P_)):N("",!0),e("button",{class:"delete-btn",onClick:q=>z(W),disabled:M(t)},p[22]||(p[22]=[e("i",{class:"fas fa-trash"},null,-1)]),8,A_)])]))),128))])])]),M(_)?(n(),d("div",T_,[e("button",{class:"load-more-btn",onClick:J,disabled:M(t)},[M(t)?(n(),d("i",x_)):(n(),d("span",E_,"Load More"))],8,S_)])):N("",!0),R.value.length?N("",!0):(n(),d("div",I_,p[24]||(p[24]=[e("i",{class:"fas fa-comments"},null,-1),e("h3",null,"No testimonials found",-1),e("p",null,"Try adjusting your filters or search query",-1)]))),a.value?(n(),de(Ue,{key:2,onClose:y,title:"Testimonial from "+a.value.userName},{default:ve(()=>{var W;return[e("div",D_,[e("div",M_,[e("img",{src:a.value.userAvatar||"/default-avatar.png",alt:a.value.userName},null,8,N_),e("div",F_,[e("h3",null,r(a.value.userName),1),e("p",null,r(a.value.eventType),1)]),e("div",B_,[(n(),d(te,null,ae(5,q=>e("i",{key:q,class:L(["fas fa-star",{active:q<=a.value.rating}])},null,2)),64))])]),e("div",U_,r(a.value.content),1),(W=a.value.images)!=null&&W.length?(n(),d("div",R_,[(n(!0),d(te,null,ae(a.value.images,(q,j)=>(n(),d("img",{key:j,src:q,alt:"Event photo "+(j+1),onClick:X=>H(q)},null,8,L_))),128))])):N("",!0),e("div",O_,[e("span",V_,[p[25]||(p[25]=e("i",{class:"fas fa-calendar"},null,-1)),E(" "+r(Q(a.value.date)),1)]),e("span",{class:L(["status-badge",a.value.status])},r(a.value.status),3)])])]}),_:1},8,["title"])):N("",!0),m.value?(n(),de(Ue,{key:3,onClose:I,title:"Reject Testimonial"},{default:ve(()=>[e("div",q_,[p[26]||(p[26]=e("p",null,"Please provide a reason for rejecting this testimonial:",-1)),O(e("textarea",{"onUpdate:modelValue":p[4]||(p[4]=W=>T.value=W),placeholder:"Enter rejection reason...",rows:"4"},null,512),[[Y,T.value]]),e("div",j_,[e("button",{class:"secondary-btn",onClick:I}," Cancel "),e("button",{class:"primary-btn",onClick:F,disabled:!T.value||M(t)},[M(t)?(n(),d("i",G_)):(n(),d("span",J_,"Reject"))],8,z_)])])]),_:1})):N("",!0),$.value?(n(),de(Ie,{key:4,onConfirm:B,onCancel:V,title:"Delete Testimonial",message:"Are you sure you want to delete this testimonial from "+((o=h.value)==null?void 0:o.userName)+"? This action cannot be undone."},null,8,["message"])):N("",!0)])}}},Q_=ne(W_,[["__scopeId","data-v-f6de1a36"]]);function H_(){const S=xe(),{showNotification:s}=we(),{isLoading:c,withLoading:t}=Le(),i=g([]),v=g([]);return{faqs:i,categories:v,isLoading:c,fetchFAQs:async(m="")=>{try{const $=await t("faqs",()=>S.get("/faqs",{params:{category:m}}));i.value=$.data}catch($){s({type:"error",message:"Failed to load FAQs. Please try again later."}),console.error("Error fetching FAQs:",$)}},fetchCategories:async()=>{try{const m=await t("faq-categories",()=>S.get("/faqs/categories"));v.value=m.data}catch(m){s({type:"error",message:"Failed to load FAQ categories."}),console.error("Error fetching FAQ categories:",m)}},addFAQ:async m=>{try{const $=await t("add-faq",()=>S.post("/faqs",m));return s({type:"success",message:"FAQ added successfully"}),$.data}catch($){throw s({type:"error",message:"Failed to add FAQ. Please try again."}),$}},updateFAQ:async(m,$)=>{try{const T=await t("update-faq",()=>S.put(`/faqs/${m}`,$));return s({type:"success",message:"FAQ updated successfully"}),T.data}catch(T){throw s({type:"error",message:"Failed to update FAQ. Please try again."}),T}},deleteFAQ:async m=>{try{await t("delete-faq",()=>S.delete(`/faqs/${m}`)),s({type:"success",message:"FAQ deleted successfully"})}catch($){throw s({type:"error",message:"Failed to delete FAQ. Please try again."}),$}},addCategory:async m=>{try{const $=await t("add-category",()=>S.post("/faqs/categories",m));return s({type:"success",message:"Category added successfully"}),$.data}catch($){throw s({type:"error",message:"Failed to add category. Please try again."}),$}},updateCategory:async(m,$)=>{try{const T=await t("update-category",()=>S.put(`/faqs/categories/${m}`,$));return s({type:"success",message:"Category updated successfully"}),T.data}catch(T){throw s({type:"error",message:"Failed to update category. Please try again."}),T}},deleteCategory:async m=>{try{await t("delete-category",()=>S.delete(`/faqs/categories/${m}`)),s({type:"success",message:"Category deleted successfully"})}catch($){throw s({type:"error",message:"Failed to delete category. Please try again."}),$}},reorderFAQs:async m=>{try{await t("reorder-faqs",()=>S.put("/faqs/reorder",{orderedIds:m})),s({type:"success",message:"FAQs reordered successfully"})}catch($){throw s({type:"error",message:"Failed to reorder FAQs. Please try again."}),$}}}}const Y_={class:"faq-management"},Z_={class:"categories-section"},K_={class:"categories-grid"},X_={class:"category-header"},e2={class:"category-info"},t2={class:"category-actions"},s2=["onClick"],a2=["onClick"],o2={class:"faq-count"},n2={class:"faqs-section"},l2={class:"section-header"},i2={class:"filter-controls"},r2=["value"],d2={class:"search-box"},u2={class:"faq-list"},c2={class:"faq-item"},p2={class:"faq-content"},v2={class:"faq-meta"},m2={class:"category-badge"},f2={class:"date"},g2={class:"faq-actions"},y2=["onClick"],b2=["onClick"],h2={key:0,class:"empty-state"},k2={key:0},_2={key:1},$2={class:"category-form"},w2={class:"form-group"},C2={class:"form-group"},P2={class:"icon-selector"},A2=["onClick"],T2={class:"modal-actions"},S2=["disabled"],x2={key:0,class:"fas fa-spinner fa-spin"},E2={key:1},I2={class:"faq-form"},D2={class:"form-group"},M2=["value"],N2={key:0,class:"error-message"},F2={class:"form-group"},B2={key:0,class:"error-message"},U2={class:"form-group"},R2={key:0,class:"error-message"},L2={class:"form-group"},O2={class:"link-inputs"},V2=["onUpdate:modelValue"],q2=["onUpdate:modelValue"],j2=["onClick"],z2={class:"modal-actions"},G2=["disabled"],J2={key:0,class:"fas fa-spinner fa-spin"},W2={key:1},Q2={__name:"FAQManagement",setup(S){const{faqs:s,categories:c,isLoading:t,fetchFAQs:i,fetchCategories:v,addFAQ:w,updateFAQ:k,deleteFAQ:_,addCategory:b,updateCategory:C,deleteCategory:A,reorderFAQs:l}=H_(),f=g(""),a=g(""),m=g(!1),$=g(!1),T=g(!1),h=g(null),K=g(null),U=g(""),D=g(null),R=Te({name:"",icon:""}),x=Te({categoryId:"",question:"",answer:"",links:[]}),y={categoryId:{required:ze},question:{required:ze,minLength:kt(10)},answer:{required:ze,minLength:kt(20)},links:{$each:{text:{required:ze},url:{required:ze,url:Wt}}}},u=Gt(y,x),I=["fas fa-question-circle","fas fa-info-circle","fas fa-book","fas fa-calendar-alt","fas fa-credit-card","fas fa-box","fas fa-truck","fas fa-user","fas fa-cog","fas fa-shield-alt"],F=ee(()=>{let ie=[...s.value];if(a.value&&(ie=ie.filter(se=>se.categoryId===a.value)),f.value){const se=f.value.toLowerCase();ie=ie.filter(re=>re.question.toLowerCase().includes(se)||re.answer.toLowerCase().includes(se))}return ie}),z=ee(()=>{var ie,se;return U.value==="category"?`Are you sure you want to delete the category "${(ie=D.value)==null?void 0:ie.name}"? This will also delete all FAQs in this category.`:`Are you sure you want to delete the FAQ "${(se=D.value)==null?void 0:se.question}"?`}),V=ie=>s.value.filter(se=>se.categoryId===ie).length,B=ie=>{const se=c.value.find(re=>re.id===ie);return(se==null?void 0:se.name)||"Uncategorized"},J=(ie,se)=>ie.length<=se?ie:ie.substring(0,se)+"...",G=ie=>new Date(ie).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),Q=(ie=null)=>{ie?(h.value=ie,R.name=ie.name,R.icon=ie.icon):(h.value=null,R.name="",R.icon=""),m.value=!0},H=()=>{m.value=!1,h.value=null,R.name="",R.icon=""},P=async()=>{if(!(!R.name||!R.icon))try{h.value?await C(h.value.id,R):await b(R),H(),await v()}catch(ie){console.error("Error saving category:",ie)}},p=(ie=null)=>{ie?(K.value=ie,x.categoryId=ie.categoryId,x.question=ie.question,x.answer=ie.answer,x.links=[...ie.links||[]]):(K.value=null,x.categoryId=a.value||"",x.question="",x.answer="",x.links=[]),$.value=!0},o=()=>{$.value=!1,K.value=null,u.value.$reset(),x.categoryId="",x.question="",x.answer="",x.links=[]},W=async()=>{if(await u.value.$validate())try{K.value?await k(K.value.id,x):await w(x),o(),await i()}catch(se){console.error("Error saving FAQ:",se)}},q=()=>{x.links.push({text:"",url:""})},j=ie=>{x.links.splice(ie,1)},X=ie=>{U.value="category",D.value=ie,T.value=!0},fe=ie=>{U.value="faq",D.value=ie,T.value=!0},le=async()=>{try{U.value==="category"?(await A(D.value.id),await v()):(await _(D.value.id),await i()),be()}catch(ie){console.error("Error deleting item:",ie)}},be=()=>{T.value=!1,U.value="",D.value=null},Ae=async({oldIndex:ie,newIndex:se})=>{if(ie===se)return;const re=F.value.map(Ce=>Ce.id);try{await l(re)}catch(Ce){console.error("Error reordering FAQs:",Ce)}};return onMounted(async()=>{await Promise.all([v(),i()])}),(ie,se)=>(n(),d("div",Y_,[e("div",{class:"page-header"},[se[9]||(se[9]=e("h1",null,"FAQ Management",-1)),e("div",{class:"header-actions"},[e("button",{class:"add-category-btn",onClick:Q},se[7]||(se[7]=[e("i",{class:"fas fa-folder-plus"},null,-1),E(" Add Category ")])),e("button",{class:"add-faq-btn",onClick:p},se[8]||(se[8]=[e("i",{class:"fas fa-plus"},null,-1),E(" Add FAQ ")]))])]),e("div",Z_,[se[12]||(se[12]=e("h2",null,"Categories",-1)),e("div",K_,[(n(!0),d(te,null,ae(M(c),re=>(n(),d("div",{key:re.id,class:"category-card"},[e("div",X_,[e("div",e2,[e("i",{class:L(re.icon)},null,2),e("h3",null,r(re.name),1)]),e("div",t2,[e("button",{class:"edit-btn",onClick:Ce=>ie.editCategory(re)},se[10]||(se[10]=[e("i",{class:"fas fa-edit"},null,-1)]),8,s2),e("button",{class:"delete-btn",onClick:Ce=>X(re)},se[11]||(se[11]=[e("i",{class:"fas fa-trash"},null,-1)]),8,a2)])]),e("p",o2,r(V(re.id))+" FAQs ",1)]))),128))])]),e("div",n2,[e("div",l2,[se[15]||(se[15]=e("h2",null,"FAQs",-1)),e("div",i2,[O(e("select",{"onUpdate:modelValue":se[0]||(se[0]=re=>a.value=re)},[se[13]||(se[13]=e("option",{value:""},"All Categories",-1)),(n(!0),d(te,null,ae(M(c),re=>(n(),d("option",{key:re.id,value:re.id},r(re.name),9,r2))),128))],512),[[ue,a.value]]),e("div",d2,[se[14]||(se[14]=e("i",{class:"fas fa-search"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":se[1]||(se[1]=re=>f.value=re),placeholder:"Search FAQs..."},null,512),[[Y,f.value]])])])]),e("div",u2,[pe(M(Jt),{modelValue:F.value,"onUpdate:modelValue":se[2]||(se[2]=re=>F.value=re),handle:".drag-handle",onEnd:Ae,"item-key":"id"},{item:ve(({element:re})=>[e("div",c2,[se[18]||(se[18]=e("div",{class:"drag-handle"},[e("i",{class:"fas fa-grip-vertical"})],-1)),e("div",p2,[e("h3",null,r(re.question),1),e("p",null,r(J(re.answer,150)),1),e("div",v2,[e("span",m2,r(B(re.categoryId)),1),e("span",f2," Last updated: "+r(G(re.updatedAt)),1)])]),e("div",g2,[e("button",{class:"edit-btn",onClick:Ce=>ie.editFAQ(re)},se[16]||(se[16]=[e("i",{class:"fas fa-edit"},null,-1),E(" Edit ")]),8,y2),e("button",{class:"delete-btn",onClick:Ce=>fe(re)},se[17]||(se[17]=[e("i",{class:"fas fa-trash"},null,-1),E(" Delete ")]),8,b2)])])]),_:1},8,["modelValue"])]),F.value.length?N("",!0):(n(),d("div",h2,[se[20]||(se[20]=e("i",{class:"fas fa-question-circle"},null,-1)),se[21]||(se[21]=e("h3",null,"No FAQs Found",-1)),f.value||a.value?(n(),d("p",k2," Try adjusting your filters or search query ")):(n(),d("p",_2," Get started by adding your first FAQ ")),e("button",{class:"add-faq-btn",onClick:p},se[19]||(se[19]=[e("i",{class:"fas fa-plus"},null,-1),E(" Add FAQ ")]))]))]),m.value?(n(),de(Ue,{key:0,onClose:H,title:h.value?"Edit Category":"Add Category"},{default:ve(()=>[e("div",$2,[e("div",w2,[se[22]||(se[22]=e("label",null,"Category Name",-1)),O(e("input",{type:"text","onUpdate:modelValue":se[3]||(se[3]=re=>R.name=re),placeholder:"Enter category name"},null,512),[[Y,R.name]])]),e("div",C2,[se[23]||(se[23]=e("label",null,"Icon",-1)),e("div",P2,[(n(),d(te,null,ae(I,re=>e("button",{key:re,class:L(["icon-btn",{active:R.icon===re}]),onClick:Ce=>R.icon=re},[e("i",{class:L(re)},null,2)],10,A2)),64))])]),e("div",T2,[e("button",{class:"secondary-btn",onClick:H}," Cancel "),e("button",{class:"primary-btn",onClick:P,disabled:!R.name||!R.icon||M(t)},[M(t)?(n(),d("i",x2)):(n(),d("span",E2,r(h.value?"Update":"Add")+" Category",1))],8,S2)])])]),_:1},8,["title"])):N("",!0),$.value?(n(),de(Ue,{key:1,onClose:o,title:K.value?"Edit FAQ":"Add FAQ"},{default:ve(()=>[e("div",I2,[e("div",D2,[se[25]||(se[25]=e("label",null,"Category",-1)),O(e("select",{"onUpdate:modelValue":se[4]||(se[4]=re=>x.categoryId=re),class:L({"has-error":M(u).categoryId.$error})},[se[24]||(se[24]=e("option",{value:""},"Select category",-1)),(n(!0),d(te,null,ae(M(c),re=>(n(),d("option",{key:re.id,value:re.id},r(re.name),9,M2))),128))],2),[[ue,x.categoryId]]),M(u).categoryId.$error?(n(),d("span",N2,r(M(u).categoryId.$errors[0].$message),1)):N("",!0)]),e("div",F2,[se[26]||(se[26]=e("label",null,"Question",-1)),O(e("input",{type:"text","onUpdate:modelValue":se[5]||(se[5]=re=>x.question=re),class:L({"has-error":M(u).question.$error}),placeholder:"Enter question"},null,2),[[Y,x.question]]),M(u).question.$error?(n(),d("span",B2,r(M(u).question.$errors[0].$message),1)):N("",!0)]),e("div",U2,[se[27]||(se[27]=e("label",null,"Answer",-1)),O(e("textarea",{"onUpdate:modelValue":se[6]||(se[6]=re=>x.answer=re),class:L({"has-error":M(u).answer.$error}),placeholder:"Enter answer",rows:"6"},null,2),[[Y,x.answer]]),M(u).answer.$error?(n(),d("span",R2,r(M(u).answer.$errors[0].$message),1)):N("",!0)]),e("div",L2,[se[30]||(se[30]=e("label",null,"Related Links",-1)),(n(!0),d(te,null,ae(x.links,(re,Ce)=>(n(),d("div",{key:Ce,class:"link-item"},[e("div",O2,[O(e("input",{type:"text","onUpdate:modelValue":De=>re.text=De,placeholder:"Link text"},null,8,V2),[[Y,re.text]]),O(e("input",{type:"url","onUpdate:modelValue":De=>re.url=De,placeholder:"URL"},null,8,q2),[[Y,re.url]])]),e("button",{class:"remove-link",onClick:De=>j(Ce)},se[28]||(se[28]=[e("i",{class:"fas fa-times"},null,-1)]),8,j2)]))),128)),e("button",{class:"add-link-btn",onClick:q,type:"button"},se[29]||(se[29]=[e("i",{class:"fas fa-plus"},null,-1),E(" Add Link ")]))]),e("div",z2,[e("button",{class:"secondary-btn",onClick:o}," Cancel "),e("button",{class:"primary-btn",onClick:W,disabled:M(u).$invalid||M(t)},[M(t)?(n(),d("i",J2)):(n(),d("span",W2,r(K.value?"Update":"Add")+" FAQ",1))],8,G2)])])]),_:1},8,["title"])):N("",!0),T.value?(n(),de(Ie,{key:2,onConfirm:le,onCancel:be,title:U.value==="category"?"Delete Category":"Delete FAQ",message:z.value},null,8,["title","message"])):N("",!0)]))}},H2=ne(Q2,[["__scopeId","data-v-3bde023a"]]);const Y2={class:"settings-page"},Z2={class:"content-container"},K2={class:"settings-grid"},X2={class:"settings-card"},e$={class:"profile-picture-section"},t$={class:"profile-picture-container"},s$=["src"],a$={class:"profile-picture-overlay"},o$={class:"profile-picture-info"},n$={class:"form-row"},l$={class:"form-group"},i$={class:"input-group"},r$={key:0,class:"error-message"},d$={class:"form-group"},u$={class:"input-group"},c$={key:0,class:"error-message"},p$={class:"form-group"},v$={class:"input-group"},m$={key:0,class:"error-message"},f$={class:"form-group"},g$={class:"input-group"},y$={key:0,class:"error-message"},b$={class:"settings-card"},h$={class:"preferences-card"},k$={class:"preferences-section"},_$={class:"theme-toggle"},$$={class:"preferences-section"},w$={class:"notification-settings"},C$={class:"checkbox-group"},P$={class:"checkbox-label"},A$={class:"checkbox-label"},T$={class:"checkbox-label"},S$={class:"settings-card"},x$={class:"security-settings"},E$={class:"security-item"},I$={class:"security-info"},D$={key:0,class:"security-item"},M$={class:"input-group"},N$={key:0,class:"error-message"},F$={key:1,class:"security-item"},B$={class:"input-group"},U$={key:0,class:"error-message"},R$={key:2,class:"security-item"},L$={class:"security-info"},O$={key:3,class:"security-item"},V$={class:"security-info"},At="@/assets/default-profile.png",q$={__name:"SettingsManagement",setup(S){const s=_e(),{user:c,updateProfile:t,logout:i}=ye(),{success:v,error:w}=we(),{isLoading:k,withLoading:_}=Le(),{confirm:b}=dt(),{currentTheme:C,setTheme:A,isDarkMode:l}=He();ye();const{users:f}=xe(),a=g(!1),m=g(!1),$=g([]),T=g(null),{values:h,validateAll:K,handleBlur:U,isValid:D,getFieldError:R}=Ye({id:"",firstName:"",lastName:"",email:"",phone:"",email_verified_at:"",role:"",status:"",flag:"",password:"",confirmPassword:"",cpassword:"",notifications:{bookingUpdates:!0,reminders:!0,promotions:!1},twoFactorEnabled:!1});ee(()=>{var H;return(H=c.value)!=null&&H.lastPasswordChange?new Date(c.value.lastPasswordChange).toLocaleDateString():"Never"});const x=g(null);g(null);const y=g(null);g(null);const u=async H=>{const P=H.target.files[0];if(P){if(!["image/jpeg","image/png","image/webp"].includes(P.type)){await Z.fire({icon:"error",title:"Invalid file type",text:"Please select a JPG or PNG image",confirmButtonColor:"#3085d6"});return}if(P.size>2*1024*1024){await Z.fire({icon:"error",title:"File too large",text:"Please select an image under 2MB",confirmButtonColor:"#3085d6"});return}y.value=P,I()}},I=async()=>{var H,P;if(!y.value){Z.fire({icon:"error",title:"Error",text:"No image selected!",confirmButtonColor:"#3085d6"});return}try{Z.fire({title:"Uploading...",text:"Please wait",allowOutsideClick:!1,didOpen:()=>{Z.showLoading()}});const p=new FormData;p.append("avatar",y.value),p.append("id",h.value.id);const o=await oe.post("http://127.0.0.1:8000/api/change-avatar",p,{headers:{"Content-Type":"multipart/form-data"}});o.data.status===200&&(localStorage.setItem("user_info",JSON.stringify(o.data.data)),await Z.fire({icon:"success",title:"Success!",text:"Profile photo updated successfully",timer:1500,showConfirmButton:!1}),window.location.reload())}catch(p){console.error("Error uploading the image:",p),await Z.fire({icon:"error",title:"Error",text:((P=(H=p.response)==null?void 0:H.data)==null?void 0:P.message)||"Failed to upload profile photo",confirmButtonColor:"#3085d6"})}},F=async()=>{try{const H=JSON.parse(localStorage.getItem("user_info"));if(!H)throw new Error("User information not found");Z.fire({title:"Removing...",text:"Please wait",allowOutsideClick:!1,didOpen:()=>{Z.showLoading()}});const P=new FormData;if(P.append("id",H.id),P.append("first_name",H.first_name||""),P.append("last_name",H.last_name||""),P.append("email",H.email||""),P.append("phone_number",H.phone_number||""),P.append("role",H.role||"user"),P.append("status",H.status||"active"),P.append("flag",H.flag||"0"),P.append("remove_profile_picture","true"),response.data){H.profile_picture=null,localStorage.setItem("user_info",JSON.stringify(H)),x.value=At;const p=document.getElementById("profile-image");p&&(p.value=""),Z.fire({icon:"success",title:"Success!",text:"Profile photo removed successfully",timer:1500,showConfirmButton:!1}),window.location.reload()}}catch(H){console.error("Error removing profile picture:",H),Z.fire({icon:"error",title:"Error",text:"Failed to remove profile picture. Please try again."})}},z=async()=>{var H;try{Z.fire({title:"Saving Changes...",text:"Please wait",allowOutsideClick:!1,didOpen:()=>{Z.showLoading()}});const P=localStorage.getItem("auth_token");if(!P)throw new Error("Authentication token not found");const p=JSON.parse(localStorage.getItem("user_info")),o=new FormData;o.append("id",p.id),o.append("firstName",p.first_name||""),o.append("lastName",p.last_name||""),o.append("email",p.email||""),o.append("phone",p.phone_number||""),o.append("role",p.role||"user"),o.append("status",p.status||"active"),o.append("flag",p.flag||"0"),h.value.password&&h.value.password===h.value.cpassword&&o.append("password",h.value.password);const W=await oe.post("http://127.0.0.1:8000/api/update-user-info",o,{headers:{Authorization:`Bearer ${P}`,"Content-Type":"multipart/form-data",Accept:"application/json"}});if(W.data){const q={...JSON.parse(localStorage.getItem("user_info")),first_name:h.value.firstName,last_name:h.value.lastName,email:h.value.email,phone_number:h.value.phone};(H=W.data.user)!=null&&H.profile_picture&&(q.profile_picture=W.data.user.profile_picture),localStorage.setItem("user_info",JSON.stringify(q)),await Z.fire({icon:"success",title:"Success!",text:"Your profile has been updated successfully.",confirmButtonText:"OK"}),window.location.reload()}}catch(P){console.error("Error saving changes:",P),await Z.fire({icon:"error",title:"Error",text:"Failed to save changes. Please try again.",confirmButtonText:"OK"})}},V=async()=>{try{await b({title:h.value.twoFactorEnabled?"Disable 2FA":"Enable 2FA",message:h.value.twoFactorEnabled?"Are you sure you want to disable two-factor authentication? This will make your account less secure.":"Enable two-factor authentication to add an extra layer of security to your account.",confirmText:h.value.twoFactorEnabled?"Disable":"Enable",type:h.value.twoFactorEnabled?"danger":"warning"})&&(await _("toggle-2fa",()=>f.toggleTwoFactor(!h.value.twoFactorEnabled)),h.value.twoFactorEnabled=!h.value.twoFactorEnabled,v(`Two-factor authentication has been ${h.value.twoFactorEnabled?"enabled":"disabled"}`))}catch{w("Failed to update two-factor authentication")}},B=async()=>{},J=async H=>{try{await _(`revoke-session-${H}`,()=>f.revokeSession(H)),$.value=$.value.filter(P=>P.id!==H),v("Session revoked successfully")}catch{w("Failed to revoke session")}},G=async()=>{try{const H=await _("export-data",()=>f.exportData()),P=new Blob([JSON.stringify(H,null,2)],{type:"application/json"}),p=window.URL.createObjectURL(P),o=document.createElement("a");o.href=p,o.download="my-data.json",o.click(),window.URL.revokeObjectURL(p),v("Data exported successfully")}catch{w("Failed to export data")}},Q=()=>{const H=localStorage.getItem("user_info");if(!H){s.push("/login");return}const P=JSON.parse(H);h.value.id=P.id,h.value.firstName=P.first_name,h.value.lastName=P.last_name,h.value.email=P.email,h.value.phone=P.phone_number,h.value.avatar=P.avatar,P.profile_picture?x.value=P.profile_picture.startsWith("http")?P.profile_picture:`http://127.0.0.1:8000/storage/${P.profile_picture}`:x.value=At};return me(async()=>{Q()}),(H,P)=>(n(),de(Rt,null,{default:ve(()=>{var p;return[e("div",Y2,[e("div",Z2,[e("div",{class:"page-header"},[P[20]||(P[20]=e("h1",null,"Profile Settings",-1)),e("button",{type:"button",class:"save-btn",onClick:z},P[19]||(P[19]=[e("i",{class:"fas fa-save"},null,-1),E(" Save Changes ")]))]),e("div",K2,[e("div",X2,[P[32]||(P[32]=e("div",{class:"card-header"},[e("h2",null,"Personal Information")],-1)),e("div",e$,[e("div",t$,[e("img",{src:(p=M(h).avatar)!=null&&p.startsWith("images/")?`/src/assets/${M(h).avatar}`:`http://127.0.0.1:8000/storage/${M(h).avatar}`,alt:"Profile Picture",class:"profile-picture"},null,8,s$),e("div",a$,[P[21]||(P[21]=e("label",{for:"profile-image",class:"upload-button"},[e("i",{class:"fas fa-camera"}),e("span",null,"Change Photo")],-1)),e("input",{type:"file",id:"profile-image",accept:"image/*",onChange:u,class:"hidden-input"},null,32)])]),e("div",o$,[P[23]||(P[23]=e("p",{class:"upload-hint"},"Allowed formats: JPG, PNG. Max size: 2MB",-1)),M(h).avatar?(n(),d("button",{key:0,onClick:F,class:"remove-photo-btn"},P[22]||(P[22]=[e("i",{class:"fas fa-trash"},null,-1),E(" Remove Photo ")]))):N("",!0)])]),e("div",n$,[e("div",l$,[P[25]||(P[25]=e("label",{for:"firstName"},"First Name",-1)),e("div",i$,[P[24]||(P[24]=e("i",{class:"fas fa-user"},null,-1)),O(e("input",{type:"text",id:"firstName","onUpdate:modelValue":P[0]||(P[0]=o=>M(h).firstName=o),onBlur:P[1]||(P[1]=o=>M(U)("firstName")),class:L({error:M(R)("firstName")}),placeholder:"Enter first name"},null,34),[[Y,M(h).firstName]])]),M(R)("firstName")?(n(),d("span",r$,r(M(R)("firstName")),1)):N("",!0)]),e("div",d$,[P[27]||(P[27]=e("label",{for:"lastName"},"Last Name",-1)),e("div",u$,[P[26]||(P[26]=e("i",{class:"fas fa-user"},null,-1)),O(e("input",{type:"text",id:"lastName","onUpdate:modelValue":P[2]||(P[2]=o=>M(h).lastName=o),onBlur:P[3]||(P[3]=o=>M(U)("lastName")),class:L({error:M(R)("lastName")}),placeholder:"Enter last name"},null,34),[[Y,M(h).lastName]])]),M(R)("lastName")?(n(),d("span",c$,r(M(R)("lastName")),1)):N("",!0)])]),e("div",p$,[P[29]||(P[29]=e("label",{for:"email"},"Email",-1)),e("div",v$,[P[28]||(P[28]=e("i",{class:"fas fa-envelope"},null,-1)),O(e("input",{type:"email",id:"email","onUpdate:modelValue":P[4]||(P[4]=o=>M(h).email=o),onBlur:P[5]||(P[5]=o=>M(U)("email")),class:L({error:M(R)("email")}),placeholder:"Enter email"},null,34),[[Y,M(h).email]])]),M(R)("email")?(n(),d("span",m$,r(M(R)("email")),1)):N("",!0)]),e("div",f$,[P[31]||(P[31]=e("label",{for:"phone"},"Phone Number",-1)),e("div",g$,[P[30]||(P[30]=e("i",{class:"fas fa-phone"},null,-1)),O(e("input",{type:"tel",id:"phone","onUpdate:modelValue":P[6]||(P[6]=o=>M(h).phone=o),onBlur:P[7]||(P[7]=o=>M(U)("phone")),class:L({error:M(R)("phone")}),placeholder:"Enter phone number"},null,34),[[Y,M(h).phone]])]),M(R)("phone")?(n(),d("span",y$,r(M(R)("phone")),1)):N("",!0)])]),e("div",b$,[P[40]||(P[40]=e("div",{class:"card-header"},[e("h2",null,"Preferences")],-1)),e("div",h$,[e("div",k$,[P[35]||(P[35]=e("div",{class:"section-title"},"Theme",-1)),e("div",_$,[e("button",{class:L(["theme-btn",{active:!M(l)}]),onClick:P[8]||(P[8]=o=>M(A)("light"))},P[33]||(P[33]=[e("i",{class:"fas fa-sun"},null,-1),E(" Light ")]),2),e("button",{class:L(["theme-btn",{active:M(l)}]),onClick:P[9]||(P[9]=o=>M(A)("dark"))},P[34]||(P[34]=[e("i",{class:"fas fa-moon"},null,-1),E(" Dark ")]),2)])]),e("div",$$,[P[39]||(P[39]=e("div",{class:"section-title"},"Email Notifications",-1)),e("div",w$,[e("div",C$,[e("label",P$,[O(e("input",{type:"checkbox","onUpdate:modelValue":P[10]||(P[10]=o=>M(h).notifications.bookingUpdates=o)},null,512),[[$e,M(h).notifications.bookingUpdates]]),P[36]||(P[36]=E(" Booking updates "))]),e("label",A$,[O(e("input",{type:"checkbox","onUpdate:modelValue":P[11]||(P[11]=o=>M(h).notifications.reminders=o)},null,512),[[$e,M(h).notifications.reminders]]),P[37]||(P[37]=E(" Event reminders "))]),e("label",T$,[O(e("input",{type:"checkbox","onUpdate:modelValue":P[12]||(P[12]=o=>M(h).notifications.promotions=o)},null,512),[[$e,M(h).notifications.promotions]]),P[38]||(P[38]=E(" Promotions and news "))])])])])])]),e("div",S$,[P[49]||(P[49]=e("div",{class:"card-header"},[e("h2",null,"Security")],-1)),e("div",x$,[e("div",E$,[e("div",I$,[e("h3",null,r(a.value?"Security":"Password"),1),e("p",null,r(a.value?"":"Last Changed Password "+T.value),1)]),e("button",{class:"action-btn",onClick:P[13]||(P[13]=o=>a.value?a.value=!1:a.value=!0)},r(a.value?"Go to Change Password":"Go to Security"),1)]),a.value==!1?(n(),d("div",D$,[P[42]||(P[42]=e("div",{class:"security-info"},[e("h3",null,"New Password")],-1)),P[43]||(P[43]=e("br",null,null,-1)),e("div",M$,[P[41]||(P[41]=e("i",{class:"fas fa-lock"},null,-1)),O(e("input",{type:"password",id:"password","onUpdate:modelValue":P[14]||(P[14]=o=>M(h).password=o),onBlur:P[15]||(P[15]=o=>M(U)("password")),class:L({error:M(R)("password")}),placeholder:"Enter new password"},null,34),[[Y,M(h).password]])]),M(R)("password")?(n(),d("span",N$,r(M(R)("password")),1)):N("",!0)])):N("",!0),a.value==!1?(n(),d("div",F$,[P[45]||(P[45]=e("div",{class:"security-info"},[e("h3",null,"Confirm Password")],-1)),P[46]||(P[46]=e("br",null,null,-1)),e("div",B$,[P[44]||(P[44]=e("i",{class:"fas fa-lock"},null,-1)),O(e("input",{type:"password",id:"cpassword","onUpdate:modelValue":P[16]||(P[16]=o=>M(h).cpassword=o),onBlur:P[17]||(P[17]=o=>M(U)("cpassword")),class:L({error:M(R)("cpassword")}),placeholder:"Enter new password"},null,34),[[Y,M(h).cpassword]])]),M(R)("password")?(n(),d("span",U$,r(M(R)("password")),1)):N("",!0)])):N("",!0),a.value==!0?(n(),d("div",R$,[e("div",L$,[P[47]||(P[47]=e("h3",null,"Two-Factor Authentication",-1)),e("p",null,r(M(h).twoFactorEnabled?"Enabled":"Disabled"),1)]),e("button",{class:L(["action-btn",{"btn-danger":M(h).twoFactorEnabled}]),onClick:V},r(M(h).twoFactorEnabled?"Disable":"Enable"),3)])):N("",!0),a.value==!0?(n(),d("div",O$,[e("div",V$,[P[48]||(P[48]=e("h3",null,"Active Sessions",-1)),e("p",null,r($.value.length)+" devices",1)]),e("button",{class:"action-btn btn-danger",onClick:B}," Manage Sessionss ")])):N("",!0)])]),e("div",{class:"settings-card"},[P[51]||(P[51]=e("div",{class:"card-header"},[e("h2",null,"Account")],-1)),e("div",{class:"account-actions"},[e("div",{class:"action-item"},[P[50]||(P[50]=e("div",{class:"action-info"},[e("h3",null,"Export Data"),e("p",null,"Download a copy of system data and logs")],-1)),e("button",{class:"action-btn",onClick:G}," Export Data ")])])])])])]),m.value?(n(),de(Lt,{key:0,sessions:$.value,onClose:P[18]||(P[18]=o=>m.value=!1),onRevoke:J},null,8,["sessions"])):N("",!0)]}),_:1}))}},j$=ne(q$,[["__scopeId","data-v-f2fd7b46"]]);const z$={class:"modal-header"},G$={class:"modal-body"},J$={class:"form-group"},W$={class:"date-inputs"},Q$={class:"date-field"},H$=["max"],Y$={class:"date-field"},Z$=["min"],K$={class:"form-group"},X$={class:"format-options"},ew={class:"format-option"},tw={class:"format-option"},sw={class:"format-option"},aw={class:"form-group"},ow={class:"field-options"},nw={class:"field-option"},lw={class:"field-option"},iw={class:"field-option"},rw={class:"field-option"},dw={class:"field-option"},uw={class:"field-option"},cw={class:"modal-footer"},pw=["disabled"],vw={key:0,class:"fas fa-spinner fa-spin"},mw={__name:"ExportTransactionsModal",emits:["close"],setup(S,{emit:s}){const c=s,{get:t}=xe(),{showNotification:i}=we(),v=g(""),w=g(""),k=g("csv"),_=g(["transactionId","customerName","amount","method","status","date"]),b=g(!1),C=ee(()=>v.value&&w.value&&_.value.length>0),A=async()=>{try{b.value=!0;const l=await t("/analytics/payments/export",{params:{startDate:v.value,endDate:w.value,format:k.value,fields:_.value},responseType:"blob"}),f=window.URL.createObjectURL(new Blob([l.data])),a=document.createElement("a");a.href=f,a.setAttribute("download",`transactions_${v.value}_${w.value}.${k.value}`),document.body.appendChild(a),a.click(),a.remove(),i({type:"success",message:"Transactions exported successfully"}),c("close")}catch{i({type:"error",message:"Failed to export transactions"})}finally{b.value=!1}};return(l,f)=>(n(),d("div",{class:"modal-overlay",onClick:f[14]||(f[14]=a=>l.$emit("close"))},[e("div",{class:"modal-content",onClick:f[13]||(f[13]=ce(()=>{},["stop"]))},[e("div",z$,[f[16]||(f[16]=e("h2",null,"Export Transactions",-1)),e("button",{class:"close-btn",onClick:f[0]||(f[0]=a=>l.$emit("close"))},f[15]||(f[15]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",G$,[e("div",J$,[f[19]||(f[19]=e("label",null,"Date Range",-1)),e("div",W$,[e("div",Q$,[f[17]||(f[17]=e("label",null,"From",-1)),O(e("input",{type:"date","onUpdate:modelValue":f[1]||(f[1]=a=>v.value=a),max:w.value},null,8,H$),[[Y,v.value]])]),e("div",Y$,[f[18]||(f[18]=e("label",null,"To",-1)),O(e("input",{type:"date","onUpdate:modelValue":f[2]||(f[2]=a=>w.value=a),min:v.value},null,8,Z$),[[Y,w.value]])])])]),e("div",K$,[f[23]||(f[23]=e("label",null,"Export Format",-1)),e("div",X$,[e("label",ew,[O(e("input",{type:"radio","onUpdate:modelValue":f[3]||(f[3]=a=>k.value=a),value:"csv"},null,512),[[Fe,k.value]]),f[20]||(f[20]=e("span",{class:"format-label"},[e("i",{class:"fas fa-file-csv"}),E(" CSV ")],-1))]),e("label",tw,[O(e("input",{type:"radio","onUpdate:modelValue":f[4]||(f[4]=a=>k.value=a),value:"excel"},null,512),[[Fe,k.value]]),f[21]||(f[21]=e("span",{class:"format-label"},[e("i",{class:"fas fa-file-excel"}),E(" Excel ")],-1))]),e("label",sw,[O(e("input",{type:"radio","onUpdate:modelValue":f[5]||(f[5]=a=>k.value=a),value:"pdf"},null,512),[[Fe,k.value]]),f[22]||(f[22]=e("span",{class:"format-label"},[e("i",{class:"fas fa-file-pdf"}),E(" PDF ")],-1))])])]),e("div",aw,[f[30]||(f[30]=e("label",null,"Include Fields",-1)),e("div",ow,[e("label",nw,[O(e("input",{type:"checkbox","onUpdate:modelValue":f[6]||(f[6]=a=>_.value=a),value:"transactionId"},null,512),[[$e,_.value]]),f[24]||(f[24]=E(" Transaction ID "))]),e("label",lw,[O(e("input",{type:"checkbox","onUpdate:modelValue":f[7]||(f[7]=a=>_.value=a),value:"customerName"},null,512),[[$e,_.value]]),f[25]||(f[25]=E(" Customer Name "))]),e("label",iw,[O(e("input",{type:"checkbox","onUpdate:modelValue":f[8]||(f[8]=a=>_.value=a),value:"amount"},null,512),[[$e,_.value]]),f[26]||(f[26]=E(" Amount "))]),e("label",rw,[O(e("input",{type:"checkbox","onUpdate:modelValue":f[9]||(f[9]=a=>_.value=a),value:"method"},null,512),[[$e,_.value]]),f[27]||(f[27]=E(" Payment Method "))]),e("label",dw,[O(e("input",{type:"checkbox","onUpdate:modelValue":f[10]||(f[10]=a=>_.value=a),value:"status"},null,512),[[$e,_.value]]),f[28]||(f[28]=E(" Status "))]),e("label",uw,[O(e("input",{type:"checkbox","onUpdate:modelValue":f[11]||(f[11]=a=>_.value=a),value:"date"},null,512),[[$e,_.value]]),f[29]||(f[29]=E(" Date "))])])])]),e("div",cw,[e("button",{class:"btn-export",disabled:!C.value||b.value,onClick:A},[b.value?(n(),d("i",vw)):N("",!0),E(" "+r(b.value?"Exporting...":"Export"),1)],8,pw),e("button",{class:"btn-cancel",onClick:f[12]||(f[12]=a=>l.$emit("close"))},"Cancel")])])]))}},fw=ne(mw,[["__scopeId","data-v-f88fe287"]]);const gw={name:"TransactionsManagement",components:{Modal:Ue,ExportTransactionsModal:fw},setup(){const S=xe(),{showSuccess:s,showError:c}=we(),t=g([]),i=g({totalRevenue:0,totalTransactions:0,averageAmount:0}),v=g(1),w=g(1),k=g(null),_=g(!1),b=g({status:"",method:"",startDate:"",endDate:""}),C=g({amount:0,maxAmount:0,reason:""}),A=g(!1),l=ee(()=>C.value.amount>0&&C.value.amount<=C.value.maxAmount&&C.value.reason.trim().length>0),f=async()=>{try{const{data:R}=await S.get("/api/payments/transactions",{params:{page:v.value,...b.value}});t.value=R.transactions,w.value=R.totalPages}catch{c("Failed to load transactions")}},a=async()=>{try{const{data:R}=await S.get("/api/payments/stats/overview");i.value=R}catch{c("Failed to load statistics")}},m=R=>{v.value=R,f()},$=R=>{k.value=R},T=R=>{C.value={amount:R.amount,maxAmount:R.amount,reason:""},k.value=R,_.value=!0},h=async()=>{try{await S.post(`/api/payments/refund/${k.value.transactionId}`,{amount:C.value.amount,reason:C.value.reason}),s("Refund processed successfully"),_.value=!1,f()}catch{c("Failed to process refund")}},K=R=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(R),U=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=async R=>{try{const x=await S.get(`/api/payments/receipt/${R}`,{responseType:"blob"}),y=window.URL.createObjectURL(new Blob([x.data])),u=document.createElement("a");u.href=y,u.setAttribute("download",`receipt-${R}.pdf`),document.body.appendChild(u),u.click(),u.remove()}catch{c("Failed to download receipt")}};return me(()=>{f(),a()}),{transactions:t,stats:i,currentPage:v,totalPages:w,selectedTransaction:k,showingRefundModal:_,filters:b,refundForm:C,isValidRefund:l,loadTransactions:f,changePage:m,viewTransaction:$,showRefundModal:T,processRefund:h,formatCurrency:K,formatDate:U,showExportModal:A,downloadReceipt:D}}},yw={class:"transactions-management"},bw={class:"page-header"},hw={class:"stats-cards"},kw={class:"stat-card"},_w={class:"stat-card"},$w={class:"stat-card"},ww={class:"filters"},Cw={class:"filter-group"},Pw={class:"filter-group"},Aw={class:"filter-group"},Tw={class:"date-range"},Sw=["max"],xw=["min"],Ew={class:"table-container"},Iw=["onClick"],Dw=["onClick"],Mw={class:"pagination"},Nw=["disabled"],Fw=["disabled"],Bw={class:"transaction-details"},Uw={class:"detail-group"},Rw={class:"action-buttons"},Lw={class:"detail-group"},Ow={class:"detail-group"},Vw={key:0,class:"detail-group"},qw={class:"refund-form"},jw={class:"form-group"},zw=["max"],Gw={class:"form-group"},Jw={class:"form-actions"},Ww=["disabled"];function Qw(S,s,c,t,i,v){const w=ke("Modal"),k=ke("ExportTransactionsModal");return n(),d("div",yw,[e("header",bw,[s[20]||(s[20]=e("h1",null,"Transactions Management",-1)),e("button",{class:"export-btn",onClick:s[0]||(s[0]=_=>t.showExportModal=!0)},s[16]||(s[16]=[e("i",{class:"fas fa-download"},null,-1),E(" Export Transactions ")])),e("div",hw,[e("div",kw,[s[17]||(s[17]=e("h3",null,"Total Revenue",-1)),e("p",null,r(t.formatCurrency(t.stats.totalRevenue)),1)]),e("div",_w,[s[18]||(s[18]=e("h3",null,"Total Transactions",-1)),e("p",null,r(t.stats.totalTransactions),1)]),e("div",$w,[s[19]||(s[19]=e("h3",null,"Average Amount",-1)),e("p",null,r(t.formatCurrency(t.stats.averageAmount)),1)])])]),e("div",ww,[e("div",Cw,[s[22]||(s[22]=e("label",null,"Status",-1)),O(e("select",{"onUpdate:modelValue":s[1]||(s[1]=_=>t.filters.status=_)},s[21]||(s[21]=[he('<option value="" data-v-8c7b65ec>All</option><option value="pending" data-v-8c7b65ec>Pending</option><option value="completed" data-v-8c7b65ec>Completed</option><option value="failed" data-v-8c7b65ec>Failed</option><option value="refunded" data-v-8c7b65ec>Refunded</option>',5)]),512),[[ue,t.filters.status]])]),e("div",Pw,[s[24]||(s[24]=e("label",null,"Payment Method",-1)),O(e("select",{"onUpdate:modelValue":s[2]||(s[2]=_=>t.filters.method=_)},s[23]||(s[23]=[e("option",{value:""},"All",-1),e("option",{value:"stripe"},"Credit Card",-1),e("option",{value:"paypal"},"PayPal",-1)]),512),[[ue,t.filters.method]])]),e("div",Aw,[s[26]||(s[26]=e("label",null,"Date Range",-1)),e("div",Tw,[O(e("input",{type:"date","onUpdate:modelValue":s[3]||(s[3]=_=>t.filters.startDate=_),max:t.filters.endDate},null,8,Sw),[[Y,t.filters.startDate]]),s[25]||(s[25]=e("span",null,"to",-1)),O(e("input",{type:"date","onUpdate:modelValue":s[4]||(s[4]=_=>t.filters.endDate=_),min:t.filters.startDate},null,8,xw),[[Y,t.filters.endDate]])])]),e("button",{class:"apply-filters",onClick:s[5]||(s[5]=(..._)=>t.loadTransactions&&t.loadTransactions(..._))}," Apply Filters ")]),e("div",Ew,[e("table",null,[s[27]||(s[27]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Date"),e("th",null,"Customer"),e("th",null,"Amount"),e("th",null,"Method"),e("th",null,"Status"),e("th",null,"Actions")])],-1)),e("tbody",null,[(n(!0),d(te,null,ae(t.transactions,_=>(n(),d("tr",{key:_._id},[e("td",null,r(_.transactionId),1),e("td",null,r(t.formatDate(_.createdAt)),1),e("td",null,r(_.user.firstName)+" "+r(_.user.lastName),1),e("td",null,r(t.formatCurrency(_.amount)),1),e("td",null,[e("span",{class:L("method "+_.method)},r(_.method==="stripe"?"Credit Card":"PayPal"),3)]),e("td",null,[e("span",{class:L("status "+_.status)},r(_.statusDescription),3)]),e("td",null,[e("button",{class:"view-btn",onClick:b=>t.viewTransaction(_)}," View ",8,Iw),_.canBeRefunded?(n(),d("button",{key:0,class:"refund-btn",onClick:b=>t.showRefundModal(_)}," Refund ",8,Dw)):N("",!0)])]))),128))])])]),e("div",Mw,[e("button",{disabled:t.currentPage===1,onClick:s[6]||(s[6]=_=>t.changePage(t.currentPage-1))}," Previous ",8,Nw),e("span",null,"Page "+r(t.currentPage)+" of "+r(t.totalPages),1),e("button",{disabled:t.currentPage===t.totalPages,onClick:s[7]||(s[7]=_=>t.changePage(t.currentPage+1))}," Next ",8,Fw)]),t.selectedTransaction?(n(),de(w,{key:0,onClose:s[9]||(s[9]=_=>t.selectedTransaction=null),title:"Transaction Details"},{default:ve(()=>[e("div",Bw,[e("div",Uw,[s[34]||(s[34]=e("h3",null,"Transaction Information",-1)),e("p",null,[s[28]||(s[28]=e("strong",null,"ID:",-1)),E(" "+r(t.selectedTransaction.transactionId),1)]),e("p",null,[s[29]||(s[29]=e("strong",null,"Date:",-1)),E(" "+r(t.formatDate(t.selectedTransaction.createdAt)),1)]),e("p",null,[s[30]||(s[30]=e("strong",null,"Amount:",-1)),E(" "+r(t.formatCurrency(t.selectedTransaction.amount)),1)]),e("p",null,[s[31]||(s[31]=e("strong",null,"Status:",-1)),E(" "+r(t.selectedTransaction.statusDescription),1)]),e("p",null,[s[32]||(s[32]=e("strong",null,"Method:",-1)),E(" "+r(t.selectedTransaction.method==="stripe"?"Credit Card":"PayPal"),1)]),e("div",Rw,[e("button",{class:"download-btn",onClick:s[8]||(s[8]=_=>t.downloadReceipt(t.selectedTransaction.transactionId))},s[33]||(s[33]=[e("i",{class:"fas fa-download"},null,-1),E(" Download Receipt ")]))])]),e("div",Lw,[s[37]||(s[37]=e("h3",null,"Customer Information",-1)),e("p",null,[s[35]||(s[35]=e("strong",null,"Name:",-1)),E(" "+r(t.selectedTransaction.user.firstName)+" "+r(t.selectedTransaction.user.lastName),1)]),e("p",null,[s[36]||(s[36]=e("strong",null,"Email:",-1)),E(" "+r(t.selectedTransaction.user.email),1)])]),e("div",Ow,[s[41]||(s[41]=e("h3",null,"Booking Information",-1)),e("p",null,[s[38]||(s[38]=e("strong",null,"Event Type:",-1)),E(" "+r(t.selectedTransaction.booking.eventType),1)]),e("p",null,[s[39]||(s[39]=e("strong",null,"Event Date:",-1)),E(" "+r(t.formatDate(t.selectedTransaction.booking.eventDate)),1)]),e("p",null,[s[40]||(s[40]=e("strong",null,"Status:",-1)),E(" "+r(t.selectedTransaction.booking.status),1)])]),t.selectedTransaction.refund?(n(),d("div",Vw,[s[45]||(s[45]=e("h3",null,"Refund Information",-1)),e("p",null,[s[42]||(s[42]=e("strong",null,"Amount:",-1)),E(" "+r(t.formatCurrency(t.selectedTransaction.refund.amount)),1)]),e("p",null,[s[43]||(s[43]=e("strong",null,"Date:",-1)),E(" "+r(t.formatDate(t.selectedTransaction.refund.processedAt)),1)]),e("p",null,[s[44]||(s[44]=e("strong",null,"Reason:",-1)),E(" "+r(t.selectedTransaction.refund.reason),1)])])):N("",!0)])]),_:1})):N("",!0),t.showingRefundModal?(n(),de(w,{key:1,onClose:s[14]||(s[14]=_=>t.showingRefundModal=!1),title:"Process Refund"},{default:ve(()=>[e("div",qw,[e("div",jw,[s[46]||(s[46]=e("label",null,"Refund Amount",-1)),O(e("input",{type:"number","onUpdate:modelValue":s[10]||(s[10]=_=>t.refundForm.amount=_),max:t.refundForm.maxAmount,step:"0.01"},null,8,zw),[[Y,t.refundForm.amount]]),e("small",null,"Maximum amount: "+r(t.formatCurrency(t.refundForm.maxAmount)),1)]),e("div",Gw,[s[47]||(s[47]=e("label",null,"Reason for Refund",-1)),O(e("textarea",{"onUpdate:modelValue":s[11]||(s[11]=_=>t.refundForm.reason=_),rows:"3"},null,512),[[Y,t.refundForm.reason]])]),e("div",Jw,[e("button",{class:"cancel-btn",onClick:s[12]||(s[12]=_=>t.showingRefundModal=!1)}," Cancel "),e("button",{class:"confirm-btn",disabled:!t.isValidRefund,onClick:s[13]||(s[13]=(..._)=>t.processRefund&&t.processRefund(..._))}," Process Refund ",8,Ww)])])]),_:1})):N("",!0),t.showExportModal?(n(),de(k,{key:2,onClose:s[15]||(s[15]=_=>t.showExportModal=!1)})):N("",!0)])}const Hw=ne(gw,[["render",Qw],["__scopeId","data-v-8c7b65ec"]]);const Yw={class:"payment-analytics"},Zw={class:"analytics-header"},Kw={class:"date-filter"},Xw=["onClick"],e3={class:"analytics-grid"},t3={class:"overview-cards"},s3={class:"card total-revenue"},a3={class:"card-content"},o3={class:"amount"},n3={class:"card successful-payments"},l3={class:"card-content"},i3={class:"amount"},r3={class:"success-rate"},d3={class:"card pending-payments"},u3={class:"card-content"},c3={class:"amount"},p3={class:"pending-amount"},v3={class:"card average-booking"},m3={class:"card-content"},f3={class:"amount"},g3={class:"charts-container"},y3={class:"chart revenue-chart"},b3={class:"chart payment-methods-chart"},h3={class:"recent-transactions"},k3={class:"table-container"},_3={__name:"PaymentAnalytics",setup(S){const{get:s}=xe(),{showNotification:c}=we(),t=g(null),i=g(null),v=g("month"),w=g(0),k=g(0),_=g(0),b=g(0),C=g(0),A=g(0),l=g(0),f=g([]),a=[{label:"7 Days",value:"week"},{label:"30 Days",value:"month"},{label:"90 Days",value:"quarter"},{label:"Year",value:"year"}];let m=null,$=null;const T=x=>x.toLocaleString("en-PH"),h=x=>new Date(x).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}),K=async()=>{try{const y=(await s(`/analytics/payments?period=${v.value}`)).data;w.value=y.totalRevenue,k.value=y.revenueGrowth,_.value=y.successfulPayments,b.value=y.pendingPayments,C.value=y.pendingAmount,A.value=y.averageBookingValue,l.value=y.successRate,f.value=y.recentTransactions,U(y.revenueTrend),D(y.paymentMethods)}catch{c({type:"error",message:"Failed to fetch analytics data"})}},U=x=>{m&&m.destroy();const y=t.value.getContext("2d");m=new Be(y,{type:"line",data:{labels:x.labels,datasets:[{label:"Revenue",data:x.values,borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:u=>"₱"+u.toLocaleString()}}}}})},D=x=>{$&&$.destroy();const y=i.value.getContext("2d");$=new Be(y,{type:"doughnut",data:{labels:x.labels,datasets:[{data:x.values,backgroundColor:["#4CAF50","#2196F3","#FFC107","#9C27B0"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})},R=async()=>{try{const x=await s("/analytics/payments/export",{responseType:"blob"}),y=window.URL.createObjectURL(new Blob([x.data])),u=document.createElement("a");u.href=y,u.setAttribute("download",`transactions-${v.value}.csv`),document.body.appendChild(u),u.click(),u.remove()}catch{c({type:"error",message:"Failed to export transactions"})}};return Pe(v,()=>{K()}),me(()=>{K()}),(x,y)=>(n(),d("div",Yw,[e("div",Zw,[y[0]||(y[0]=e("h1",null,"Payment Analytics",-1)),e("div",Kw,[(n(),d(te,null,ae(a,u=>e("button",{key:u.value,class:L(["filter-btn",{active:v.value===u.value}]),onClick:I=>v.value=u.value},r(u.label),11,Xw)),64))])]),e("div",e3,[e("div",t3,[e("div",s3,[y[2]||(y[2]=e("div",{class:"card-icon"},[e("i",{class:"fas fa-money-bill-wave"})],-1)),e("div",a3,[y[1]||(y[1]=e("h3",null,"Total Revenue",-1)),e("p",o3,"₱"+r(T(w.value)),1),e("p",{class:L(["trend",{up:k.value>0}])},[e("i",{class:L(k.value>0?"fas fa-arrow-up":"fas fa-arrow-down")},null,2),E(" "+r(Math.abs(k.value))+"% from last period ",1)],2)])]),e("div",n3,[y[4]||(y[4]=e("div",{class:"card-icon"},[e("i",{class:"fas fa-check-circle"})],-1)),e("div",l3,[y[3]||(y[3]=e("h3",null,"Successful Payments",-1)),e("p",i3,r(_.value),1),e("p",r3,r(l.value)+"% success rate",1)])]),e("div",d3,[y[6]||(y[6]=e("div",{class:"card-icon"},[e("i",{class:"fas fa-clock"})],-1)),e("div",u3,[y[5]||(y[5]=e("h3",null,"Pending Payments",-1)),e("p",c3,r(b.value),1),e("p",p3,"₱"+r(T(C.value)),1)])]),e("div",v3,[y[8]||(y[8]=e("div",{class:"card-icon"},[e("i",{class:"fas fa-chart-line"})],-1)),e("div",m3,[y[7]||(y[7]=e("h3",null,"Average Booking Value",-1)),e("p",f3,"₱"+r(T(A.value)),1)])])]),e("div",g3,[e("div",y3,[y[9]||(y[9]=e("h3",null,"Revenue Trend",-1)),e("canvas",{ref_key:"revenueChartRef",ref:t},null,512)]),e("div",b3,[y[10]||(y[10]=e("h3",null,"Payment Methods Distribution",-1)),e("canvas",{ref_key:"methodsChartRef",ref:i},null,512)])]),e("div",h3,[e("div",{class:"table-header"},[y[12]||(y[12]=e("h3",null,"Recent Transactions",-1)),e("button",{class:"export-btn",onClick:R},y[11]||(y[11]=[e("i",{class:"fas fa-download"},null,-1),E(" Export ")]))]),e("div",k3,[e("table",null,[y[13]||(y[13]=e("thead",null,[e("tr",null,[e("th",null,"Transaction ID"),e("th",null,"Customer"),e("th",null,"Amount"),e("th",null,"Method"),e("th",null,"Status"),e("th",null,"Date")])],-1)),e("tbody",null,[(n(!0),d(te,null,ae(f.value,u=>(n(),d("tr",{key:u.id},[e("td",null,r(u.id),1),e("td",null,r(u.customerName),1),e("td",null,"₱"+r(T(u.amount)),1),e("td",null,[e("span",{class:L(["payment-method",u.method])},r(u.method),3)]),e("td",null,[e("span",{class:L(["status",u.status])},r(u.status),3)]),e("td",null,r(h(u.date)),1)]))),128))])])])])])]))}},$3=ne(_3,[["__scopeId","data-v-eef35096"]]);const w3={name:"LoadingAnimation",props:{showSuccess:Boolean}},C3={class:"loading-container"},P3={key:0,class:"loading-squares"},A3={key:1,class:"success-message"};function T3(S,s,c,t,i,v){return n(),d("div",C3,[c.showSuccess?(n(),d("div",A3,s[0]||(s[0]=[e("span",{class:"checkmark"},"✓",-1),E(" Successfully Added! ")]))):(n(),d("div",P3,[(n(),d(te,null,ae(5,w=>e("div",{key:w,class:"loading-square",style:Je({animationDelay:`${w*.1}s`})},null,4)),64))]))])}const mt=ne(w3,[["render",T3],["__scopeId","data-v-8da555a3"]]);const S3={name:"TransferChatModal",components:{LoadingAnimation:mt},props:{chat:{type:Object,required:!0}},setup(S,{emit:s}){const{showNotification:c}=we(),t=g(!0),i=g(!1),v=g([]),w=g(null),k=g(""),_=g(""),b=ee(()=>{if(!k.value)return v.value;const $=k.value.toLowerCase();return v.value.filter(T=>T.name.toLowerCase().includes($)||T.email.toLowerCase().includes($))}),C=ee(()=>w.value&&!i.value),A=async()=>{try{const T=await(await fetch("/api/agents/available")).json();v.value=T.agents.filter(h=>{var K;return h._id!==((K=S.chat.agent)==null?void 0:K._id)})}catch{c("Error loading agents","error")}finally{t.value=!1}},l=$=>{w.value=$},f=$=>{if(!$)return"N/A";const T=Math.floor($/6e4);return T<1?"< 1 min":`${T} min`},a=async()=>{if(C.value){i.value=!0;try{if(!(await fetch(`/api/chat/${S.chat._id}/transfer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newAgentId:w.value._id,note:_.value})})).ok)throw new Error("Transfer failed");c("Chat transferred successfully","success"),s("transfer",{agent:w.value,note:_.value}),m()}catch{c("Failed to transfer chat","error")}finally{i.value=!1}}},m=()=>{s("close")};return me(A),{loading:t,transferring:i,agents:v,selectedAgent:w,searchQuery:k,transferNote:_,filteredAgents:b,canTransfer:C,selectAgent:l,formatResponseTime:f,transfer:a,close:m}}},x3={class:"modal-header"},E3={class:"modal-body"},I3={key:0,class:"loading-state"},D3={class:"search-container"},M3={class:"agents-list"},N3={key:0,class:"no-results"},F3=["onClick"],B3=["src","alt"],U3={class:"agent-info"},R3={class:"agent-stats"},L3={class:"stat"},O3={class:"stat-value"},V3={class:"stat"},q3={class:"stat-value"},j3={class:"transfer-note"},z3={class:"modal-footer"},G3=["disabled"];function J3(S,s,c,t,i,v){const w=ke("LoadingAnimation");return n(),d("div",{class:"modal-overlay",onClick:s[6]||(s[6]=(...k)=>t.close&&t.close(...k))},[e("div",{class:"modal-container",onClick:s[5]||(s[5]=ce(()=>{},["stop"]))},[e("div",x3,[s[8]||(s[8]=e("h3",null,"Transfer Chat",-1)),e("button",{onClick:s[0]||(s[0]=(...k)=>t.close&&t.close(...k)),class:"close-btn"},s[7]||(s[7]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",E3,[t.loading?(n(),d("div",I3,[pe(w)])):(n(),d(te,{key:1},[e("div",D3,[O(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=k=>t.searchQuery=k),placeholder:"Search agents...",class:"search-input"},null,512),[[Y,t.searchQuery]])]),e("div",M3,[t.filteredAgents.length===0?(n(),d("div",N3," No agents found ")):N("",!0),(n(!0),d(te,null,ae(t.filteredAgents,k=>{var _;return n(),d("button",{key:k._id,onClick:b=>t.selectAgent(k),class:L(["agent-item",{selected:((_=t.selectedAgent)==null?void 0:_._id)===k._id}])},[e("img",{src:k.avatar,alt:k.name,class:"agent-avatar"},null,8,B3),e("div",U3,[e("h4",null,r(k.name),1),e("span",{class:L(["status",{online:k.isOnline}])},r(k.isOnline?"Online":"Offline"),3)]),e("div",R3,[e("div",L3,[s[9]||(s[9]=e("span",{class:"stat-label"},"Active Chats:",-1)),e("span",O3,r(k.activeChats),1)]),e("div",V3,[s[10]||(s[10]=e("span",{class:"stat-label"},"Avg. Response:",-1)),e("span",q3,r(t.formatResponseTime(k.avgResponseTime)),1)])])],10,F3)}),128))]),e("div",j3,[s[11]||(s[11]=e("label",{for:"transferNote"},"Transfer Note (optional):",-1)),O(e("textarea",{id:"transferNote","onUpdate:modelValue":s[2]||(s[2]=k=>t.transferNote=k),placeholder:"Add a note for the new agent...",rows:"3"},null,512),[[Y,t.transferNote]])])],64))]),e("div",z3,[e("button",{onClick:s[3]||(s[3]=(...k)=>t.close&&t.close(...k)),class:"cancel-btn"}," Cancel "),e("button",{onClick:s[4]||(s[4]=(...k)=>t.transfer&&t.transfer(...k)),disabled:!t.canTransfer||t.transferring,class:"transfer-btn"},r(t.transferring?"Transferring...":"Transfer Chat"),9,G3)])])])}const W3=ne(S3,[["render",J3],["__scopeId","data-v-1b98922d"]]);const Q3={name:"CloseChatModal",emits:["close","confirm"],setup(S,{emit:s}){const c=g(""),t=g(""),i=g(""),v=g(!0),w=g(!1),k=ee(()=>!(!c.value||c.value==="other"&&!t.value.trim()));return{selectedReason:c,customReason:t,resolutionNote:i,requestFeedback:v,closing:w,canClose:k,close:()=>{s("close")},confirm:()=>{if(!k.value||w.value)return;w.value=!0;const C=c.value==="other"?t.value:c.value;s("confirm",{reason:C,resolutionNote:i.value,requestFeedback:v.value})}}}},H3={class:"modal-header"},Y3={class:"modal-body"},Z3={class:"reason-section"},K3={key:0,class:"custom-reason"},X3={class:"resolution-note"},eC={class:"feedback-prompt"},tC={class:"feedback-label"},sC={class:"modal-footer"},aC=["disabled"];function oC(S,s,c,t,i,v){return n(),d("div",{class:"modal-overlay",onClick:s[8]||(s[8]=(...w)=>t.close&&t.close(...w))},[e("div",{class:"modal-container",onClick:s[7]||(s[7]=ce(()=>{},["stop"]))},[e("div",H3,[s[10]||(s[10]=e("h3",null,"Close Chat",-1)),e("button",{onClick:s[0]||(s[0]=(...w)=>t.close&&t.close(...w)),class:"close-btn"},s[9]||(s[9]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Y3,[s[16]||(s[16]=e("p",{class:"confirmation-text"}," Are you sure you want to close this chat? This action cannot be undone. ",-1)),e("div",Z3,[s[12]||(s[12]=e("label",{for:"closeReason"},"Close Reason:",-1)),O(e("select",{id:"closeReason","onUpdate:modelValue":s[1]||(s[1]=w=>t.selectedReason=w),class:"reason-select"},s[11]||(s[11]=[he('<option value="" data-v-a7b9f07b>Select a reason</option><option value="resolved" data-v-a7b9f07b>Issue Resolved</option><option value="customer_request" data-v-a7b9f07b>Customer Request</option><option value="inactive" data-v-a7b9f07b>Customer Inactive</option><option value="duplicate" data-v-a7b9f07b>Duplicate Chat</option><option value="other" data-v-a7b9f07b>Other</option>',6)]),512),[[ue,t.selectedReason]])]),t.selectedReason==="other"?(n(),d("div",K3,[s[13]||(s[13]=e("label",{for:"customReason"},"Specify Reason:",-1)),O(e("textarea",{id:"customReason","onUpdate:modelValue":s[2]||(s[2]=w=>t.customReason=w),placeholder:"Enter the reason for closing the chat...",rows:"3",class:"custom-reason-input"},null,512),[[Y,t.customReason]])])):N("",!0),e("div",X3,[s[14]||(s[14]=e("label",{for:"resolutionNote"},"Resolution Note (optional):",-1)),O(e("textarea",{id:"resolutionNote","onUpdate:modelValue":s[3]||(s[3]=w=>t.resolutionNote=w),placeholder:"Add any notes about how the issue was resolved...",rows:"3",class:"resolution-note-input"},null,512),[[Y,t.resolutionNote]])]),e("div",eC,[e("label",tC,[O(e("input",{type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=w=>t.requestFeedback=w),class:"feedback-checkbox"},null,512),[[$e,t.requestFeedback]]),s[15]||(s[15]=E(" Request customer feedback "))])])]),e("div",sC,[e("button",{onClick:s[5]||(s[5]=(...w)=>t.close&&t.close(...w)),class:"cancel-btn"}," Cancel "),e("button",{onClick:s[6]||(s[6]=(...w)=>t.confirm&&t.confirm(...w)),disabled:!t.canClose||t.closing,class:"close-chat-btn"},r(t.closing?"Closing...":"Close Chat"),9,aC)])])])}const nC=ne(Q3,[["render",oC],["__scopeId","data-v-a7b9f07b"]]);const lC={name:"ChatManagement",components:{LoadingAnimation:mt,TransferChatModal:W3,CloseChatModal:nC},setup(){const S=_e(),{showNotification:s}=we(),c=g(!0),t=g([]),i=g({activeChats:0,activeChatsChange:0,avgResponseTime:0,responseTimeChange:0,satisfaction:0,satisfactionChange:0,resolutionRate:0,resolutionRateChange:0}),v=g(""),w=g(""),k=g(""),_=g(""),b=g(1),C=12,A=g(!1),l=g(!1),f=g(null),a=ee(()=>{let Q=t.value;if(v.value&&(Q=Q.filter(H=>H.status===v.value)),w.value&&(Q=Q.filter(H=>H.category===w.value)),k.value&&(Q=Q.filter(H=>H.priority===k.value)),_.value){const H=_.value.toLowerCase();Q=Q.filter(P=>P.customer.name.toLowerCase().includes(H)||P.customer.email.toLowerCase().includes(H)||P.subject.toLowerCase().includes(H)||P.agent&&P.agent.name.toLowerCase().includes(H))}return Q}),m=ee(()=>Math.ceil(a.value.length/C)),$=ee(()=>{const Q=(b.value-1)*C,H=Q+C;return a.value.slice(Q,H)}),T=async()=>{try{const H=await(await fetch("/api/chats")).json();t.value=H.chats}catch{s("Error loading chats","error")}finally{c.value=!1}},h=async()=>{try{const H=await(await fetch("/api/chats/stats")).json();i.value=H.stats}catch{s("Error loading statistics","error")}},K=Q=>{S.push(`/admin/chats/${Q._id}`)},U=async Q=>{try{if(!(await fetch(`/api/chats/${Q._id}/assign`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to assign agent");s("Agent assigned successfully","success"),await T()}catch{s("Error assigning agent","error")}},D=Q=>{f.value=Q,A.value=!0},R=async Q=>{try{if(!(await fetch(`/api/chats/${f.value._id}/transfer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)})).ok)throw new Error("Failed to transfer chat");s("Chat transferred successfully","success"),A.value=!1,await T()}catch{s("Error transferring chat","error")}},x=Q=>{f.value=Q,l.value=!0},y=async Q=>{try{if(!(await fetch(`/api/chats/${f.value._id}/close`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)})).ok)throw new Error("Failed to close chat");s("Chat closed successfully","success"),l.value=!1,await T()}catch{s("Error closing chat","error")}},u=async()=>{try{const H=await(await fetch("/api/chats/export")).blob(),P=window.URL.createObjectURL(H),p=document.createElement("a");p.href=P,p.download=`chats-export-${new Date().toISOString()}.csv`,document.body.appendChild(p),p.click(),window.URL.revokeObjectURL(P),document.body.removeChild(p)}catch{s("Error exporting chats","error")}},I=()=>{b.value>1&&b.value--},F=()=>{b.value<m.value&&b.value++},z=Q=>new Date(Q).toLocaleString(),V=Q=>{const H=Math.floor(Q/6e4);return H<1?"< 1 min":`${H} min`},B=Q=>Q.toFixed(1),J=Q=>`${(Q*100).toFixed(1)}%`,G=Q=>`${Q>0?"+":""}${Q.toFixed(1)}%`;return Pe([v,w,k,_],()=>{b.value=1}),me(()=>{T(),h()}),{loading:c,chats:t,stats:i,statusFilter:v,categoryFilter:w,priorityFilter:k,searchQuery:_,currentPage:b,totalPages:m,showTransferModal:A,showCloseModal:l,selectedChat:f,filteredChats:a,paginatedChats:$,viewChat:K,assignAgent:U,transferChat:D,handleTransfer:R,closeChat:x,handleClose:y,exportChats:u,prevPage:I,nextPage:F,formatDate:z,formatTime:V,formatRating:B,formatPercentage:J,formatTrend:G}}},iC={class:"chat-management"},rC={class:"header"},dC={class:"header-actions"},uC={class:"filters"},cC={class:"search-container"},pC={class:"stats-cards"},vC={class:"stat-card"},mC={class:"stat-value"},fC={class:"stat-card"},gC={class:"stat-value"},yC={class:"stat-card"},bC={class:"stat-value"},hC={class:"stat-card"},kC={class:"stat-value"},_C={class:"chats-container"},$C={class:"chats-header"},wC={key:0,class:"loading-state"},CC={key:1,class:"no-results"},PC={key:2,class:"chats-grid"},AC={class:"chat-header"},TC={class:"customer-info"},SC=["src","alt"],xC={class:"info"},EC={class:"email"},IC={class:"chat-meta"},DC={class:"chat-content"},MC={class:"subject"},NC={class:"category"},FC={class:"last-message"},BC={class:"chat-footer"},UC={key:0,class:"agent-info"},RC=["src","alt"],LC={class:"timestamps"},OC={class:"chat-actions"},VC=["onClick"],qC=["onClick","disabled"],jC=["onClick"],zC=["onClick"],GC={class:"pagination"},JC=["disabled"],WC={class:"page-info"},QC=["disabled"];function HC(S,s,c,t,i,v){const w=ke("LoadingAnimation"),k=ke("TransferChatModal"),_=ke("CloseChatModal");return n(),d("div",iC,[e("div",rC,[s[12]||(s[12]=e("h1",null,"Chat Management",-1)),e("div",dC,[e("div",uC,[O(e("select",{"onUpdate:modelValue":s[0]||(s[0]=b=>t.statusFilter=b),class:"filter-select"},s[9]||(s[9]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"closed"},"Closed",-1)]),512),[[ue,t.statusFilter]]),O(e("select",{"onUpdate:modelValue":s[1]||(s[1]=b=>t.categoryFilter=b),class:"filter-select"},s[10]||(s[10]=[he('<option value="" data-v-3b7d073e>All Categories</option><option value="general" data-v-3b7d073e>General</option><option value="booking" data-v-3b7d073e>Booking</option><option value="support" data-v-3b7d073e>Support</option><option value="feedback" data-v-3b7d073e>Feedback</option>',5)]),512),[[ue,t.categoryFilter]]),O(e("select",{"onUpdate:modelValue":s[2]||(s[2]=b=>t.priorityFilter=b),class:"filter-select"},s[11]||(s[11]=[e("option",{value:""},"All Priorities",-1),e("option",{value:"low"},"Low",-1),e("option",{value:"medium"},"Medium",-1),e("option",{value:"high"},"High",-1)]),512),[[ue,t.priorityFilter]])]),e("div",cC,[O(e("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=b=>t.searchQuery=b),placeholder:"Search chats...",class:"search-input"},null,512),[[Y,t.searchQuery]])])])]),e("div",pC,[e("div",vC,[s[13]||(s[13]=e("h3",null,"Active Chats",-1)),e("div",mC,r(t.stats.activeChats),1),e("div",{class:L(["stat-trend",{up:t.stats.activeChatsChange>0}])},r(t.formatTrend(t.stats.activeChatsChange)),3)]),e("div",fC,[s[14]||(s[14]=e("h3",null,"Avg Response Time",-1)),e("div",gC,r(t.formatTime(t.stats.avgResponseTime)),1),e("div",{class:L(["stat-trend",{up:t.stats.responseTimeChange>0}])},r(t.formatTrend(t.stats.responseTimeChange)),3)]),e("div",yC,[s[15]||(s[15]=e("h3",null,"Customer Satisfaction",-1)),e("div",bC,r(t.formatRating(t.stats.satisfaction)),1),e("div",{class:L(["stat-trend",{up:t.stats.satisfactionChange>0}])},r(t.formatTrend(t.stats.satisfactionChange)),3)]),e("div",hC,[s[16]||(s[16]=e("h3",null,"Resolution Rate",-1)),e("div",kC,r(t.formatPercentage(t.stats.resolutionRate)),1),e("div",{class:L(["stat-trend",{up:t.stats.resolutionRateChange>0}])},r(t.formatTrend(t.stats.resolutionRateChange)),3)])]),e("div",_C,[e("div",$C,[s[18]||(s[18]=e("h2",null,"Chat Sessions",-1)),e("button",{onClick:s[4]||(s[4]=(...b)=>t.exportChats&&t.exportChats(...b)),class:"export-btn"},s[17]||(s[17]=[e("i",{class:"fas fa-download"},null,-1),E(" Export Data ")]))]),t.loading?(n(),d("div",wC,[pe(w)])):t.filteredChats.length===0?(n(),d("div",CC," No chats found matching your criteria ")):(n(),d("div",PC,[(n(!0),d(te,null,ae(t.filteredChats,b=>{var C;return n(),d("div",{key:b._id,class:"chat-card"},[e("div",AC,[e("div",TC,[e("img",{src:b.customer.avatar,alt:b.customer.name,class:"avatar"},null,8,SC),e("div",xC,[e("h4",null,r(b.customer.name),1),e("span",EC,r(b.customer.email),1)])]),e("div",IC,[e("span",{class:L(["status-badge",b.status])},r(b.status),3),e("span",{class:L(["priority-badge",b.priority])},r(b.priority),3)])]),e("div",DC,[e("div",MC,r(b.subject),1),e("div",NC,r(b.category),1),e("div",FC,r(((C=b.lastMessage)==null?void 0:C.content)||"No messages yet"),1)]),e("div",BC,[b.agent?(n(),d("div",UC,[e("img",{src:b.agent.avatar,alt:b.agent.name,class:"avatar small"},null,8,RC),e("span",null,r(b.agent.name),1)])):N("",!0),e("div",LC,[e("span",null,"Started: "+r(t.formatDate(b.createdAt)),1),e("span",null,"Last Activity: "+r(t.formatDate(b.lastActivity)),1)])]),e("div",OC,[e("button",{onClick:A=>t.viewChat(b),class:"action-btn primary"}," View Chat ",8,VC),b.status!=="closed"?(n(),d("button",{key:0,onClick:A=>t.assignAgent(b),class:"action-btn",disabled:b.agent},r(b.agent?"Assigned":"Assign Agent"),9,qC)):N("",!0),b.status==="active"?(n(),d("button",{key:1,onClick:A=>t.transferChat(b),class:"action-btn"}," Transfer ",8,jC)):N("",!0),b.status!=="closed"?(n(),d("button",{key:2,onClick:A=>t.closeChat(b),class:"action-btn danger"}," Close ",8,zC)):N("",!0)])])}),128))])),e("div",GC,[e("button",{onClick:s[5]||(s[5]=(...b)=>t.prevPage&&t.prevPage(...b)),disabled:t.currentPage===1,class:"page-btn"},s[19]||(s[19]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,JC),e("span",WC," Page "+r(t.currentPage)+" of "+r(t.totalPages),1),e("button",{onClick:s[6]||(s[6]=(...b)=>t.nextPage&&t.nextPage(...b)),disabled:t.currentPage===t.totalPages,class:"page-btn"},s[20]||(s[20]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,QC)])]),t.showTransferModal?(n(),de(k,{key:0,chat:t.selectedChat,onClose:s[7]||(s[7]=b=>t.showTransferModal=!1),onTransfer:t.handleTransfer},null,8,["chat","onTransfer"])):N("",!0),t.showCloseModal?(n(),de(_,{key:1,onClose:s[8]||(s[8]=b=>t.showCloseModal=!1),onConfirm:t.handleClose},null,8,["onConfirm"])):N("",!0)])}const YC=ne(lC,[["render",HC],["__scopeId","data-v-3b7d073e"]]);const ZC={class:"chat-header"},KC={class:"user-info"},XC=["src","alt"],e4={class:"user-details"},t4={class:"last-active"},s4={class:"chat-actions"},a4={class:"chat-preview"},o4={class:"last-message"},n4={class:"chat-meta"},l4={class:"message-time"},i4={key:0,class:"unread-badge"},r4={key:0,class:"modal-container"},d4={class:"modal-content"},u4={class:"modal-body"},c4={class:"form-group"},p4=["value"],v4={class:"form-group"},m4={class:"modal-footer"},f4=["disabled"],g4={key:1,class:"modal-container"},y4={class:"modal-content"},b4={class:"modal-body"},h4={class:"form-group"},k4={class:"modal-footer"},_4={__name:"AdminChatCard",props:{chat:{type:Object,required:!0},isActive:{type:Boolean,default:!1},staffMembers:{type:Array,default:()=>[]}},emits:["transfer","close"],setup(S,{emit:s}){const c=S,t=s,i=g(!1),v=g(!1),w=g(""),k=g(""),_=g(""),b=f=>f?Qt(new Date(f),{addSuffix:!0}):"Never",C=f=>f?new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",A=async()=>{w.value&&(t("transfer",{chatId:c.chat.id,staffId:w.value,note:k.value}),i.value=!1,w.value="",k.value="")},l=async()=>{t("close",{chatId:c.chat.id,note:_.value}),v.value=!1,_.value=""};return(f,a)=>{var m;return n(),d("div",{class:L(["chat-card",{active:S.isActive}])},[e("div",ZC,[e("div",KC,[e("img",{src:S.chat.user.avatar||M(ut),alt:S.chat.user.name,class:"user-avatar"},null,8,XC),e("div",e4,[e("h3",null,r(S.chat.user.name),1),e("span",t4,r(b(S.chat.last_message_at)),1)])]),e("div",s4,[S.chat.status!=="closed"?(n(),d("button",{key:0,onClick:a[0]||(a[0]=ce($=>i.value=!0,["stop"])),class:"action-btn transfer",title:"Transfer Chat"},a[9]||(a[9]=[e("i",{class:"fas fa-exchange-alt"},null,-1)]))):N("",!0),S.chat.status!=="closed"?(n(),d("button",{key:1,onClick:a[1]||(a[1]=ce($=>v.value=!0,["stop"])),class:"action-btn close",title:"Close Chat"},a[10]||(a[10]=[e("i",{class:"fas fa-times"},null,-1)]))):N("",!0)])]),e("div",a4,[e("p",o4,r(((m=S.chat.last_message)==null?void 0:m.content)||"No messages yet"),1),e("div",n4,[e("span",l4,r(C(S.chat.last_message_at)),1),S.chat.unread_count?(n(),d("span",i4,r(S.chat.unread_count),1)):N("",!0)])]),i.value?(n(),d("div",r4,[e("div",{class:"modal-backdrop",onClick:a[2]||(a[2]=$=>i.value=!1)}),e("div",d4,[a[14]||(a[14]=e("h3",{class:"modal-title"},"Transfer Chat",-1)),e("div",u4,[e("div",c4,[a[12]||(a[12]=e("label",{for:"staff"},"Select Staff Member",-1)),O(e("select",{id:"staff","onUpdate:modelValue":a[3]||(a[3]=$=>w.value=$),class:"form-select"},[a[11]||(a[11]=e("option",{value:""},"Select a staff member",-1)),(n(!0),d(te,null,ae(S.staffMembers,$=>(n(),d("option",{key:$.id,value:$.id},r($.name),9,p4))),128))],512),[[ue,w.value]])]),e("div",v4,[a[13]||(a[13]=e("label",{for:"transferNote"},"Transfer Note (Optional)",-1)),O(e("textarea",{id:"transferNote","onUpdate:modelValue":a[4]||(a[4]=$=>k.value=$),placeholder:"Add a note for the staff member...",class:"form-textarea"},null,512),[[Y,k.value]])])]),e("div",m4,[e("button",{onClick:a[5]||(a[5]=$=>i.value=!1),class:"btn btn-secondary"}," Cancel "),e("button",{onClick:A,class:"btn btn-primary",disabled:!w.value}," Transfer Chat ",8,f4)])])])):N("",!0),v.value?(n(),d("div",g4,[e("div",{class:"modal-backdrop",onClick:a[6]||(a[6]=$=>v.value=!1)}),e("div",y4,[a[17]||(a[17]=e("h3",{class:"modal-title"},"Close Chat",-1)),e("div",b4,[a[16]||(a[16]=e("p",null,"Are you sure you want to close this chat? This action cannot be undone.",-1)),e("div",h4,[a[15]||(a[15]=e("label",{for:"closeNote"},"Closing Note (Optional)",-1)),O(e("textarea",{id:"closeNote","onUpdate:modelValue":a[7]||(a[7]=$=>_.value=$),placeholder:"Add a closing note...",class:"form-textarea"},null,512),[[Y,_.value]])])]),e("div",k4,[e("button",{onClick:a[8]||(a[8]=$=>v.value=!1),class:"btn btn-secondary"}," Cancel "),e("button",{onClick:l,class:"btn btn-danger"}," Close Chat ")])])])):N("",!0)],2)}}},$4=ne(_4,[["__scopeId","data-v-9008bab5"]]);const w4={class:"chat-list"},C4={class:"chat-list-header"},P4={class:"filters"},A4={class:"chat-list-content"},T4={key:0,class:"loading-state"},S4={key:1,class:"empty-state"},x4={__name:"AdminChatList",props:{selectedChatId:{type:[String,Number],default:null}},emits:["select-chat","transfer-chat","close-chat"],setup(S,{emit:s}){const c=s,t=g(!0),i=g([]),v=g([]),w=g("all"),k=g(""),_=ee(()=>i.value.filter(m=>{var $;if(w.value!=="all"&&m.status!==w.value)return!1;if(k.value){const T=k.value.toLowerCase();return m.user.name.toLowerCase().includes(T)||(($=m.last_message)==null?void 0:$.content.toLowerCase().includes(T))}return!0}).sort((m,$)=>m.unread_count!==$.unread_count?$.unread_count-m.unread_count:new Date($.last_message_at)-new Date(m.last_message_at))),b=async()=>{try{t.value=!0;const m=await fetch("/api/admin/chats",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Accept:"application/json"}});if(m.ok){const $=await m.json();i.value=$.chats}}catch(m){console.error("Error fetching chats:",m)}finally{t.value=!1}},C=async()=>{try{const m=await fetch("/api/admin/staff",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Accept:"application/json"}});if(m.ok){const $=await m.json();v.value=$.staff}}catch(m){console.error("Error fetching staff members:",m)}},A=async m=>{try{const $=await fetch(`/api/admin/chats/${m.chatId}/transfer`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({staff_id:m.staffId,note:m.note})});if($.ok){const T=i.value.findIndex(h=>h.id===m.chatId);if(T!==-1){const h=await $.json();i.value[T]=h.chat}c("transfer-chat",m)}}catch($){console.error("Error transferring chat:",$)}},l=async m=>{try{const $=await fetch(`/api/admin/chats/${m.chatId}/close`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({note:m.note})});if($.ok){const T=i.value.findIndex(h=>h.id===m.chatId);if(T!==-1){const h=await $.json();i.value[T]=h.chat}c("close-chat",m)}}catch($){console.error("Error closing chat:",$)}};let f;const a=()=>{b(),f=setInterval(b,1e4)};return me(()=>{C(),a()}),onUnmounted(()=>{f&&clearInterval(f)}),(m,$)=>(n(),d("div",w4,[e("div",C4,[$[3]||($[3]=e("h2",null,"Active Chats",-1)),e("div",P4,[O(e("select",{"onUpdate:modelValue":$[0]||($[0]=T=>w.value=T),class:"filter-select"},$[2]||($[2]=[e("option",{value:"all"},"All Chats",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"closed"},"Closed",-1)]),512),[[ue,w.value]]),O(e("input",{type:"text","onUpdate:modelValue":$[1]||($[1]=T=>k.value=T),placeholder:"Search chats...",class:"search-input"},null,512),[[Y,k.value]])])]),e("div",A4,[t.value?(n(),d("div",T4,$[4]||($[4]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("p",null,"Loading chats...",-1)]))):_.value.length===0?(n(),d("div",S4,$[5]||($[5]=[e("i",{class:"fas fa-comments"},null,-1),e("p",null,"No chats found",-1)]))):(n(!0),d(te,{key:2},ae(_.value,T=>(n(),de($4,{key:T.id,chat:T,"is-active":S.selectedChatId===T.id,"staff-members":v.value,onClick:h=>m.$emit("select-chat",T),onTransfer:A,onClose:l},null,8,["chat","is-active","staff-members","onClick"]))),128))])]))}},E4=ne(x4,[["__scopeId","data-v-d66fba55"]]);const I4={class:"admin-chat-view"},D4={class:"chat-sidebar"},M4={class:"chat-main"},N4={key:0,class:"loading-state"},F4={key:1,class:"empty-state"},B4={key:2,class:"chat-content"},U4={class:"chat-header"},R4={class:"user-info"},L4=["src","alt"],O4={class:"user-details"},V4={class:"user-email"},q4={class:"chat-actions"},j4={key:0,class:"no-messages"},z4={class:"message-content"},G4={class:"message-time"},J4={key:0,class:"chat-input"},W4=["onKeydown","disabled"],Q4=["disabled"],H4={key:1,class:"chat-closed"},Y4={key:0,class:"modal-container"},Z4={class:"modal-content"},K4={class:"modal-body"},X4={class:"form-group"},e5=["value"],t5={class:"form-group"},s5={class:"modal-footer"},a5=["disabled"],o5={key:1,class:"modal-container"},n5={class:"modal-content"},l5={class:"modal-body"},i5={class:"form-group"},r5={class:"modal-footer"},d5={__name:"ChatView",setup(S){const s=g(!1),c=g(null),t=g(null),i=g([]),v=g(""),w=g(!1),k=g(null),_=g(null),b=g(!1),C=g(!1),A=g(""),l=g(""),f=g(""),a=g([]),m=ee(()=>JSON.parse(localStorage.getItem("user_info")||"{}").id),$=x=>x?new Date(x).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",T=()=>{qe(()=>{k.value&&(k.value.scrollTop=k.value.scrollHeight)})},h=async x=>{c.value=x.id,t.value=x,await D(x.id),T()},K=x=>{console.log("Chat transferred:",x)},U=x=>{console.log("Chat closed:",x)},D=async x=>{try{s.value=!0;const y=await fetch(`/api/admin/chats/${x}/messages`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Accept:"application/json"}});if(y.ok){const u=await y.json();i.value=u.messages}}catch(y){console.error("Error fetching messages:",y)}finally{s.value=!1}},R=async()=>{if(!(!v.value.trim()||w.value))try{w.value=!0;const x=await fetch(`/api/admin/chats/${c.value}/messages`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:v.value})});if(x.ok){const y=await x.json();i.value.push(y.message),v.value="",T()}}catch(x){console.error("Error sending message:",x)}finally{w.value=!1}};return me(()=>{_.value=rt("http://localhost:3001",{auth:{token:localStorage.getItem("auth_token")}}),_.value.on("receive_message",x=>{x.chat_id===c.value&&(i.value.push(x),T())}),_.value.on("chat_updated",x=>{x.id===c.value&&(t.value=x)})}),je(()=>{_.value&&_.value.disconnect()}),(x,y)=>{var u,I,F,z,V,B,J,G,Q,H,P;return n(),d("div",I4,[e("div",D4,[pe(E4,{"selected-chat-id":c.value,onSelectChat:h,onTransferChat:K,onCloseChat:U},null,8,["selected-chat-id"])]),e("div",M4,[s.value?(n(),d("div",N4,y[12]||(y[12]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("p",null,"Loading chat...",-1)]))):c.value?(n(),d("div",B4,[e("div",U4,[e("div",R4,[e("img",{src:((I=(u=t.value)==null?void 0:u.user)==null?void 0:I.avatar)||M(ut),alt:(z=(F=t.value)==null?void 0:F.user)==null?void 0:z.name,class:"user-avatar"},null,8,L4),e("div",O4,[e("h3",null,r((B=(V=t.value)==null?void 0:V.user)==null?void 0:B.name),1),e("p",V4,r((G=(J=t.value)==null?void 0:J.user)==null?void 0:G.email),1)])]),e("div",q4,[((Q=t.value)==null?void 0:Q.status)!=="closed"?(n(),d("button",{key:0,onClick:y[0]||(y[0]=p=>b.value=!0),class:"action-btn",title:"Transfer Chat"},y[14]||(y[14]=[e("i",{class:"fas fa-exchange-alt"},null,-1),E(" Transfer ")]))):N("",!0),((H=t.value)==null?void 0:H.status)!=="closed"?(n(),d("button",{key:1,onClick:y[1]||(y[1]=p=>C.value=!0),class:"action-btn danger",title:"Close Chat"},y[15]||(y[15]=[e("i",{class:"fas fa-times"},null,-1),E(" Close ")]))):N("",!0)])]),e("div",{class:"messages-container",ref_key:"messagesContainer",ref:k},[i.value.length===0?(n(),d("div",j4,y[16]||(y[16]=[e("p",null,"No messages yet",-1)]))):(n(!0),d(te,{key:1},ae(i.value,p=>(n(),d("div",{key:p.id,class:L(["message",{outgoing:p.sender_id===m.value}])},[e("div",z4,[e("p",null,r(p.content),1),e("span",G4,r($(p.created_at)),1)])],2))),128))],512),((P=t.value)==null?void 0:P.status)!=="closed"?(n(),d("div",J4,[O(e("textarea",{"onUpdate:modelValue":y[2]||(y[2]=p=>v.value=p),placeholder:"Type your message...",onKeydown:it(ce(R,["prevent"]),["enter"]),disabled:w.value},null,40,W4),[[Y,v.value]]),e("button",{onClick:R,disabled:!v.value.trim()||w.value,class:"send-btn"},y[17]||(y[17]=[e("i",{class:"fas fa-paper-plane"},null,-1)]),8,Q4)])):(n(),d("div",H4,y[18]||(y[18]=[e("p",null,"This chat has been closed",-1)])))])):(n(),d("div",F4,y[13]||(y[13]=[e("i",{class:"fas fa-comments"},null,-1),e("h2",null,"Select a Chat",-1),e("p",null,"Choose a conversation from the list to start chatting",-1)])))]),b.value?(n(),d("div",Y4,[e("div",{class:"modal-backdrop",onClick:y[3]||(y[3]=p=>b.value=!1)}),e("div",Z4,[y[22]||(y[22]=e("h3",{class:"modal-title"},"Transfer Chat",-1)),e("div",K4,[e("div",X4,[y[20]||(y[20]=e("label",{for:"staff"},"Select Staff Member",-1)),O(e("select",{id:"staff","onUpdate:modelValue":y[4]||(y[4]=p=>A.value=p),class:"form-select"},[y[19]||(y[19]=e("option",{value:""},"Select a staff member",-1)),(n(!0),d(te,null,ae(a.value,p=>(n(),d("option",{key:p.id,value:p.id},r(p.name),9,e5))),128))],512),[[ue,A.value]])]),e("div",t5,[y[21]||(y[21]=e("label",{for:"transferNote"},"Transfer Note (Optional)",-1)),O(e("textarea",{id:"transferNote","onUpdate:modelValue":y[5]||(y[5]=p=>l.value=p),placeholder:"Add a note for the staff member...",class:"form-textarea"},null,512),[[Y,l.value]])])]),e("div",s5,[e("button",{onClick:y[6]||(y[6]=p=>b.value=!1),class:"btn btn-secondary"}," Cancel "),e("button",{onClick:y[7]||(y[7]=(...p)=>x.handleTransfer&&x.handleTransfer(...p)),class:"btn btn-primary",disabled:!A.value}," Transfer Chat ",8,a5)])])])):N("",!0),C.value?(n(),d("div",o5,[e("div",{class:"modal-backdrop",onClick:y[8]||(y[8]=p=>C.value=!1)}),e("div",n5,[y[25]||(y[25]=e("h3",{class:"modal-title"},"Close Chat",-1)),e("div",l5,[y[24]||(y[24]=e("p",null,"Are you sure you want to close this chat? This action cannot be undone.",-1)),e("div",i5,[y[23]||(y[23]=e("label",{for:"closeNote"},"Closing Note (Optional)",-1)),O(e("textarea",{id:"closeNote","onUpdate:modelValue":y[9]||(y[9]=p=>f.value=p),placeholder:"Add a closing note...",class:"form-textarea"},null,512),[[Y,f.value]])])]),e("div",r5,[e("button",{onClick:y[10]||(y[10]=p=>C.value=!1),class:"btn btn-secondary"}," Cancel "),e("button",{onClick:y[11]||(y[11]=(...p)=>x.handleClose&&x.handleClose(...p)),class:"btn btn-danger"}," Close Chat ")])])])):N("",!0)])}}},Tt=ne(d5,[["__scopeId","data-v-89ca9d3a"]]),ge=g(null),Ee=g(!1),lt=g(0),St=5;function u5(){const{user:S,getToken:s}=ye(),{showNotification:c}=we(),t=async()=>{var a;try{const m=await s(),$="http://localhost:3001";if((a=ge.value)!=null&&a.connected){console.log("Socket already connected");return}ge.value=rt($,{auth:{token:m},reconnection:!0,reconnectionAttempts:St,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"]}),i()}catch(m){console.error("Socket initialization failed:",m),c("Failed to connect to chat server","error")}},i=()=>{ge.value&&(ge.value.on("connect",()=>{console.log("Socket connected"),Ee.value=!0,lt.value=0}),ge.value.on("disconnect",a=>{console.log("Socket disconnected:",a),Ee.value=!1,a==="io server disconnect"&&ge.value.connect()}),ge.value.on("connect_error",a=>{console.error("Socket connection error:",a),lt.value++,lt.value>=St&&c("Unable to connect to chat server. Please try again later.","error")}),ge.value.on("error",a=>{console.error("Socket error:",a),c("An error occurred with the chat connection","error")}))},v=a=>{if(!Ee.value||!ge.value){console.warn("Socket not connected. Attempting to connect..."),t().then(()=>{var m;(m=ge.value)!=null&&m.connected&&ge.value.emit("join_chat",{chatId:a})});return}ge.value.emit("join_chat",{chatId:a})},w=a=>{!Ee.value||!ge.value||ge.value.emit("leave_chat",{chatId:a})},k=(a,m)=>{if(!Ee.value||!ge.value){console.warn("Socket not connected. Message not sent.");return}ge.value.emit("message",{chatId:a,content:m,timestamp:new Date().toISOString()})},_=(a,m)=>{!Ee.value||!ge.value||ge.value.emit("typing",{chatId:a,isTyping:m})},b=a=>{ge.value&&ge.value.on("new_message",a)},C=a=>{ge.value&&ge.value.on("typing_status",a)},A=a=>{ge.value&&ge.value.on("user_joined",a)},l=a=>{ge.value&&ge.value.on("user_left",a)},f=()=>{ge.value&&(ge.value.disconnect(),ge.value=null,Ee.value=!1)};return me(()=>{S.value&&t()}),je(()=>{f()}),{isConnected:Ee,joinChat:v,leaveChat:w,sendMessage:k,emitTyping:_,onNewMessage:b,onTypingStatus:C,onUserJoined:A,onUserLeft:l,disconnect:f,initSocket:t}}const c5={class:"chat-title"},p5={key:0},v5={key:1},m5={class:"chat-actions"},f5={key:0,class:"chat-body"},g5={key:0,class:"loading-messages"},y5={class:"message-content"},b5={key:0,class:"attachment"},h5=["href"],k5={class:"message-meta"},_5={key:0,class:"typing-indicator"},$5={class:"chat-input"},w5={key:0,class:"attachment-preview"},C5={class:"input-container"},P5=["onKeydown","disabled"],A5={class:"input-actions"},T5=["disabled"],S5={__name:"ChatWindow",props:{chatId:{type:String,required:!0},currentUserId:{type:[Number,String],required:!0},isAdmin:{type:Boolean,default:!1}},emits:["close"],setup(S,{emit:s}){const c=S,t=s,{user:i}=ye(),{showNotification:v}=we(),w=u5(),k=g([]),_=g(""),b=g(!0),C=g(!1),A=g([]),l=g(null),f=g(null),a=g(null),m=g(null),$=g(!1),T=ee(()=>_.value.trim()&&!b.value);me(async()=>{await h(),K(),u()}),je(()=>{l.value&&clearTimeout(l.value),w.leaveChat(c.chatId)}),Pe(k,()=>{qe(()=>{u()})},{deep:!0});const h=async()=>{try{b.value=!0;const J=await oe.get(`/api/chat/${c.chatId}/messages`);k.value=J.data.messages,w.joinChat(c.chatId),b.value=!1,await qe(),u()}catch(J){console.error("Error initializing chat:",J),v("Error loading chat history","error"),b.value=!1}},K=()=>{w.onNewMessage(J=>{J.chatId===c.chatId&&k.value.push(J.message)}),w.onTypingStatus(J=>{J.chatId===c.chatId&&(A.value=J.typingUsers.filter(G=>G!==c.currentUserId))})},U=async()=>{if(T.value)try{const J=await oe.post(`/api/chat/${c.chatId}/messages`,{content:_.value});k.value.push(J.data.message),_.value="",await qe(),u()}catch(J){console.error("Error sending message:",J),v("Error sending message","error")}},D=()=>{l.value&&clearTimeout(l.value),w.emitTyping(c.chatId,!0),l.value=setTimeout(()=>{w.emitTyping(c.chatId,!1)},1e3)},R=()=>{a.value.click()},x=J=>{const G=J.target.files[0];if(G){if(G.size>5*1024*1024){v("File size must be less than 5MB","error");return}f.value=G}},y=()=>{f.value=null,a.value&&(a.value.value="")},u=()=>{m.value&&(m.value.scrollTop=m.value.scrollHeight)},I=J=>J.sender._id===i.value._id,F=J=>Ht(J).format("HH:mm"),z=()=>{C.value=!C.value},V=()=>{C.value=!0},B=()=>{t("close")};return(J,G)=>(n(),d("div",{class:L(["chat-window",{"is-minimized":C.value}])},[e("div",{class:"chat-header",onClick:z},[e("div",c5,[J.agent?(n(),d("span",p5,[E(" Chat with "+r(J.agent.name)+" ",1),e("span",{class:L(["status-dot",{online:$.value}])},null,2)])):(n(),d("span",v5,"Customer Support"))]),e("div",m5,[C.value?N("",!0):(n(),d("button",{key:0,onClick:ce(V,["stop"]),class:"action-btn"},G[1]||(G[1]=[e("i",{class:"fas fa-minus"},null,-1)]))),e("button",{onClick:ce(B,["stop"]),class:"action-btn"},G[2]||(G[2]=[e("i",{class:"fas fa-times"},null,-1)]))])]),C.value?N("",!0):(n(),d("div",f5,[e("div",{class:"messages",ref_key:"messagesContainer",ref:m},[b.value?(n(),d("div",g5,[pe(mt)])):(n(),d(te,{key:1},[(n(!0),d(te,null,ae(k.value,Q=>(n(),d("div",{key:Q._id,class:L(["message",{"message-own":I(Q)}])},[e("div",y5,[E(r(Q.content)+" ",1),Q.attachment?(n(),d("div",b5,[e("a",{href:Q.attachment.path,target:"_blank"},r(Q.attachment.filename),9,h5)])):N("",!0)]),e("div",k5,[E(r(F(Q.timestamp))+" ",1),I(Q)?(n(),d("i",{key:0,class:L(["fas fa-check",{read:Q.read}])},null,2)):N("",!0)])],2))),128)),A.value.length?(n(),d("div",_5,r(A.value.join(", "))+" "+r(A.value.length>1?"are":"is")+" typing... ",1)):N("",!0)],64))],512),e("div",$5,[f.value?(n(),d("div",w5,[e("span",null,r(f.value.name),1),e("button",{onClick:y,class:"remove-attachment"},G[3]||(G[3]=[e("i",{class:"fas fa-times"},null,-1)]))])):N("",!0),e("div",C5,[O(e("textarea",{"onUpdate:modelValue":G[0]||(G[0]=Q=>_.value=Q),onKeydown:it(ce(U,["prevent"]),["enter"]),onInput:D,placeholder:"Type a message...",disabled:!T.value},null,40,P5),[[Y,_.value]]),e("div",A5,[e("button",{onClick:R,class:"action-btn"},G[4]||(G[4]=[e("i",{class:"fas fa-paperclip"},null,-1)])),e("input",{type:"file",ref_key:"fileInput",ref:a,onChange:x,style:{display:"none"}},null,544),e("button",{onClick:U,disabled:!T.value||!_.value.trim(),class:"send-btn"},G[5]||(G[5]=[e("i",{class:"fas fa-paper-plane"},null,-1)]),8,T5)])])])]))],2))}},x5=ne(S5,[["__scopeId","data-v-69c14e3a"]]);const E5={class:"chat-view"},I5={class:"chat-container"},D5={class:"chat-content"},M5={key:0,class:"loading-state"},N5={key:1,class:"start-chat"},F5={__name:"UserChatView",setup(S){const s=_e(),c=Re(),t=g(!1),i=g(null),v=ee(()=>JSON.parse(localStorage.getItem("user_info")||"{}").id),w=async()=>{try{t.value=!0;const _=await oe.post("/api/chat",{type:"support",message:"Hello, I need assistance."});i.value=_.data.chat}catch(_){console.error("Error starting chat:",_)}finally{t.value=!1}},k=()=>{i.value=null,s.push("/")};return me(async()=>{if(c.query.userId)try{t.value=!0;const _=await oe.get(`/api/chat/active/${c.query.userId}`);_.data.chat&&(i.value=_.data.chat)}catch(_){console.error("Error fetching active chat:",_)}finally{t.value=!1}}),(_,b)=>(n(),d("div",E5,[e("div",I5,[b[4]||(b[4]=e("div",{class:"chat-header"},[e("h2",null,"Chat with Support")],-1)),e("div",D5,[t.value?(n(),d("div",M5,b[0]||(b[0]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("p",null,"Loading chat...",-1)]))):i.value?(n(),de(x5,{key:2,"chat-id":i.value._id,"current-user-id":v.value,"is-admin":!1,onClose:k},null,8,["chat-id","current-user-id"])):(n(),d("div",N5,[e("div",{class:"empty-state"},[b[1]||(b[1]=e("i",{class:"fas fa-comments"},null,-1)),b[2]||(b[2]=e("h3",null,"Start a Conversation",-1)),b[3]||(b[3]=e("p",null,"Our support team is here to help you",-1)),e("button",{onClick:w,class:"start-chat-btn"}," Start New Chat ")])]))])])]))}},B5=ne(F5,[["__scopeId","data-v-1ed1ab3a"]]);const U5={name:"PackageCard",props:{package:{type:Object,required:!0}},setup(S){const s=_e(),c=w=>w.toLocaleString("en-PH"),t=()=>{s.push(`/packages/${S.package._id}`)},i=()=>{s.push(`/bookings/${S.package._id}`)},v=ee(()=>{const w=Vt(S.package.eventType);return{backgroundColor:w.background,color:w.color}});return{formatNumber:c,viewDetails:t,bookNow:i,eventTypeStyle:v}},computed:{displayedInclusions(){var S;return((S=this.package.inclusions)==null?void 0:S.slice(0,3))||[]}}},R5={class:"package-card"},L5={class:"package-image"},O5=["src","alt"],V5={class:"package-content"},q5={class:"package-name"},j5={class:"package-price"},z5={class:"package-description"},G5={class:"package-details"},J5={class:"detail-item"},W5={class:"detail-item"},Q5={class:"package-inclusions"},H5={class:"package-actions"};function Y5(S,s,c,t,i,v){return n(),d("div",R5,[e("div",L5,[e("img",{src:c.package.image||"/default-package.jpg",alt:c.package.name},null,8,O5),e("div",{class:"package-badge",style:Je(t.eventTypeStyle)},r(c.package.eventType),5)]),e("div",V5,[e("h3",q5,r(c.package.name),1),e("div",j5,"₱"+r(t.formatNumber(c.package.price)),1),e("p",z5,r(c.package.description),1),e("div",G5,[e("div",J5,[s[2]||(s[2]=e("i",{class:"fas fa-users"},null,-1)),e("span",null,r(c.package.capacity)+" guests",1)]),e("div",W5,[s[3]||(s[3]=e("i",{class:"fas fa-clock"},null,-1)),e("span",null,r(c.package.duration),1)])]),e("div",Q5,[s[5]||(s[5]=e("h4",null,"Inclusions:",-1)),e("ul",null,[(n(!0),d(te,null,ae(v.displayedInclusions,(w,k)=>(n(),d("li",{key:k},[s[4]||(s[4]=e("i",{class:"fas fa-check"},null,-1)),E(" "+r(w),1)]))),128))])]),e("div",H5,[e("button",{class:"btn-details",onClick:s[0]||(s[0]=(...w)=>t.viewDetails&&t.viewDetails(...w))},"View Details"),e("button",{class:"btn-book",onClick:s[1]||(s[1]=(...w)=>t.bookNow&&t.bookNow(...w))},"Book Now")])])])}const Z5=ne(U5,[["render",Y5],["__scopeId","data-v-e8421b16"]]);const K5={name:"PackagesPage",components:{PackageCard:Z5},setup(){xe();const{showNotification:S}=we(),s=g(!1),c=g([]),t=g(""),i=g("All"),v=g("price-asc"),w=g(new Set),k=async()=>{try{s.value=!0;const $=await oe.get("http://127.0.0.1:8000/api/get-all-packages");c.value=$.data.map(T=>({_id:T.id,name:T.package_name,description:T.package_description,price:T.package_price?parseFloat(T.package_price):0,eventType:T.package_type,image:T.package_image?`http://127.0.0.1:8000/storage/${T.package_image}`:null,inclusions:T.package_inclusion?JSON.parse(T.package_inclusion):[],status:T.status,rating:T.rating||0,bookingsCount:T.bookingsCount||0})),c.value.forEach(T=>{["Wedding","Debut","Christening","Party","All"].includes(T.eventType)||w.value.add(T.eventType)})}catch($){console.error("Error fetching packages:",$),S("Error loading packages. Please try again.","error"),c.value=[]}finally{s.value=!1}},_=ee(()=>{let $=[...c.value];if($=$.filter(T=>{var h;return((h=T.status)==null?void 0:h.toLowerCase())==="active"}),i.value!=="All"&&($=$.filter(T=>T.eventType===i.value)),t.value){const T=t.value.toLowerCase();$=$.filter(h=>h.name.toLowerCase().includes(T)||h.description.toLowerCase().includes(T)||h.eventType.toLowerCase().includes(T))}switch(v.value){case"price-asc":$.sort((T,h)=>T.price-h.price);break;case"price-desc":$.sort((T,h)=>h.price-T.price);break;case"rating":$.sort((T,h)=>h.rating-T.rating);break;case"popularity":$.sort((T,h)=>h.bookingsCount-T.bookingsCount);break}return $}),b=$=>{i.value=$},C=()=>{t.value&&i.value!=="All"&&(i.value="All")},A=()=>{t.value="",i.value="All",v.value="price-asc"},l=ee(()=>i.value!=="All"||t.value!==""),f=()=>{i.value="All"},a=()=>{t.value=""},m=()=>{f(),a(),v.value="price-asc"};return me(()=>{k()}),{packages:c,searchQuery:t,selectedType:i,sortBy:v,customTypes:w,filteredPackages:_,filterByType:b,filterPackages:C,resetFilters:A,isLoading:s,hasActiveFilters:l,resetTypeFilter:f,resetSearchFilter:a,resetAllFilters:m}}},X5={class:"packages-page"},e8={class:"content-wrapper"},t8={class:"packages-content"},s8={class:"packages-filters"},a8={class:"search-and-filters"},o8={class:"search-bar"},n8={class:"filter-section"},l8={class:"select-wrapper"},i8={key:0,label:"Special Events"},r8=["value"],d8={class:"select-wrapper"},u8={key:0,class:"active-filters"},c8={class:"filter-tags"},p8={key:0,class:"filter-tag"},v8={key:1,class:"filter-tag"},m8={class:"packages-grid"},f8={key:0,class:"loading-spinner"},g8={key:2,class:"no-results"};function y8(S,s,c,t,i,v){const w=ke("PackageCard");return n(),de(Et,{name:"fade",mode:"out-in"},{default:ve(()=>[e("div",X5,[e("div",e8,[e("div",t8,[s[20]||(s[20]=e("header",{class:"packages-header"},[e("h1",{class:"page-title"},"Our Event Packages"),e("p",{class:"page-subtitle"},"Find the perfect package for your special occasions")],-1)),e("div",s8,[e("div",a8,[e("div",o8,[O(e("input",{"onUpdate:modelValue":s[0]||(s[0]=k=>t.searchQuery=k),type:"text",placeholder:"Search packages...",onInput:s[1]||(s[1]=(...k)=>t.filterPackages&&t.filterPackages(...k))},null,544),[[Y,t.searchQuery]]),s[10]||(s[10]=e("i",{class:"fas fa-search search-icon"},null,-1))]),e("div",n8,[e("div",l8,[s[13]||(s[13]=e("label",null,"Event Type",-1)),O(e("select",{"onUpdate:modelValue":s[2]||(s[2]=k=>t.selectedType=k),class:"event-type-select",onChange:s[3]||(s[3]=k=>t.filterByType(t.selectedType))},[s[11]||(s[11]=e("option",{value:"All"},"All Event Types",-1)),s[12]||(s[12]=e("optgroup",{label:"Standard Events"},[e("option",{value:"Wedding"},"Wedding"),e("option",{value:"Debut"},"Debut"),e("option",{value:"Christening"},"Christening"),e("option",{value:"Party"},"Party")],-1)),t.customTypes.size>0?(n(),d("optgroup",i8,[(n(!0),d(te,null,ae(Array.from(t.customTypes),k=>(n(),d("option",{key:k,value:k},r(k),9,r8))),128))])):N("",!0)],544),[[ue,t.selectedType]])]),e("div",d8,[s[15]||(s[15]=e("label",null,"Sort By",-1)),O(e("select",{"onUpdate:modelValue":s[4]||(s[4]=k=>t.sortBy=k),onChange:s[5]||(s[5]=(...k)=>S.sortPackages&&S.sortPackages(...k)),class:"sort-select"},s[14]||(s[14]=[e("option",{value:"price-asc"},"Price: Low to High",-1),e("option",{value:"price-desc"},"Price: High to Low",-1),e("option",{value:"rating"},"Rating",-1),e("option",{value:"popularity"},"Most Popular",-1)]),544),[[ue,t.sortBy]])])])]),t.hasActiveFilters?(n(),d("div",u8,[s[16]||(s[16]=e("span",{class:"filter-label"},"Active Filters:",-1)),e("div",c8,[t.selectedType!=="All"?(n(),d("span",p8,[E(r(t.selectedType)+" ",1),e("button",{onClick:s[6]||(s[6]=(...k)=>t.resetTypeFilter&&t.resetTypeFilter(...k)),class:"remove-filter"},"×")])):N("",!0),t.searchQuery?(n(),d("span",v8,[E(' "'+r(t.searchQuery)+'" ',1),e("button",{onClick:s[7]||(s[7]=(...k)=>t.resetSearchFilter&&t.resetSearchFilter(...k)),class:"remove-filter"},"×")])):N("",!0)]),e("button",{onClick:s[8]||(s[8]=(...k)=>t.resetAllFilters&&t.resetAllFilters(...k)),class:"reset-all-btn"}," Reset All ")])):N("",!0)]),e("div",m8,[t.isLoading?(n(),d("div",f8,s[17]||(s[17]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("p",null,"Loading packages...",-1)]))):t.filteredPackages.length?(n(!0),d(te,{key:1},ae(t.filteredPackages,k=>(n(),de(w,{key:k._id,package:k},null,8,["package"]))),128)):(n(),d("div",g8,[s[18]||(s[18]=e("i",{class:"fas fa-search"},null,-1)),s[19]||(s[19]=e("p",null,"No packages found matching your criteria",-1)),e("button",{onClick:s[9]||(s[9]=(...k)=>t.resetAllFilters&&t.resetAllFilters(...k)),class:"reset-btn"}," Reset Filters ")]))])])])])]),_:1})}const b8=ne(K5,[["render",y8],["__scopeId","data-v-8bb1ef2c"]]);const h8={class:"package-details-page"},k8={class:"content-wrapper"},_8={key:0,class:"loading"},$8={key:1,class:"package-container"},w8={class:"package-header"},C8=["src","alt"],P8={class:"package-overlay"},A8={class:"price"},T8={class:"package-content"},S8={class:"package-description"},x8={class:"package-details"},E8={class:"detail-item"},I8={class:"detail-item"},D8={class:"detail-item"},M8={class:"inclusions"},N8={class:"inclusions-grid"},F8={class:"ratings-section"},B8={class:"rating-overview"},U8={class:"rating-score"},R8={class:"score"},L8={class:"stars"},O8={class:"rating-bars"},V8={class:"star-number"},q8={class:"bar-container"},j8={class:"rating-count"},z8={key:0,class:"reviews-list"},G8={class:"review-header"},J8=["src","alt"],W8={class:"review-meta"},Q8={class:"stars"},H8={class:"review-date"},Y8={class:"review-text"},Z8={key:1,class:"no-reviews"},K8={key:2,class:"error"},X8={__name:"PackageDetailsPage",setup(S){const s=Re(),c=_e(),t=g(null),i=g(!0),v=g([]),w=g({}),k=g(0),_=g(!1),b=g(null),C={wedding:{bg:"#ffebee",text:"#c62828"},debut:{bg:"#fff3e0",text:"#ef6c00"},christening:{bg:"#e3f2fd",text:"#1565c0"},party:{bg:"#e8f5e9",text:"#2e7d32"},platinum:{bg:"#ede7f6",text:"#4527a0"}},A=y=>{let u=0;for(let B=0;B<y.length;B++)u=y.charCodeAt(B)+((u<<5)-u);const I=Math.abs(u%360),F=85,z=95,V=25;return{bg:`hsl(${I}, ${F}%, ${z}%)`,text:`hsl(${I}, ${F}%, ${V}%)`}},l=y=>{if(!y)return{};const u=y.toLowerCase(),I=C[u]||A(u);return{backgroundColor:I.bg,color:I.text}},f=ee(()=>{var y;if(!((y=t.value)!=null&&y.package_inclusion))return[];try{return JSON.parse(t.value.package_inclusion)}catch{return[]}}),a=y=>y==null?"0":Number(y).toLocaleString("en-PH"),m=y=>y?`http://127.0.0.1:8000/storage/${y}`:"/default-package.jpg",$=async()=>{var y;try{i.value=!0;const u=await oe.get(`http://127.0.0.1:8000/api/get-package-by-id/${s.params.id}`);if(((y=u.data.status)==null?void 0:y.toLowerCase())!=="active"){c.push("/packages");return}t.value=u.data,console.log("Package data:",u.data)}catch(u){console.error("Error fetching package details:",u),c.push("/packages")}finally{i.value=!1}},T=()=>{var y;(y=t.value)!=null&&y.id&&c.push(`/bookings/${t.value.id}`)},h=()=>{c.push("/packages")},K=async()=>{try{const y=await oe.get(`http://127.0.0.1:8000/api/package-reviews/${s.params.id}`);v.value=y.data.reviews,w.value=y.data.distribution,k.value=y.data.total,t.value&&(t.value.rating=y.data.average,t.value.reviews_count=y.data.total)}catch(y){console.error("Error fetching reviews:",y)}},U=y=>k.value===0?0:(w.value[y]||0)/k.value*100,D=y=>w.value[y]||0,R=y=>new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),x=async y=>{t.value={...t.value,rating:y.rating,reviews_count:y.reviews_count},await K(),_.value=!1};return me(()=>{$(),K()}),(y,u)=>(n(),d("div",h8,[e("div",k8,[i.value?(n(),d("div",_8,u[2]||(u[2]=[e("div",{class:"loading-spinner"},[e("i",{class:"fas fa-spinner fa-spin"}),E(" Loading package details... ")],-1)]))):t.value?(n(),d("div",$8,[e("div",w8,[e("img",{src:m(t.value.package_image),alt:t.value.package_name,class:"package-image"},null,8,C8),e("div",P8,[e("span",{class:"package-type-badge",style:Je(l(t.value.package_type))},r(t.value.package_type),5),e("h2",null,r(t.value.package_name),1),e("div",A8,"₱"+r(a(t.value.package_price)),1)])]),e("div",T8,[e("p",S8,r(t.value.package_description),1),e("div",x8,[e("div",E8,[u[4]||(u[4]=e("i",{class:"fas fa-users"},null,-1)),e("div",null,[u[3]||(u[3]=e("h4",null,"Guest Capacity",-1)),e("p",null,r(t.value.packs||0)+" persons",1)])]),e("div",I8,[u[6]||(u[6]=e("i",{class:"fas fa-calendar-alt"},null,-1)),e("div",null,[u[5]||(u[5]=e("h4",null,"Event Type",-1)),e("p",null,r(t.value.package_type),1)])]),e("div",D8,[u[8]||(u[8]=e("i",{class:"fas fa-star"},null,-1)),e("div",null,[u[7]||(u[7]=e("h4",null,"Rating",-1)),e("p",null,r(t.value.rating||"0.0")+" / 5.0",1)])])]),e("div",M8,[u[10]||(u[10]=e("h3",null,"Package Inclusions",-1)),e("div",N8,[(n(!0),d(te,null,ae(f.value,(I,F)=>(n(),d("div",{key:F,class:"inclusion-item"},[u[9]||(u[9]=e("i",{class:"fas fa-check"},null,-1)),e("span",null,r(I),1)]))),128))])]),e("div",F8,[u[12]||(u[12]=e("h3",null,"Ratings and reviews",-1)),e("div",B8,[e("div",U8,[e("h2",R8,r(t.value.rating||"0.0"),1),e("div",L8,[(n(),d(te,null,ae(5,I=>e("i",{key:I,class:L(["fas fa-star",{active:I<=Math.floor(t.value.rating||0)}])},null,2)),64))]),e("p",null,r(t.value.reviews_count||0)+" "+r((t.value.reviews_count||0)===1?"review":"reviews"),1)]),e("div",O8,[(n(),d(te,null,ae(5,I=>e("div",{key:I,class:"rating-bar-item"},[e("span",V8,r(6-I),1),e("div",q8,[e("div",{class:"bar",style:Je({width:U(6-I)+"%"})},null,4)]),e("span",j8,r(D(6-I)),1)])),64))])]),v.value.length>0?(n(),d("div",z8,[(n(!0),d(te,null,ae(v.value,I=>(n(),d("div",{key:I.id,class:"review-item"},[e("div",G8,[e("img",{src:I.user_avatar,alt:I.user_name,class:"user-avatar",onError:u[0]||(u[0]=F=>F.target.src="http://127.0.0.1:8000/storage/avatars/defaultAvatar.png")},null,40,J8),e("div",W8,[e("h4",null,r(I.user_name),1),e("div",Q8,[(n(),d(te,null,ae(5,F=>e("i",{key:F,class:L(["fas fa-star",{active:F<=I.rating}])},null,2)),64))]),e("p",H8,r(R(I.created_at)),1)])]),e("p",Y8,r(I.review),1)]))),128))])):(n(),d("div",Z8,u[11]||(u[11]=[e("p",null,"No reviews yet",-1)])))]),e("div",{class:"package-actions"},[e("button",{onClick:h,class:"btn-back"},u[13]||(u[13]=[e("i",{class:"fas fa-arrow-left"},null,-1),E(" Back to Packages ")])),e("button",{onClick:T,class:"btn-book"},u[14]||(u[14]=[e("i",{class:"fas fa-calendar-check"},null,-1),E(" Book Now ")]))])])])):(n(),d("div",K8,u[15]||(u[15]=[e("i",{class:"fas fa-exclamation-circle"},null,-1),E(" Package not found ")])))]),_.value?(n(),de(Bt,{key:0,booking:b.value,onClose:u[1]||(u[1]=I=>_.value=!1),onRatingAdded:x},null,8,["booking"])):N("",!0)]))}},eP=ne(X8,[["__scopeId","data-v-bceb18e9"]]);const tP={class:"payment-management"},sP={class:"header"},aP={class:"filters"},oP={class:"filter-group"},nP={class:"filter-group"},lP={class:"filter-group"},iP={class:"date-inputs"},rP=["max"],dP=["min","max"],uP={class:"payments-table"},cP={class:"booking-info"},pP={class:"booking-id"},vP={class:"event-type"},mP={class:"customer-info"},fP={class:"name"},gP={class:"email"},yP={class:"actions"},bP=["onClick"],hP=["onClick"],kP=["onClick"],_P={key:0,class:"modal"},$P={class:"modal-content"},wP={class:"modal-header"},CP={class:"modal-body"},PP={class:"details-grid"},AP={class:"detail-group"},TP={key:0},SP={key:1},xP={class:"detail-group"},EP={class:"detail-group"},IP={key:0,class:"receipt-section"},DP={class:"receipt-image"},MP=["src"],NP=["href"],FP={key:0,class:"modal-footer"},BP={class:"modal-content"},UP=["src"],RP={__name:"PaymentManagement",setup(S){const s=g([]),c=g(null),t=g(null),i=g({status:"",paymentMethod:"",startDate:"",endDate:""}),v=ee(()=>new Date().toISOString().split("T")[0]),w=async()=>{try{const a={status:i.value.status,payment_method:i.value.paymentMethod,start_date:i.value.startDate,end_date:i.value.endDate},m=await oe.get("/api/payments",{params:a});s.value=m.data.payments}catch(a){console.error("Error loading payments:",a),Z.fire({icon:"error",title:"Error",text:"Failed to load payments"})}},k=async(a,m)=>{var $;try{if((await Z.fire({title:`${m==="completed"?"Approve":"Reject"} Payment?`,text:`Are you sure you want to ${m==="completed"?"approve":"reject"} this payment?`,icon:"warning",showCancelButton:!0,confirmButtonColor:m==="completed"?"#10B981":"#EF4444",confirmButtonText:m==="completed"?"Yes, approve":"Yes, reject",cancelButtonText:"Cancel"})).isConfirmed){const h=await Z.fire({title:"Add Notes (Optional)",input:"textarea",inputPlaceholder:"Enter any notes about this decision...",showCancelButton:!0,inputValidator:D=>{if(D&&D.length>500)return"Notes cannot exceed 500 characters"}}),K=await oe.put(`/api/payments/${a.id}/status`,{status:m,notes:h.value}),U=s.value.findIndex(D=>D.id===a.id);U!==-1&&(s.value[U]=K.data.payment),(($=c.value)==null?void 0:$.id)===a.id&&(c.value=K.data.payment),Z.fire({icon:"success",title:"Success",text:`Payment ${m==="completed"?"approved":"rejected"} successfully`})}}catch(T){console.error("Error updating payment status:",T),Z.fire({icon:"error",title:"Error",text:"Failed to update payment status"})}},_=a=>{c.value=a},b=a=>Number(a).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2}),C=a=>new Date(a).toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"}),A=a=>`/storage/${a}`,l=a=>{t.value=A(a)},f=()=>{t.value=null};return me(()=>{w()}),(a,m)=>(n(),d("div",tP,[e("div",sP,[m[14]||(m[14]=e("h2",null,"Payment Management",-1)),e("div",aP,[e("div",oP,[m[9]||(m[9]=e("label",null,"Status",-1)),O(e("select",{"onUpdate:modelValue":m[0]||(m[0]=$=>i.value.status=$)},m[8]||(m[8]=[he('<option value="" data-v-fa40e658>All</option><option value="pending" data-v-fa40e658>Pending</option><option value="completed" data-v-fa40e658>Completed</option><option value="failed" data-v-fa40e658>Failed</option><option value="refunded" data-v-fa40e658>Refunded</option>',5)]),512),[[ue,i.value.status]])]),e("div",nP,[m[11]||(m[11]=e("label",null,"Payment Method",-1)),O(e("select",{"onUpdate:modelValue":m[1]||(m[1]=$=>i.value.paymentMethod=$)},m[10]||(m[10]=[e("option",{value:""},"All",-1),e("option",{value:"gcash"},"GCash",-1),e("option",{value:"cash"},"Cash",-1)]),512),[[ue,i.value.paymentMethod]])]),e("div",lP,[m[13]||(m[13]=e("label",null,"Date Range",-1)),e("div",iP,[O(e("input",{type:"date","onUpdate:modelValue":m[2]||(m[2]=$=>i.value.startDate=$),max:i.value.endDate||v.value},null,8,rP),[[Y,i.value.startDate]]),m[12]||(m[12]=e("span",null,"to",-1)),O(e("input",{type:"date","onUpdate:modelValue":m[3]||(m[3]=$=>i.value.endDate=$),min:i.value.startDate,max:v.value},null,8,dP),[[Y,i.value.endDate]])])]),e("button",{class:"apply-btn",onClick:w}," Apply Filters ")])]),e("div",uP,[e("table",null,[m[15]||(m[15]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Booking"),e("th",null,"Customer"),e("th",null,"Amount"),e("th",null,"Method"),e("th",null,"Status"),e("th",null,"Date"),e("th",null,"Actions")])],-1)),e("tbody",null,[(n(!0),d(te,null,ae(s.value,$=>(n(),d("tr",{key:$.id},[e("td",null,"#"+r($.id),1),e("td",null,[e("div",cP,[e("span",pP,"#"+r($.booking.id),1),e("span",vP,r($.booking.event_type),1)])]),e("td",null,[e("div",mP,[e("span",fP,r($.booking.full_name),1),e("span",gP,r($.booking.email),1)])]),e("td",null,"₱"+r(b($.amount)),1),e("td",null,[e("span",{class:L(["payment-method",$.payment_method])},r($.payment_method==="gcash"?"GCash":"Cash"),3)]),e("td",null,[e("span",{class:L(["status-badge",$.status])},r($.status),3)]),e("td",null,r(C($.created_at)),1),e("td",null,[e("div",yP,[$.status==="pending"?(n(),d("button",{key:0,class:"action-btn approve",onClick:T=>k($,"completed")}," Approve ",8,bP)):N("",!0),$.status==="pending"?(n(),d("button",{key:1,class:"action-btn reject",onClick:T=>k($,"failed")}," Reject ",8,hP)):N("",!0),e("button",{class:"action-btn view",onClick:T=>_($)}," View ",8,kP)])])]))),128))])])]),c.value?(n(),d("div",_P,[e("div",$P,[e("div",wP,[m[17]||(m[17]=e("h3",null,"Payment Details",-1)),e("button",{class:"close-btn",onClick:m[4]||(m[4]=$=>c.value=null)},m[16]||(m[16]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",CP,[e("div",PP,[e("div",AP,[m[24]||(m[24]=e("h4",null,"Payment Information",-1)),e("p",null,[m[18]||(m[18]=e("strong",null,"ID:",-1)),E(" #"+r(c.value.id),1)]),e("p",null,[m[19]||(m[19]=e("strong",null,"Amount:",-1)),E(" ₱"+r(b(c.value.amount)),1)]),e("p",null,[m[20]||(m[20]=e("strong",null,"Method:",-1)),E(" "+r(c.value.payment_method==="gcash"?"GCash":"Cash"),1)]),e("p",null,[m[21]||(m[21]=e("strong",null,"Status:",-1)),E(" "+r(c.value.status),1)]),c.value.gcash_reference_number?(n(),d("p",TP,[m[22]||(m[22]=e("strong",null,"GCash Reference:",-1)),E(" "+r(c.value.gcash_reference_number),1)])):N("",!0),c.value.notes?(n(),d("p",SP,[m[23]||(m[23]=e("strong",null,"Notes:",-1)),E(" "+r(c.value.notes),1)])):N("",!0)]),e("div",xP,[m[29]||(m[29]=e("h4",null,"Booking Details",-1)),e("p",null,[m[25]||(m[25]=e("strong",null,"Booking ID:",-1)),E(" #"+r(c.value.booking.id),1)]),e("p",null,[m[26]||(m[26]=e("strong",null,"Event Type:",-1)),E(" "+r(c.value.booking.event_type),1)]),e("p",null,[m[27]||(m[27]=e("strong",null,"Event Date:",-1)),E(" "+r(C(c.value.booking.event_date)),1)]),e("p",null,[m[28]||(m[28]=e("strong",null,"Status:",-1)),E(" "+r(c.value.booking.status),1)])]),e("div",EP,[m[33]||(m[33]=e("h4",null,"Customer Information",-1)),e("p",null,[m[30]||(m[30]=e("strong",null,"Name:",-1)),E(" "+r(c.value.booking.full_name),1)]),e("p",null,[m[31]||(m[31]=e("strong",null,"Email:",-1)),E(" "+r(c.value.booking.email),1)]),e("p",null,[m[32]||(m[32]=e("strong",null,"Phone:",-1)),E(" "+r(c.value.booking.phone),1)])])]),c.value.receipt_image?(n(),d("div",IP,[m[35]||(m[35]=e("h4",null,"Payment Receipt",-1)),e("div",DP,[e("img",{src:A(c.value.receipt_image),alt:"Payment Receipt",onClick:m[5]||(m[5]=$=>l(c.value.receipt_image))},null,8,MP)]),e("a",{href:A(c.value.receipt_image),download:"",class:"download-receipt"},m[34]||(m[34]=[e("i",{class:"fas fa-download"},null,-1),E(" Download Receipt ")]),8,NP)])):N("",!0)]),c.value.status==="pending"?(n(),d("div",FP,[e("button",{class:"action-btn approve",onClick:m[6]||(m[6]=$=>k(c.value,"completed"))}," Approve Payment "),e("button",{class:"action-btn reject",onClick:m[7]||(m[7]=$=>k(c.value,"failed"))}," Reject Payment ")])):N("",!0)])])):N("",!0),t.value?(n(),d("div",{key:1,class:"image-preview-modal",onClick:f},[e("div",BP,[e("img",{src:t.value,alt:"Preview"},null,8,UP),e("button",{class:"close-preview",onClick:f},m[36]||(m[36]=[e("i",{class:"fas fa-times"},null,-1)]))])])):N("",!0)]))}},LP=ne(RP,[["__scopeId","data-v-fa40e658"]]);const OP={class:"bookings-management"},VP={class:"management-content"},qP={class:"page-header"},jP={class:"header-actions"},zP={class:"search-bar"},GP={class:"filters"},JP={key:0,class:"loading"},WP={key:1,class:"table-container"},QP={class:"actions"},HP=["onClick"],YP={__name:"ArchivedBookings",setup(S){const s=g([]),c=g(!0),t=g(""),i=g(""),v=A=>A?new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",w=async()=>{try{c.value=!0;const A=await oe.get("/api/bookings/archived");s.value=A.data}catch(A){console.error("Error fetching archived bookings:",A),Z.fire("Error","Failed to fetch archived bookings","error")}finally{c.value=!1}},k=async A=>{(await Z.fire({title:"Restore Booking?",text:"This booking will be moved back to active bookings",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, restore it!"})).isConfirmed&&await _(A.id)},_=async A=>{try{(await oe.post(`/api/bookings/${A}/restore`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.status===200&&(Z.fire("Success","Booking restored successfully","success"),await w())}catch{Z.fire("Error","Failed to restore booking","error")}},b=()=>{},C=()=>{};return me(()=>{w()}),(A,l)=>(n(),d("div",OP,[e("main",VP,[e("div",qP,[l[5]||(l[5]=e("h1",null,"Archived Bookings",-1)),e("div",jP,[e("div",zP,[l[2]||(l[2]=e("i",{class:"fas fa-search"},null,-1)),O(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=f=>t.value=f),placeholder:"Search archived bookings...",onInput:b,class:"search-input"},null,544),[[Y,t.value]])]),e("div",GP,[O(e("select",{"onUpdate:modelValue":l[1]||(l[1]=f=>i.value=f),class:"filter-select"},l[3]||(l[3]=[he('<option value="" data-v-25042b43>All Status</option><option value="pending" data-v-25042b43>Pending</option><option value="confirmed" data-v-25042b43>Confirmed</option><option value="completed" data-v-25042b43>Completed</option><option value="cancelled" data-v-25042b43>Cancelled</option>',5)]),512),[[ue,i.value]]),e("button",{class:"filter-btn",onClick:C},l[4]||(l[4]=[e("i",{class:"fas fa-filter"},null,-1),E(" Apply Filters ")]))])])]),c.value?(n(),d("div",JP," Loading archived bookings... ")):(n(),d("div",WP,[e("table",null,[l[7]||(l[7]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Customer"),e("th",null,"Event Date"),e("th",null,"Status"),e("th",null,"Actions")])],-1)),e("tbody",null,[(n(!0),d(te,null,ae(s.value,f=>(n(),d("tr",{key:f.id},[e("td",null,"#"+r(f.id),1),e("td",null,r(f.full_name),1),e("td",null,r(v(f.event_date)),1),e("td",null,[e("span",{class:L(["status-badge",f.status])},r(f.status),3)]),e("td",null,[e("div",QP,[e("button",{class:"btn-action restore",onClick:a=>k(f),title:"Restore booking"},l[6]||(l[6]=[e("i",{class:"fas fa-undo"},null,-1)]),8,HP)])])]))),128))])])]))])]))}},ZP=ne(YP,[["__scopeId","data-v-25042b43"]]),KP=[{path:"/",name:"home",component:Ga},{path:"/services",name:"services",component:Co},{path:"/gallery",name:"gallery",component:on},{path:"/contact",name:"contact",component:Fn},{path:"/about-us",name:"AboutUs",component:dl},{path:"/book",name:"book",component:Ct,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:Ui,meta:{guestOnly:!0}},{path:"/register",name:"register",component:Uu,meta:{guestOnly:!0}},{path:"/forgot-password",name:"forgot-password",component:Qu,meta:{guestOnly:!0}},{path:"/reset-password/:token",name:"reset-password",component:vc,meta:{guestOnly:!0}},{path:"/bookings",name:"bookingUserManage",component:su,meta:{requiresAuth:!0}},{path:"/bookings/:id",name:"BookingPageView",component:Ct,meta:{requiresAuth:!0}},{path:"/profile",name:"profile",component:xp,meta:{requiresAuth:!0}},{path:"/admin",component:ea,meta:{requiresAuth:!0,requiresAdmin:!0},children:[{path:"",name:"admin-dashboard",component:zv,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"bookings",name:"admin-bookings",component:bf,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"contact-us",name:"admin-contact-us",component:qh,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"packages",name:"admin-packages",component:$g,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"portfolios",name:"admin-portfolios",component:ly,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"users",name:"admin-users",component:_h,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"reports",name:"admin-reports",component:Vk,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"gallery",name:"admin-gallery",component:z0,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"testimonials",name:"admin-testimonials",component:Q_,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"faqs",name:"admin-faqs",component:H2,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"settings",name:"admin-settings",component:j$,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"transactions",name:"admin-transactions",component:Hw,meta:{requiresAuth:!0,requiresAdmin:!0,title:"Transactions Management"}},{path:"analytics/payments",name:"admin-payment-analytics",component:$3,meta:{requiresAuth:!0,requiresAdmin:!0,title:"Payment Analytics"}},{path:"chats",name:"admin-chats",component:YC,meta:{requiresAuth:!0,requiresAdmin:!0,title:"Chat Management"}},{path:"chats/:id",name:"admin-chat-view",component:Tt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/settings",name:"Settings",component:()=>Ls(()=>import("./SettingsPage-797c581d.js"),["assets/SettingsPage-797c581d.js","assets/vendor-771ffc5f.js","assets/vendor-f7f236c2.css","assets/SettingsPage-a4e720f5.css"]),meta:{requiresAuth:!0}},{path:"/admin/payments",name:"admin-payments",component:LP,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/archived-bookings",name:"ArchivedBookings",component:ZP,meta:{requiresAuth:!0,requiresAdmin:!0}}]},{path:"/packages",name:"Packages",component:b8,meta:{title:"Event Packages - Razz Rell Events"}},{path:"/packages/:id",name:"PackageDetails",component:eP,meta:{title:"Package Details - Razz Rell Events"}},{path:"/chat",name:"user-chat",component:B5,meta:{requiresAuth:!0}},{path:"/admin/chat",name:"admin-chat",component:Tt,meta:{requiresAuth:!0,requiresAdmin:!0}}],qt=Yt({history:Zt(),routes:KP,scrollBehavior(S,s,c){return c||{top:0}}});qt.beforeEach((S,s,c)=>{const{isAuthenticated:t,isAdmin:i}=ye(),v=localStorage.getItem("user_role");if(S.meta.requiresAuth&&!t.value){c({name:"login",query:{redirect:S.fullPath}});return}if(S.meta.requiresAdmin&&v!=="admin"&&v!=="staff"){c("/");return}if(S.meta.guestOnly&&t.value){c(s.path);return}c()});const ft=Kt(Bs),XP=Xt();ft.use(XP);ft.use(qt);ft.mount("#app");export{ne as _,ye as u};
